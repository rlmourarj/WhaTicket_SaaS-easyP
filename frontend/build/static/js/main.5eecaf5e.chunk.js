(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{1012:function(e){e.exports=JSON.parse("{}")},1097:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(41),o=t.n(r),c=t(1230),i=(t(750),t(439)),s=t(699),m=t(703),d=t(1226),u=t(1109);var p=l.a.createContext({toggleColorMode:()=>{}}),g=t(43),E=t(71),b=t(11),h=t(4),f=t(3),y=t(1183),v=t(59),O=t(1262),C=t(714),x=t(1181),S=t(1178),j=t(1196),k=t(1197),w=t(114),T=t(708),I=t(1189),A=t(641),N=t.n(A),M=t(640),R=t.n(M),D=t(644),L=t.n(D),P=t(1100),W=t(1175),q=t(1176),F=t(1182),z=t(1101),B=t(1180),U=t(180),V=t.n(U),H=t(442),Y=t.n(H),G=t(625),_=t.n(G),Q=t(626),K=t.n(Q),Z=t(615),J=t.n(Z),X=t(324),$=t.n(X),ee=t(441),ae=t.n(ee),te=t(267),ne=t.n(te),le=t(325),re=t.n(le),oe=t(268),ce=t.n(oe),ie=t(1177),se=t(1179),me=t(619),de=t.n(me),ue=t(618),pe=t.n(ue),ge=t(614),Ee=t.n(ge),be=t(617),he=t.n(be),fe=t(623),ye=t.n(fe),ve=t(621),Oe=t.n(ve),Ce=t(620),xe=t.n(Ce),Se=t(627),je=t.n(Se),ke=t(624),we=t.n(ke),Te=t(622),Ie=t.n(Te),Ae=t(616),Ne=t.n(Ae),Me=t(438),Re=t(612);const De=Object(h.a)(Object(h.a)(Object(h.a)({},{pt:{translations:{signup:{title:"Cadastre-se",toasts:{success:"Usu\xe1rio criado com sucesso! Fa\xe7a seu login!!!.",fail:"Erro ao criar usu\xe1rio. Verifique os dados informados."},form:{name:"Nome",email:"Email",password:"Senha"},buttons:{submit:"Cadastrar",login:"J\xe1 tem uma conta? Entre!"}},login:{title:"Login",form:{email:"Email",password:"Senha"},buttons:{submit:"Entrar",register:"N\xe3o tem um conta? Cadastre-se!"}},companies:{title:"Cadastrar Empresa",form:{name:"Nome da Empresa",plan:"Plano",token:"Token",submit:"Cadastrar",success:"Empresa criada com sucesso!"}},auth:{toasts:{success:"Login efetuado com sucesso!"},token:"Token"},dashboard:{charts:{perDay:{title:"Atendimentos hoje: "}}},connections:{title:"Conex\xf5es",toasts:{deleted:"Conex\xe3o com o WhatsApp exclu\xedda com sucesso!"},confirmationModal:{deleteTitle:"Deletar",deleteMessage:"Voc\xea tem certeza? Essa a\xe7\xe3o n\xe3o pode ser revertida.",disconnectTitle:"Desconectar",disconnectMessage:"Tem certeza? Voc\xea precisar\xe1 ler o QR Code novamente."},buttons:{add:"Adicionar WhatsApp",disconnect:"desconectar",tryAgain:"Tentar novamente",qrcode:"QR CODE",newQr:"Novo QR CODE",connecting:"Conectando"},toolTips:{disconnected:{title:"Falha ao iniciar sess\xe3o do WhatsApp",content:"Certifique-se de que seu celular esteja conectado \xe0 internet e tente novamente, ou solicite um novo QR Code"},qrcode:{title:"Esperando leitura do QR Code",content:"Clique no bot\xe3o 'QR CODE' e leia o QR Code com o seu celular para iniciar a sess\xe3o"},connected:{title:"Conex\xe3o estabelecida!"},timeout:{title:"A conex\xe3o com o celular foi perdida",content:"Certifique-se de que seu celular esteja conectado \xe0 internet e o WhatsApp esteja aberto, ou clique no bot\xe3o 'Desconectar' para obter um novo QR Code"}},table:{name:"Nome",status:"Status",lastUpdate:"\xdaltima atualiza\xe7\xe3o",default:"Padr\xe3o",actions:"A\xe7\xf5es",session:"Sess\xe3o"}},whatsappModal:{title:{add:"Adicionar WhatsApp",edit:"Editar WhatsApp"},form:{name:"Nome",default:"Padr\xe3o"},buttons:{okAdd:"Adicionar",okEdit:"Salvar",cancel:"Cancelar"},success:"WhatsApp salvo com sucesso."},qrCode:{message:"Leia o QrCode para iniciar a sess\xe3o"},contacts:{title:"Contatos",toasts:{deleted:"Contato exclu\xeddo com sucesso!"},searchPlaceholder:"Pesquisar...",confirmationModal:{deleteTitle:"Deletar ",importTitlte:"Importar contatos",deleteMessage:"Tem certeza que deseja deletar este contato? Todos os atendimentos relacionados ser\xe3o perdidos.",importMessage:"Deseja importar todos os contatos do telefone?"},buttons:{import:"Importar Contatos",add:"Adicionar Contato"},table:{name:"Nome",whatsapp:"WhatsApp",email:"Email",actions:"A\xe7\xf5es"}},contactModal:{title:{add:"Adicionar contato",edit:"Editar contato"},form:{mainInfo:"Dados do contato",extraInfo:"Informa\xe7\xf5es adicionais",name:"Nome",number:"N\xfamero do Whatsapp",email:"Email",extraName:"Nome do campo",extraValue:"Valor"},buttons:{addExtraInfo:"Adicionar informa\xe7\xe3o",okAdd:"Adicionar",okEdit:"Salvar",cancel:"Cancelar"},success:"Contato salvo com sucesso."},queueModal:{title:{add:"Adicionar fila",edit:"Editar fila"},form:{name:"Nome",color:"Cor",greetingMessage:"Mensagem de sauda\xe7\xe3o",complationMessage:"Mensagem de conclus\xe3o",outOfHoursMessage:"Mensagem de fora de expediente",ratingMessage:"Mensagem de avalia\xe7\xe3o",token:"Token"},buttons:{okAdd:"Adicionar",okEdit:"Salvar",cancel:"Cancelar"}},userModal:{title:{add:"Adicionar usu\xe1rio",edit:"Editar usu\xe1rio"},form:{name:"Nome",email:"Email",password:"Senha",profile:"Perfil"},buttons:{okAdd:"Adicionar",okEdit:"Salvar",cancel:"Cancelar"},success:"Usu\xe1rio salvo com sucesso."},scheduleModal:{title:{add:"Novo Agendamento",edit:"Editar Agendamento"},form:{body:"Mensagem",contact:"Contato",sendAt:"Data de Agendamento",sentAt:"Data de Envio"},buttons:{okAdd:"Adicionar",okEdit:"Salvar",cancel:"Cancelar"},success:"Agendamento salvo com sucesso."},tagModal:{title:{add:"Nova Tag",edit:"Editar Tag",addKanban:"Nova Lane",editKanban:"Editar Lane"},form:{name:"Nome",color:"Cor"},buttons:{okAdd:"Adicionar",okEdit:"Salvar",cancel:"Cancelar"},success:"Tag salvo com sucesso.",successKanban:"Lane salva com sucesso."},kanban:{title:"Kanban",searchPlaceholder:"Pesquisa",subMenus:{list:"Painel",tags:"Lanes"}},tagsKanban:{title:"Lanes",laneDefault:"Em aberto",confirmationModal:{deleteTitle:"Voc\xea tem certeza que quer excluir esta Lane?",deleteMessage:"Esta a\xe7\xe3o n\xe3o pode ser revertida."},table:{name:"Nome",color:"Cor",tickets:"Tickets",actions:"A\xe7\xf5es"},buttons:{add:"Nova Lane"},toasts:{deleted:"Lane exclu\xedda com sucesso."}},chat:{noTicketMessage:"Selecione um ticket para come\xe7ar a conversar."},uploads:{titles:{titleUploadMsgDragDrop:"ARRASTE E SOLTE ARQUIVOS NO CAMPO ABAIXO",titleFileList:"Lista de arquivo(s)"}},ticketsManager:{buttons:{newTicket:"Novo"}},ticketsQueueSelect:{placeholder:"Filas"},tickets:{toasts:{deleted:"O atendimento que voc\xea estava foi deletado."},notification:{message:"Mensagem de"},tabs:{open:{title:"Abertas"},closed:{title:"Resolvidos"},search:{title:"Busca"}},search:{placeholder:"Buscar atendimento e mensagens"},buttons:{showAll:"Todos"}},transferTicketModal:{title:"Transferir Ticket",fieldLabel:"Digite para buscar usu\xe1rios",fieldQueueLabel:"Transferir para fila",fieldQueuePlaceholder:"Selecione uma fila",noOptions:"Nenhum usu\xe1rio encontrado com esse nome",buttons:{ok:"Transferir",cancel:"Cancelar"}},ticketsList:{pendingHeader:"Aguardando",assignedHeader:"Atendendo",noTicketsTitle:"Nada aqui!",noTicketsMessage:"Nenhum atendimento encontrado com esse status ou termo pesquisado",buttons:{accept:"Aceitar"}},newTicketModal:{title:"Criar Ticket",fieldLabel:"Digite para pesquisar o contato",add:"Adicionar",buttons:{ok:"Salvar",cancel:"Cancelar"}},mainDrawer:{listItems:{dashboard:"Dashboard",connections:"Conex\xf5es",tickets:"Atendimentos",todolist:"Tarefas",quickMessages:"Respostas R\xe1pidas",contacts:"Contatos",queues:"Filas & Chatbot",tags:"Tags",administration:"Administra\xe7\xe3o",users:"Usu\xe1rios",settings:"Configura\xe7\xf5es",helps:"Ajuda",messagesAPI:"API",schedules:"Agendamentos",campaigns:"Campanhas",annoucements:"Informativos",chats:"Chat Interno",financeiro:"Financeiro",kanban:"Kanban"},appBar:{user:{profile:"Perfil",logout:"Sair"}}},messagesAPI:{title:"API",textMessage:{number:"N\xfamero",body:"Mensagem",token:"Token cadastrado"},mediaMessage:{number:"N\xfamero",body:"Nome do arquivo",media:"Arquivo",token:"Token cadastrado"}},notifications:{noTickets:"Nenhuma notifica\xe7\xe3o."},quickMessages:{title:"Respostas R\xe1pidas",buttons:{add:"Nova Resposta"},dialog:{shortcode:"Atalho",message:"Resposta"}},contactLists:{title:"Listas de Contatos",table:{name:"Nome",contacts:"Contatos",actions:"A\xe7\xf5es"},buttons:{add:"Nova Lista"},dialog:{name:"Nome",company:"Empresa",okEdit:"Editar",okAdd:"Adicionar",add:"Adicionar",edit:"Editar",cancel:"Cancelar"},confirmationModal:{deleteTitle:"Excluir",deleteMessage:"Esta a\xe7\xe3o n\xe3o pode ser revertida."},toasts:{deleted:"Registro exclu\xeddo"}},contactListItems:{title:"Contatos",searchPlaceholder:"Pesquisa",buttons:{add:"Novo",lists:"Listas",import:"Importar"},dialog:{name:"Nome",number:"N\xfamero",whatsapp:"Whatsapp",email:"E-mail",okEdit:"Editar",okAdd:"Adicionar",add:"Adicionar",edit:"Editar",cancel:"Cancelar"},table:{name:"Nome",number:"N\xfamero",whatsapp:"Whatsapp",email:"E-mail",actions:"A\xe7\xf5es"},confirmationModal:{deleteTitle:"Excluir",deleteMessage:"Esta a\xe7\xe3o n\xe3o pode ser revertida.",importMessage:"Deseja importar os contatos desta planilha? ",importTitlte:"Importar"},toasts:{deleted:"Registro exclu\xeddo"}},campaigns:{title:"Campanhas",searchPlaceholder:"Pesquisa",buttons:{add:"Nova Campanha",contactLists:"Listas de Contatos"},table:{name:"Nome",whatsapp:"Conex\xe3o",contactList:"Lista de Contatos",status:"Status",scheduledAt:"Agendamento",completedAt:"Conclu\xedda",confirmation:"Confirma\xe7\xe3o",actions:"A\xe7\xf5es"},dialog:{new:"Nova Campanha",update:"Editar Campanha",readonly:"Apenas Visualiza\xe7\xe3o",form:{name:"Nome",message1:"Mensagem 1",message2:"Mensagem 2",message3:"Mensagem 3",message4:"Mensagem 4",message5:"Mensagem 5",confirmationMessage1:"Mensagem de Confirma\xe7\xe3o 1",confirmationMessage2:"Mensagem de Confirma\xe7\xe3o 2",confirmationMessage3:"Mensagem de Confirma\xe7\xe3o 3",confirmationMessage4:"Mensagem de Confirma\xe7\xe3o 4",confirmationMessage5:"Mensagem de Confirma\xe7\xe3o 5",messagePlaceholder:"Conte\xfado da mensagem",whatsapp:"Conex\xe3o",status:"Status",scheduledAt:"Agendamento",confirmation:"Confirma\xe7\xe3o",contactList:"Lista de Contato"},buttons:{add:"Adicionar",edit:"Atualizar",okadd:"Ok",cancel:"Cancelar Disparos",restart:"Reiniciar Disparos",close:"Fechar",attach:"Anexar Arquivo"}},confirmationModal:{deleteTitle:"Excluir",deleteMessage:"Esta a\xe7\xe3o n\xe3o pode ser revertida."},toasts:{success:"Opera\xe7\xe3o realizada com sucesso",cancel:"Campanha cancelada",restart:"Campanha reiniciada",deleted:"Registro exclu\xeddo"}},announcements:{title:"Informativos",searchPlaceholder:"Pesquisa",buttons:{add:"Novo Informativo",contactLists:"Listas de Informativos"},table:{priority:"Prioridade",title:"Title",text:"Texto",mediaName:"Arquivo",status:"Status",actions:"A\xe7\xf5es"},dialog:{edit:"Edi\xe7\xe3o de Informativo",add:"Novo Informativo",update:"Editar Informativo",readonly:"Apenas Visualiza\xe7\xe3o",form:{priority:"Prioridade",title:"Title",text:"Texto",mediaPath:"Arquivo",status:"Status"},buttons:{add:"Adicionar",edit:"Atualizar",okadd:"Ok",cancel:"Cancelar",close:"Fechar",attach:"Anexar Arquivo"}},confirmationModal:{deleteTitle:"Excluir",deleteMessage:"Esta a\xe7\xe3o n\xe3o pode ser revertida."},toasts:{success:"Opera\xe7\xe3o realizada com sucesso",deleted:"Registro exclu\xeddo"}},campaignsConfig:{title:"Configura\xe7\xf5es de Campanhas"},queues:{title:"Filas & Chatbot",table:{name:"Nome",color:"Cor",greeting:"Mensagem de sauda\xe7\xe3o",actions:"A\xe7\xf5es"},buttons:{add:"Adicionar fila"},confirmationModal:{deleteTitle:"Excluir",deleteMessage:"Voc\xea tem certeza? Essa a\xe7\xe3o n\xe3o pode ser revertida! Os atendimentos dessa fila continuar\xe3o existindo, mas n\xe3o ter\xe3o mais nenhuma fila atribu\xedda."}},queueSelect:{inputLabel:"Filas"},users:{title:"Usu\xe1rios",table:{name:"Nome",email:"Email",profile:"Perfil",actions:"A\xe7\xf5es"},buttons:{add:"Adicionar usu\xe1rio"},toasts:{deleted:"Usu\xe1rio exclu\xeddo com sucesso."},confirmationModal:{deleteTitle:"Excluir",deleteMessage:"Todos os dados do usu\xe1rio ser\xe3o perdidos. Os atendimento abertos deste usu\xe1rio ser\xe3o movidos para a fila."}},helps:{title:"Central de Ajuda"},schedules:{title:"Agendamentos",confirmationModal:{deleteTitle:"Voc\xea tem certeza que quer excluir este Agendamento?",deleteMessage:"Esta a\xe7\xe3o n\xe3o pode ser revertida."},table:{contact:"Contato",body:"Mensagem",sendAt:"Data de Agendamento",sentAt:"Data de Envio",status:"Status",actions:"A\xe7\xf5es"},buttons:{add:"Novo Agendamento"},toasts:{deleted:"Agendamento exclu\xeddo com sucesso."}},tags:{title:"Tags",confirmationModal:{deleteTitle:"Voc\xea tem certeza que quer excluir esta Tag?",deleteMessage:"Esta a\xe7\xe3o n\xe3o pode ser revertida."},table:{name:"Nome",color:"Cor",tickets:"Registros Tagdos",actions:"A\xe7\xf5es"},buttons:{add:"Nova Tag"},toasts:{deleted:"Tag exclu\xeddo com sucesso."}},settings:{success:"Configura\xe7\xf5es salvas com sucesso.",title:"Configura\xe7\xf5es",settings:{userCreation:{name:"Cria\xe7\xe3o de usu\xe1rio",options:{enabled:"Ativado",disabled:"Desativado"}}}},messagesList:{header:{assignedTo:"Atribu\xeddo \xe0:",buttons:{return:"Retornar",resolve:"Resolver",reopen:"Reabrir",accept:"Aceitar"}}},messagesInput:{placeholderOpen:"Digite uma mensagem",placeholderClosed:"Reabra ou aceite esse ticket para enviar uma mensagem.",signMessage:"Assinar"},contactDrawer:{header:"Dados do contato",buttons:{edit:"Editar contato"},extraInfo:"Outras informa\xe7\xf5es"},ticketOptionsMenu:{schedule:"Agendamento",delete:"Deletar",transfer:"Transferir",registerAppointment:"Observa\xe7\xf5es do Contato",appointmentsModal:{title:"Observa\xe7\xf5es do Contato",textarea:"Observa\xe7\xe3o",placeholder:"Insira aqui a informa\xe7\xe3o que deseja registrar"},confirmationModal:{title:"Deletar o ticket de contato #",titleFrom:"De",message:"Aten\xe7\xe3o! Todas as mensagens relacionadas ao ticket ser\xe3o perdidas."},buttons:{delete:"Excluir",cancel:"Cancelar"}},confirmationModal:{buttons:{confirm:"Ok",cancel:"Cancelar"}},messageOptionsMenu:{delete:"Deletar",reply:"Responder",confirmationModal:{title:"Apagar mensagem?",message:"Esta a\xe7\xe3o n\xe3o pode ser revertida."}},backendErrors:{ERR_NO_OTHER_WHATSAPP:"Deve haver pelo menos um WhatsApp padr\xe3o.",ERR_NO_DEF_WAPP_FOUND:"Nenhum WhatsApp padr\xe3o encontrado. Verifique a p\xe1gina de conex\xf5es.",ERR_WAPP_NOT_INITIALIZED:"Esta sess\xe3o do WhatsApp n\xe3o foi inicializada. Verifique a p\xe1gina de conex\xf5es.",ERR_WAPP_CHECK_CONTACT:"N\xe3o foi poss\xedvel verificar o contato do WhatsApp. Verifique a p\xe1gina de conex\xf5es",ERR_WAPP_INVALID_CONTACT:"Este n\xe3o \xe9 um n\xfamero de Whatsapp v\xe1lido.",ERR_WAPP_DOWNLOAD_MEDIA:"N\xe3o foi poss\xedvel baixar m\xeddia do WhatsApp. Verifique a p\xe1gina de conex\xf5es.",ERR_INVALID_CREDENTIALS:"Erro de autentica\xe7\xe3o. Por favor, tente novamente.",ERR_SENDING_WAPP_MSG:"Erro ao enviar mensagem do WhatsApp. Verifique a p\xe1gina de conex\xf5es.",ERR_DELETE_WAPP_MSG:"N\xe3o foi poss\xedvel excluir a mensagem do WhatsApp.",ERR_OTHER_OPEN_TICKET:"J\xe1 existe um t\xedquete aberto para este contato.",ERR_SESSION_EXPIRED:"Sess\xe3o expirada. Por favor entre.",ERR_USER_CREATION_DISABLED:"A cria\xe7\xe3o do usu\xe1rio foi desabilitada pelo administrador.",ERR_NO_PERMISSION:"Voc\xea n\xe3o tem permiss\xe3o para acessar este recurso.",ERR_DUPLICATED_CONTACT:"J\xe1 existe um contato com este n\xfamero.",ERR_NO_SETTING_FOUND:"Nenhuma configura\xe7\xe3o encontrada com este ID.",ERR_NO_CONTACT_FOUND:"Nenhum contato encontrado com este ID.",ERR_NO_TICKET_FOUND:"Nenhum t\xedquete encontrado com este ID.",ERR_NO_USER_FOUND:"Nenhum usu\xe1rio encontrado com este ID.",ERR_NO_WAPP_FOUND:"Nenhum WhatsApp encontrado com este ID.",ERR_CREATING_MESSAGE:"Erro ao criar mensagem no banco de dados.",ERR_CREATING_TICKET:"Erro ao criar t\xedquete no banco de dados.",ERR_FETCH_WAPP_MSG:"Erro ao buscar a mensagem no WhtasApp, talvez ela seja muito antiga.",ERR_QUEUE_COLOR_ALREADY_EXISTS:"Esta cor j\xe1 est\xe1 em uso, escolha outra.",ERR_WAPP_GREETING_REQUIRED:"A mensagem de sauda\xe7\xe3o \xe9 obrigat\xf3rio quando h\xe1 mais de uma fila."}}}}),{en:{translations:{signup:{title:"Sign up",toasts:{success:"User created successfully! Please login!",fail:"Error creating user. Check the reported data."},form:{name:"Name",email:"Email",password:"Password"},buttons:{submit:"Register",login:"Already have an account? Log in!"}},login:{title:"Login",form:{email:"Email",password:"Password"},buttons:{submit:"Enter",register:"Don't have an account? Register!"}},auth:{toasts:{success:"Login successfully!"}},dashboard:{charts:{perDay:{title:"Tickets today: "}}},connections:{title:"Connections",toasts:{deleted:"WhatsApp connection deleted sucessfully!"},confirmationModal:{deleteTitle:"Delete",deleteMessage:"Are you sure? It cannot be reverted.",disconnectTitle:"Disconnect",disconnectMessage:"Are you sure? You'll need to read QR Code again."},buttons:{add:"Add WhatsApp",disconnect:"Disconnect",tryAgain:"Try Again",qrcode:"QR CODE",newQr:"New QR CODE",connecting:"Connectiing"},toolTips:{disconnected:{title:"Failed to start WhatsApp session",content:"Make sure your cell phone is connected to the internet and try again, or request a new QR Code"},qrcode:{title:"Waiting for QR Code read",content:"Click on 'QR CODE' button and read the QR Code with your cell phone to start session"},connected:{title:"Connection established"},timeout:{title:"Connection with cell phone has been lost",content:"Make sure your cell phone is connected to the internet and WhatsApp is open, or click on 'Disconnect' button to get a new QRcode"}},table:{name:"Name",status:"Status",lastUpdate:"Last Update",default:"Default",actions:"Actions",session:"Session"}},whatsappModal:{title:{add:"Add WhatsApp",edit:"Edit WhatsApp"},form:{name:"Name",default:"Default"},buttons:{okAdd:"Add",okEdit:"Save",cancel:"Cancel"},success:"WhatsApp saved successfully."},qrCode:{message:"Read QrCode to start the session"},contacts:{title:"Contacts",toasts:{deleted:"Contact deleted sucessfully!"},searchPlaceholder:"Search ...",confirmationModal:{deleteTitle:"Delete",importTitlte:"Import contacts",deleteMessage:"Are you sure you want to delete this contact? All related tickets will be lost.",importMessage:"Do you want to import all contacts from the phone?"},buttons:{import:"Import Contacts",add:"Add Contact"},table:{name:"Name",whatsapp:"WhatsApp",email:"Email",actions:"Actions"}},contactModal:{title:{add:"Add contact",edit:"Edit contact"},form:{mainInfo:"Contact details",extraInfo:"Additional information",name:"Name",number:"Whatsapp number",email:"Email",extraName:"Field name",extraValue:"Value"},buttons:{addExtraInfo:"Add information",okAdd:"Add",okEdit:"Save",cancel:"Cancel"},success:"Contact saved successfully."},queueModal:{title:{add:"Add queue",edit:"Edit queue"},form:{name:"Name",color:"Color",greetingMessage:"Greeting Message"},buttons:{okAdd:"Add",okEdit:"Save",cancel:"Cancel"}},userModal:{title:{add:"Add user",edit:"Edit user"},form:{name:"Name",email:"Email",password:"Password",profile:"Profile"},buttons:{okAdd:"Add",okEdit:"Save",cancel:"Cancel"},success:"User saved successfully."},chat:{noTicketMessage:"Select a ticket to start chatting."},ticketsManager:{buttons:{newTicket:"New"}},ticketsQueueSelect:{placeholder:"Queues"},tickets:{toasts:{deleted:"The ticket you were on has been deleted."},notification:{message:"Message from"},tabs:{open:{title:"Inbox"},closed:{title:"Resolved"},search:{title:"Search"}},search:{placeholder:"Search tickets and messages."},buttons:{showAll:"All"}},transferTicketModal:{title:"Transfer Ticket",fieldLabel:"Type to search for users",noOptions:"No user found with this name",buttons:{ok:"Transfer",cancel:"Cancel"}},ticketsList:{pendingHeader:"Queue",assignedHeader:"Working on",noTicketsTitle:"Nothing here!",noTicketsMessage:"No tickets found with this status or search term.",buttons:{accept:"Accept"}},newTicketModal:{title:"Create Ticket",fieldLabel:"Type to search for a contact",add:"Add",buttons:{ok:"Save",cancel:"Cancel"}},mainDrawer:{listItems:{dashboard:"Dashboard",connections:"Connections",tickets:"Tickets",todolist:"to-Do List",contacts:"Contacts",queues:"Queues",administration:"Administration",users:"Users",settings:"Settings"},appBar:{user:{profile:"Profile",logout:"Logout"}}},notifications:{noTickets:"No notifications."},queues:{title:"Queues",table:{name:"Name",color:"Color",greeting:"Greeting message",actions:"Actions"},buttons:{add:"Add queue"},confirmationModal:{deleteTitle:"Delete",deleteMessage:"Are you sure? It cannot be reverted! Tickets in this queue will still exist, but will not have any queues assigned."}},queueSelect:{inputLabel:"Queues"},users:{title:"Users",table:{name:"Name",email:"Email",profile:"Profile",actions:"Actions"},buttons:{add:"Add user"},toasts:{deleted:"User deleted sucessfully."},confirmationModal:{deleteTitle:"Delete",deleteMessage:"All user data will be lost. Users' open tickets will be moved to queue."}},settings:{success:"Settings saved successfully.",title:"Settings",settings:{userCreation:{name:"User creation",options:{enabled:"Enabled",disabled:"Disabled"}}}},messagesList:{header:{assignedTo:"Assigned to:",buttons:{return:"Return",resolve:"Resolve",reopen:"Reopen",accept:"Accept"}}},messagesInput:{placeholderOpen:"Type a message",placeholderClosed:"Reopen or accept this ticket to send a message.",signMessage:"Sign"},contactDrawer:{header:"Contact details",buttons:{edit:"Edit contact"},extraInfo:"Other information"},ticketOptionsMenu:{delete:"Delete",transfer:"Transfer",confirmationModal:{title:"Delete ticket #",titleFrom:"from contact ",message:"Attention! All ticket's related messages will be lost."},buttons:{delete:"Delete",cancel:"Cancel"}},confirmationModal:{buttons:{confirm:"Ok",cancel:"Cancel"}},messageOptionsMenu:{delete:"Delete",reply:"Reply",confirmationModal:{title:"Delete message?",message:"This action cannot be reverted."}},backendErrors:{ERR_NO_OTHER_WHATSAPP:"There must be at lest one default WhatsApp connection.",ERR_NO_DEF_WAPP_FOUND:"No default WhatsApp found. Check connections page.",ERR_WAPP_NOT_INITIALIZED:"This WhatsApp session is not initialized. Check connections page.",ERR_WAPP_CHECK_CONTACT:"Could not check WhatsApp contact. Check connections page.",ERR_WAPP_INVALID_CONTACT:"This is not a valid whatsapp number.",ERR_WAPP_DOWNLOAD_MEDIA:"Could not download media from WhatsApp. Check connections page.",ERR_INVALID_CREDENTIALS:"Authentication error. Please try again.",ERR_SENDING_WAPP_MSG:"Error sending WhatsApp message. Check connections page.",ERR_DELETE_WAPP_MSG:"Couldn't delete message from WhatsApp.",ERR_OTHER_OPEN_TICKET:"There's already an open ticket for this contact.",ERR_SESSION_EXPIRED:"Session expired. Please login.",ERR_USER_CREATION_DISABLED:"User creation was disabled by administrator.",ERR_NO_PERMISSION:"You don't have permission to access this resource.",ERR_DUPLICATED_CONTACT:"A contact with this number already exists.",ERR_NO_SETTING_FOUND:"No setting found with this ID.",ERR_NO_CONTACT_FOUND:"No contact found with this ID.",ERR_NO_TICKET_FOUND:"No ticket found with this ID.",ERR_NO_USER_FOUND:"No user found with this ID.",ERR_NO_WAPP_FOUND:"No WhatsApp found with this ID.",ERR_CREATING_MESSAGE:"Error while creating message on database.",ERR_CREATING_TICKET:"Error while creating ticket on database.",ERR_FETCH_WAPP_MSG:"Error fetching the message in WhtasApp, maybe it is too old.",ERR_QUEUE_COLOR_ALREADY_EXISTS:"This color is already in use, pick another one.",ERR_WAPP_GREETING_REQUIRED:"Greeting message is required if there is more than one queue."}}}}),{es:{translations:{signup:{title:"Registro",toasts:{success:"\xa1El usuario ha sido creado satisfactoriamente! \xa1Ahora inicia sesi\xf3n!",fail:"Error creando el usuario. Verifica la data reportada."},form:{name:"Nombre",email:"Correo Electr\xf3nico",password:"Contrase\xf1a"},buttons:{submit:"Reg\xedstrate",login:"\xbfYa tienes una cuenta? \xa1Inicia sesi\xf3n!"}},login:{title:"Inicio de Sesi\xf3n",form:{email:"Correo Electr\xf3nico",password:"Contrase\xf1a"},buttons:{submit:"Ingresa",register:"\xbfNo tienes cuenta? \xa1Reg\xedstrate!"}},auth:{toasts:{success:"\xa1Inicio de sesi\xf3n exitoso!"}},dashboard:{charts:{perDay:{title:"Tickets hoy: "}}},connections:{title:"Conexiones",toasts:{deleted:"\xa1La conexi\xf3n de WhatsApp ha sido borrada satisfactoriamente!"},confirmationModal:{deleteTitle:"Borrar",deleteMessage:"\xbfEst\xe1s seguro? Este proceso no puede ser revertido.",disconnectTitle:"Desconectar",disconnectMessage:"Est\xe1s seguro? Deber\xe1 volver a leer el c\xf3digo QR"},buttons:{add:"Agrega WhatsApp",disconnect:"Desconectar",tryAgain:"Int\xe9ntalo de nuevo",qrcode:"QR CODE",newQr:"Nuevo QR CODE",connecting:"Conectando"},toolTips:{disconnected:{title:"No se pudo iniciar la sesi\xf3n de WhatsApp",content:"Aseg\xfarese de que su tel\xe9fono celular est\xe9 conectado a Internet y vuelva a intentarlo o solicite un nuevo c\xf3digo QR"},qrcode:{title:"Esperando la lectura del c\xf3digo QR",content:"Haga clic en el bot\xf3n 'C\xd3DIGO QR' y lea el C\xf3digo QR con su tel\xe9fono celular para iniciar la sesi\xf3n"},connected:{title:"Conexi\xf3n establecida"},timeout:{title:"Se perdi\xf3 la conexi\xf3n con el tel\xe9fono celular",content:"Aseg\xfarese de que su tel\xe9fono celular est\xe9 conectado a Internet y que WhatsApp est\xe9 abierto, o haga clic en el bot\xf3n 'Desconectar' para obtener un nuevo c\xf3digo QR"}},table:{name:"Nombre",status:"Estado",lastUpdate:"\xdaltima Actualizaci\xf3n",default:"Por Defecto",actions:"Acciones",session:"Sesi\xf3n"}},whatsappModal:{title:{add:"Agrega WhatsApp",edit:"Edita WhatsApp"},form:{name:"Nombre",default:"Por Defecto"},buttons:{okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar"},success:"WhatsApp guardado satisfactoriamente."},qrCode:{message:"L\xe9e el c\xf3digo QR para empezar la sesi\xf3n."},contacts:{title:"Contactos",toasts:{deleted:"\xa1Contacto borrado satisfactoriamente!"},searchPlaceholder:"Buscar...",confirmationModal:{deleteTitle:"Borrar",importTitlte:"Importar contactos",deleteMessage:"\xbfEst\xe1s seguro que deseas borrar este contacto? Todos los tickets relacionados se perder\xe1n.",importMessage:"\xbfQuieres importar todos los contactos desde tu tel\xe9fono?"},buttons:{import:"Importar Contactos",add:"Agregar Contacto"},table:{name:"Nombre",whatsapp:"WhatsApp",email:"Correo Electr\xf3nico",actions:"Acciones"}},contactModal:{title:{add:"Agregar contacto",edit:"Editar contacto"},form:{mainInfo:"Detalles del contacto",extraInfo:"Informaci\xf3n adicional",name:"Nombre",number:"N\xfamero de Whatsapp",email:"Correo Electr\xf3nico",extraName:"Nombre del Campo",extraValue:"Valor"},buttons:{addExtraInfo:"Agregar informaci\xf3n",okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar"},success:"Contacto guardado satisfactoriamente."},queueModal:{title:{add:"Agregar cola",edit:"Editar cola"},form:{name:"Nombre",color:"Color",greetingMessage:"Mensaje de saludo"},buttons:{okAdd:"A\xf1adir",okEdit:"Ahorrar",cancel:"Cancelar"}},userModal:{title:{add:"Agregar usuario",edit:"Editar usuario"},form:{name:"Nombre",email:"Correo Electr\xf3nico",password:"Contrase\xf1a",profile:"Perfil"},buttons:{okAdd:"Agregar",okEdit:"Guardar",cancel:"Cancelar"},success:"Usuario guardado satisfactoriamente."},chat:{noTicketMessage:"Selecciona un ticket para empezar a chatear."},ticketsManager:{buttons:{newTicket:"Nuevo"}},ticketsQueueSelect:{placeholder:"Linhas"},tickets:{toasts:{deleted:"El ticket en el que estabas ha sido borrado."},notification:{message:"Mensaje de"},tabs:{open:{title:"Bandeja"},closed:{title:"Resueltos"},search:{title:"Buscar"}},search:{placeholder:"Buscar tickets y mensajes."},buttons:{showAll:"Todos"}},transferTicketModal:{title:"Transferir Ticket",fieldLabel:"Escriba para buscar usuarios",noOptions:"No se encontraron usuarios con ese nombre",buttons:{ok:"Transferir",cancel:"Cancelar"}},ticketsList:{pendingHeader:"Cola",assignedHeader:"Trabajando en",noTicketsTitle:"\xa1Nada ac\xe1!",noTicketsMessage:"No se encontraron tickets con este estado o t\xe9rmino de b\xfasqueda",buttons:{accept:"Acceptar"}},newTicketModal:{title:"Crear Ticket",fieldLabel:"Escribe para buscar un contacto",add:"A\xf1adir",buttons:{ok:"Guardar",cancel:"Cancelar"}},mainDrawer:{listItems:{dashboard:"Dashboard",connections:"Conexiones",tickets:"Tickets",todolist:"Tareas",contacts:"Contactos",queues:"Linhas",administration:"Administraci\xf3n",users:"Usuarios",settings:"Configuraci\xf3n"},appBar:{user:{profile:"Perfil",logout:"Cerrar Sesi\xf3n"}}},notifications:{noTickets:"Sin notificaciones."},queues:{title:"Linhas",table:{name:"Nombre",color:"Color",greeting:"Mensaje de saludo",actions:"Comportamiento"},buttons:{add:"Agregar cola"},confirmationModal:{deleteTitle:"Eliminar",deleteMessage:"\xbfEst\xe1s seguro? \xa1Esta acci\xf3n no se puede revertir! Los tickets en esa cola seguir\xe1n existiendo, pero ya no tendr\xe1n ninguna cola asignada."}},queueSelect:{inputLabel:"Linhas"},users:{title:"Usuarios",table:{name:"Nombre",email:"Correo Electr\xf3nico",profile:"Perfil",actions:"Acciones"},buttons:{add:"Agregar usuario"},toasts:{deleted:"Usuario borrado satisfactoriamente."},confirmationModal:{deleteTitle:"Borrar",deleteMessage:"Toda la informaci\xf3n del usuario se perder\xe1. Los tickets abiertos de los usuarios se mover\xe1n a la cola."}},settings:{success:"Configuraci\xf3n guardada satisfactoriamente.",title:"Configuraci\xf3n",settings:{userCreation:{name:"Creaci\xf3n de usuarios",options:{enabled:"Habilitado",disabled:"Deshabilitado"}}}},messagesList:{header:{assignedTo:"Asignado a:",buttons:{return:"Devolver",resolve:"Resolver",reopen:"Reabrir",accept:"Aceptar"}}},messagesInput:{placeholderOpen:"Escribe un mensaje",placeholderClosed:"Vuelva a abrir o acepte este ticket para enviar un mensaje.",signMessage:"Firmar"},contactDrawer:{header:"Detalles del contacto",buttons:{edit:"Editar contacto"},extraInfo:"Otra informaci\xf3n"},ticketOptionsMenu:{delete:"Borrar",transfer:"Transferir",confirmationModal:{title:"\xbfBorrar ticket #",titleFrom:"del contacto ",message:"\xa1Atenci\xf3n! Todos los mensajes Todos los mensajes relacionados con el ticket se perder\xe1n."},buttons:{delete:"Borrar",cancel:"Cancelar"}},confirmationModal:{buttons:{confirm:"Ok",cancel:"Cancelar"}},messageOptionsMenu:{delete:"Borrar",reply:"Responder",confirmationModal:{title:"\xbfBorrar mensaje?",message:"Esta acci\xf3n no puede ser revertida."}},backendErrors:{ERR_NO_OTHER_WHATSAPP:"Debe haber al menos una conexi\xf3n de WhatsApp predeterminada.",ERR_NO_DEF_WAPP_FOUND:"No se encontr\xf3 WhatsApp predeterminado. Verifique la p\xe1gina de conexiones.",ERR_WAPP_NOT_INITIALIZED:"Esta sesi\xf3n de WhatsApp no \u200b\u200best\xe1 inicializada. Verifique la p\xe1gina de conexiones.",ERR_WAPP_CHECK_CONTACT:"No se pudo verificar el contacto de WhatsApp. Verifique la p\xe1gina de conexiones.",ERR_WAPP_INVALID_CONTACT:"Este no es un n\xfamero de whatsapp v\xe1lido.",ERR_WAPP_DOWNLOAD_MEDIA:"No se pudieron descargar los medios de WhatsApp. Verifique la p\xe1gina de conexiones.",ERR_INVALID_CREDENTIALS:"Error de autenticaci\xf3n. Vuelva a intentarlo.",ERR_SENDING_WAPP_MSG:"Error al enviar el mensaje de WhatsApp. Verifique la p\xe1gina de conexiones.",ERR_DELETE_WAPP_MSG:"No se pudo borrar el mensaje de WhatsApp.",ERR_OTHER_OPEN_TICKET:"Ya hay un ticket abierto para este contacto.",ERR_SESSION_EXPIRED:"Sesi\xf3n caducada. Inicie sesi\xf3n.",ERR_USER_CREATION_DISABLED:"La creaci\xf3n de usuarios fue deshabilitada por el administrador.",ERR_NO_PERMISSION:"No tienes permiso para acceder a este recurso.",ERR_DUPLICATED_CONTACT:"Ya existe un contacto con este n\xfamero.",ERR_NO_SETTING_FOUND:"No se encontr\xf3 ninguna configuraci\xf3n con este ID.",ERR_NO_CONTACT_FOUND:"No se encontr\xf3 ning\xfan contacto con este ID.",ERR_NO_TICKET_FOUND:"No se encontr\xf3 ning\xfan ticket con este ID.",ERR_NO_USER_FOUND:"No se encontr\xf3 ning\xfan usuario con este ID.",ERR_NO_WAPP_FOUND:"No se encontr\xf3 WhatsApp con este ID.",ERR_CREATING_MESSAGE:"Error al crear el mensaje en la base de datos.",ERR_CREATING_TICKET:"Error al crear el ticket en la base de datos.",ERR_FETCH_WAPP_MSG:"Error al obtener el mensaje en WhtasApp, tal vez sea demasiado antiguo.",ERR_QUEUE_COLOR_ALREADY_EXISTS:"Este color ya est\xe1 en uso, elija otro.",ERR_WAPP_GREETING_REQUIRED:"El mensaje de saludo es obligatorio cuando hay m\xe1s de una cola."}}}});Me.a.use(Re.a).init({debug:!1,defaultNS:["translations"],fallbackLng:"pt",ns:["translations"],resources:De});var Le=t(20);var Pe=e=>{var a,t;const n=null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error;return n?Me.a.exists("backendErrors.".concat(n))?void b.b.error(Me.a.t("backendErrors.".concat(n)),{toastId:n,autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"light"}):void b.b.error(n,{toastId:n,autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"light"}):Object(Le.isString)(e)?void b.b.error(e):void b.b.error("An error occurred!")},We=t(241),qe=t.n(We);const Fe=qe.a.create({baseURL:"https://api-whaticket.easypanel.osuporte.site",withCredentials:!0}),ze=qe.a.create({baseURL:"https://api-whaticket.easypanel.osuporte.site"});var Be=Fe,Ue=t(613),Ve=t.n(Ue);function He(e){let a=null;return localStorage.getItem("userId")&&(a=localStorage.getItem("userId")),Ve()("https://api-whaticket.easypanel.osuporte.site",{transports:["websocket","polling","flashsocket"],pingTimeout:18e3,pingInterval:18e3,query:Object(Le.isObject)(e)?Object(h.a)(Object(h.a)({},e),{},{userId:a}):{userId:a}})}const Ye=(e,a)=>{if("LOAD_WHATSAPPS"===a.type){return[...a.payload]}if("UPDATE_WHATSAPPS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("UPDATE_SESSION"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n].status=t.status,e[n].updatedAt=t.updatedAt,e[n].qrcode=t.qrcode,e[n].retries=t.retries,[...e]):[...e]}if("DELETE_WHATSAPPS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]};var Ge=()=>{const[e,a]=Object(n.useReducer)(Ye,[]),[t,l]=Object(n.useState)(!0);return Object(n.useEffect)(()=>{l(!0);(async()=>{try{const{data:e}=await Be.get("/whatsapp/?session=0");a({type:"LOAD_WHATSAPPS",payload:e}),l(!1)}catch(e){l(!1),Pe(e)}})()},[]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),t=He({companyId:e});return t.on("company-".concat(e,"-whatsapp"),e=>{"update"===e.action&&a({type:"UPDATE_WHATSAPPS",payload:e.whatsapp})}),t.on("company-".concat(e,"-whatsapp"),e=>{"delete"===e.action&&a({type:"DELETE_WHATSAPPS",payload:e.whatsappId})}),t.on("company-".concat(e,"-whatsappSession"),e=>{"update"===e.action&&a({type:"UPDATE_SESSION",payload:e.session})}),()=>{t.disconnect()}},[]),{whatsApps:e,loading:t}};const _e=Object(n.createContext)(),Qe=e=>{let{children:a}=e;const{loading:t,whatsApps:n}=Ge();return l.a.createElement(_e.Provider,{value:{whatsApps:n,loading:t}},a)};var Ke=t(25),Ze=t.n(Ke);var Je=()=>{const e=Object(E.g)(),[a,t]=Object(n.useState)(!1),[l,r]=Object(n.useState)(!0),[o,c]=Object(n.useState)({});Be.interceptors.request.use(e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer ".concat(JSON.parse(a)),t(!0)),e},e=>{Promise.reject(e)}),Be.interceptors.response.use(e=>e,async e=>{var a,n;const l=e.config;if(403===(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.status)&&!l._retry){l._retry=!0;const{data:e}=await Be.post("/auth/refresh_token");return e&&(localStorage.setItem("token",JSON.stringify(e.token)),Be.defaults.headers.Authorization="Bearer ".concat(e.token)),Be(l)}return 401===(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status)&&(localStorage.removeItem("token"),localStorage.removeItem("companyId"),Be.defaults.headers.Authorization=void 0,t(!1)),Promise.reject(e)}),Object(n.useEffect)(()=>{const e=localStorage.getItem("token");(async()=>{if(e)try{const{data:e}=await Be.post("/auth/refresh_token");Be.defaults.headers.Authorization="Bearer ".concat(e.token),t(!0),c(e.user)}catch(a){Pe(a)}r(!1)})()},[]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=He({companyId:e});return a.on("company-".concat(e,"-user"),e=>{"update"===e.action&&e.user.id===o.id&&c(e.user)}),()=>{a.disconnect()}},[o]);return{isAuth:a,user:o,loading:l,handleLogin:async a=>{r(!0);try{const{data:s}=await Be.post("/auth/login",a),{user:{companyId:m,id:d,company:u}}=s;if(Object(Le.has)(u,"settings")&&Object(Le.isArray)(u.settings)){const e=u.settings.find(e=>"campaignsEnabled"===e.key);e&&"true"===e.value&&localStorage.setItem("cshow",null)}Ze.a.locale("pt-br");const p=s.user.company.dueDate,g=Ze()(Ze()()).format("DD/MM/yyyy"),E=Ze()(p).format("DD/MM/yyyy");var n=Ze()(p).diff(Ze()(Ze()()).format()),l=Ze()(Ze()().format()).isBefore(p),o=Ze.a.duration(n).asDays(),i=E.valueOf()-g.valueOf();console.log("\ud83d\ude80 Console Log : diasVenc",i),!0===l?(localStorage.setItem("token",JSON.stringify(s.token)),localStorage.setItem("companyId",m),localStorage.setItem("userId",d),localStorage.setItem("companyDueDate",E),Be.defaults.headers.Authorization="Bearer ".concat(s.token),c(s.user),t(!0),b.b.success(Me.a.t("auth.toasts.success")),Math.round(o)<5&&b.b.warn("Sua assinatura vence em ".concat(Math.round(o)," ").concat(1===Math.round(o)?"dia":"dias"," ")),e.push("/tickets"),r(!1)):(console.log("BLOQUEADO"),Pe("Opss! Sua assinatura venceu ".concat(E,".\nEntre em contato com o Suporte para mais informa\xe7\xf5es! ")),r(!1))}catch(s){Pe(s),r(!1)}},handleLogout:async()=>{r(!0);try{await Be.delete("/auth/logout"),t(!1),c({}),localStorage.removeItem("token"),localStorage.removeItem("companyId"),localStorage.removeItem("userId"),localStorage.removeItem("cshow"),Be.defaults.headers.Authorization=void 0,r(!1),e.push("/login")}catch(a){Pe(a),r(!1)}},getCurrentUserInfo:async()=>{try{const{data:e}=await Be.get("/auth/me");return e}catch(e){Pe(e)}}}};const Xe=Object(n.createContext)(),$e=e=>{let{children:a}=e;const{loading:t,user:n,isAuth:r,handleLogin:o,handleLogout:c}=Je();return l.a.createElement(Xe.Provider,{value:{loading:t,user:n,isAuth:r,handleLogin:o,handleLogout:c}},a)};var ea={user:{static:[]},admin:{static:["dashboard:view","drawer-admin-items:view","tickets-manager:showall","user-modal:editProfile","user-modal:editQueues","ticket-options:deleteTicket","contacts-page:deleteContact","connections-page:actionButtons","connections-page:addConnection","connections-page:editOrDeleteConnection"]}};const aa=e=>{let{role:a,perform:t,data:n,yes:l,no:r}=e;return((e,a,t)=>{const n=ea[e];if(!n)return!1;const l=n.static;if(l&&l.includes(a))return!0;const r=n.dynamic;if(r){const e=r[a];return!!e&&e(t)}return!1})(a,t,n)?l():r()};function ta(e){const{icon:a,primary:t,to:n,className:r}=e,o=l.a.useMemo(()=>l.a.forwardRef((e,a)=>l.a.createElement(g.b,Object.assign({to:n,ref:a},e))),[n]);return l.a.createElement("li",null,l.a.createElement(P.a,{button:!0,component:o,className:r},a?l.a.createElement(W.a,null,a):null,l.a.createElement(q.a,{primary:t})))}aa.defaultProps={yes:()=>null,no:()=>null};const na=(e,a)=>{if("LOAD_CHATS"===a.type){const t=a.payload,n=[];return Object(Le.isArray)(t)&&t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_CHATS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_CHAT"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[];if("CHANGE_CHAT"===a.type){return e.map(e=>e.id===a.payload.chat.id?a.payload.chat:e)}};var la=e=>{const{drawerClose:a}=e,{whatsApps:t}=Object(n.useContext)(_e),{user:r}=Object(n.useContext)(Xe),[o,c]=Object(n.useState)(!1),[i,s]=Object(n.useState)(!1),[m,d]=Object(n.useState)(!1),u=Object(E.g)(),[p,g]=Object(n.useState)(!0),[b,h]=Object(n.useState)(1),[f]=Object(n.useState)(""),[y,v]=Object(n.useReducer)(na,[]),[O,C]=Object(n.useState)(!1);Object(n.useEffect)(()=>{v({type:"RESET"}),h(1)},[f]),Object(n.useEffect)(()=>{const e=setTimeout(()=>{j()},500);return()=>clearTimeout(e)},[f,b]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=He({companyId:e});return a.on("company-".concat(e,"-chat"),e=>{"new-message"===e.action&&v({type:"CHANGE_CHAT",payload:e}),"update"===e.action&&v({type:"CHANGE_CHAT",payload:e})}),()=>{a.disconnect()}},[]),Object(n.useEffect)(()=>{let e=0;if(y.length>0)for(let a of y)for(let t of a.users)t.userId===r.id&&(e+=t.unreads);g(!(e>0))},[y,r.id]),Object(n.useEffect)(()=>{localStorage.getItem("cshow")&&d(!0)},[]),Object(n.useEffect)(()=>{const e=setTimeout(()=>{if(t.length>0){t.filter(e=>"qrcode"===e.status||"PAIRING"===e.status||"DISCONNECTED"===e.status||"TIMEOUT"===e.status||"OPENING"===e.status).length>0?c(!0):c(!1)}},2e3);return()=>clearTimeout(e)},[t]);const j=async()=>{try{const{data:e}=await Be.get("/chats/",{params:{searchParam:f,pageNumber:b}});v({type:"LOAD_CHATS",payload:e.records})}catch(e){Pe(e)}};return l.a.createElement("div",{onClick:a},l.a.createElement(aa,{role:r.profile,perform:"dashboard:view",yes:()=>l.a.createElement(ta,{to:"/",primary:"Dashboard",icon:l.a.createElement(Ee.a,null)})}),l.a.createElement(ta,{to:"/tickets",primary:Me.a.t("mainDrawer.listItems.tickets"),icon:l.a.createElement(V.a,null)}),l.a.createElement(ta,{to:"/todolist",primary:Me.a.t("mainDrawer.listItems.todolist"),icon:l.a.createElement(J.a,null)}),l.a.createElement(P.a,{button:!0,onClick:()=>C(e=>!e)},l.a.createElement(W.a,null,l.a.createElement(ie.a,null)),l.a.createElement(q.a,{primary:Me.a.t("mainDrawer.listItems.kanban")}),O?l.a.createElement(ae.a,null):l.a.createElement(ne.a,null)),l.a.createElement(z.a,{style:{paddingLeft:15},in:O,timeout:"auto",unmountOnExit:!0},l.a.createElement(S.a,{component:"div",disablePadding:!0},l.a.createElement(P.a,{onClick:()=>u.push("/kanban"),button:!0},l.a.createElement(W.a,null,l.a.createElement(ce.a,null)),l.a.createElement(q.a,{primary:Me.a.t("kanban.subMenus.list")})),l.a.createElement(P.a,{onClick:()=>u.push("/tagsKanban"),button:!0},l.a.createElement(W.a,null,l.a.createElement(se.a,null)),l.a.createElement(q.a,{primary:Me.a.t("kanban.subMenus.tags")})))),l.a.createElement(ta,{to:"/quick-messages",primary:Me.a.t("mainDrawer.listItems.quickMessages"),icon:l.a.createElement(Ne.a,null)}),l.a.createElement(ta,{to:"/contacts",primary:Me.a.t("mainDrawer.listItems.contacts"),icon:l.a.createElement(he.a,null)}),l.a.createElement(ta,{to:"/schedules",primary:Me.a.t("mainDrawer.listItems.schedules"),icon:l.a.createElement(pe.a,null)}),l.a.createElement(ta,{to:"/tags",primary:Me.a.t("mainDrawer.listItems.tags"),icon:l.a.createElement(de.a,null)}),l.a.createElement(ta,{to:"/chats",primary:Me.a.t("mainDrawer.listItems.chats"),icon:l.a.createElement(B.a,{color:"secondary",variant:"dot",invisible:p},l.a.createElement(xe.a,null))}),l.a.createElement(ta,{to:"/helps",primary:Me.a.t("mainDrawer.listItems.helps"),icon:l.a.createElement(Oe.a,null)}),l.a.createElement(aa,{role:r.profile,perform:"drawer-admin-items:view",yes:()=>l.a.createElement(l.a.Fragment,null,l.a.createElement(x.a,null),l.a.createElement(F.a,{inset:!0},Me.a.t("mainDrawer.listItems.administration")),m&&l.a.createElement(l.a.Fragment,null,l.a.createElement(P.a,{button:!0,onClick:()=>s(e=>!e)},l.a.createElement(W.a,null,l.a.createElement($.a,null)),l.a.createElement(q.a,{primary:Me.a.t("mainDrawer.listItems.campaigns")}),i?l.a.createElement(ae.a,null):l.a.createElement(ne.a,null)),l.a.createElement(z.a,{style:{paddingLeft:15},in:i,timeout:"auto",unmountOnExit:!0},l.a.createElement(S.a,{component:"div",disablePadding:!0},l.a.createElement(P.a,{onClick:()=>u.push("/campaigns"),button:!0},l.a.createElement(W.a,null,l.a.createElement(ce.a,null)),l.a.createElement(q.a,{primary:"Listagem"})),l.a.createElement(P.a,{onClick:()=>u.push("/contact-lists"),button:!0},l.a.createElement(W.a,null,l.a.createElement(re.a,null)),l.a.createElement(q.a,{primary:"Listas de Contatos"})),l.a.createElement(P.a,{onClick:()=>u.push("/campaigns-config"),button:!0},l.a.createElement(W.a,null,l.a.createElement(Y.a,null)),l.a.createElement(q.a,{primary:"Configura\xe7\xf5es"}))))),r.super&&l.a.createElement(ta,{to:"/announcements",primary:Me.a.t("mainDrawer.listItems.annoucements"),icon:l.a.createElement(Ie.a,null)}),l.a.createElement(ta,{to:"/connections",primary:Me.a.t("mainDrawer.listItems.connections"),icon:l.a.createElement(B.a,{badgeContent:o?"!":0,color:"error"},l.a.createElement(ye.a,null))}),l.a.createElement(ta,{to:"/queues",primary:Me.a.t("mainDrawer.listItems.queues"),icon:l.a.createElement(we.a,null)}),l.a.createElement(ta,{to:"/users",primary:Me.a.t("mainDrawer.listItems.users"),icon:l.a.createElement(_.a,null)}),l.a.createElement(ta,{to:"/messages-api",primary:Me.a.t("mainDrawer.listItems.messagesAPI"),icon:l.a.createElement(K.a,null)}),l.a.createElement(ta,{to:"/financeiro",primary:Me.a.t("mainDrawer.listItems.financeiro"),icon:l.a.createElement(je.a,null)}),l.a.createElement(ta,{to:"/settings",primary:Me.a.t("mainDrawer.listItems.settings"),icon:l.a.createElement(Y.a,null)}))}))},ra=t(705),oa=t(326),ca=t(1188),ia=t(330),sa=t.n(ia),ma=t(630),da=t(631),ua=t(366),pa=t(1187),ga=t(1260),Ea=t(77),ba=t(1184),ha=t(1185);const fa=["loading","children"],ya=Object(y.a)(e=>({button:{position:"relative"},buttonProgress:{color:ua.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}));var va=e=>{let{loading:a,children:t}=e,n=Object(Ea.a)(e,fa);const r=ya();return l.a.createElement(ba.a,Object.assign({className:r.button,disabled:a},n),t,a&&l.a.createElement(ha.a,{size:24,className:r.buttonProgress}))},Oa=t(628);const Ca=["children"],xa=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Sa=["a","b","strong","em","u","code","del"],ja=e=>{let{children:a}=e,t=Object(Ea.a)(e,Ca);return l.a.createElement("a",Object.assign({},t,{target:"_blank",rel:"noopener noreferrer"}),a)};var ka=e=>{let{children:a}=e;const t=/\*(.*?)\*/g,n=/~(.*?)~/g;a&&t.test(a)&&(a=a.replace(t,"**$1**")),a&&n.test(a)&&(a=a.replace(n,"~~$1~~"));const r=l.a.useMemo(()=>{const e={disableParsingRawHTML:!0,forceInline:!0,overrides:{a:{component:ja}}};return xa.forEach(a=>{Sa.includes(a)||(e.overrides[a]=e=>e.children||null)}),e},[]);return a?l.a.createElement(Oa.a,{options:r},a):null},wa=t(1186);const Ta=Object(y.a)(e=>({ticket:{position:"relative"},pendingTicket:{cursor:"unset"},noTicketsDiv:{display:"flex",height:"100px",margin:40,flexDirection:"column",alignItems:"center",justifyContent:"center"},noTicketsText:{textAlign:"center",color:"rgb(104, 121, 146)",fontSize:"14px",lineHeight:"1.4"},noTicketsTitle:{textAlign:"center",fontSize:"16px",fontWeight:"600",margin:"0px"},contactNameWrapper:{display:"flex",justifyContent:"space-between"},lastMessageTime:{justifySelf:"flex-end"},closedBadge:{alignSelf:"center",justifySelf:"flex-end",marginRight:32,marginLeft:"auto"},contactLastMessage:{paddingRight:20},newMessagesCount:{alignSelf:"center",marginRight:8,marginLeft:"auto"},badgeStyle:{color:"white",backgroundColor:ua.a[500]},acceptButton:{position:"absolute",left:"50%"},ticketQueueColor:{flex:"none",width:"8px",height:"100%",position:"absolute",top:"0%",left:"0%"}}));var Ia=e=>{var a,t,r;let{ticket:o}=e;const c=Ta(),i=Object(E.g)(),[s,m]=Object(n.useState)(!1),{ticketId:d}=Object(E.h)(),u=Object(n.useRef)(!0),{user:p}=Object(n.useContext)(Xe);Object(n.useEffect)(()=>()=>{u.current=!1},[]);return l.a.createElement(l.a.Fragment,{key:o.id},l.a.createElement(P.a,{dense:!0,button:!0,onClick:e=>{"pending"!==o.status&&(e=>{i.push("/tickets/".concat(e.uuid))})(o)},selected:d&&+d===o.id,className:Object(f.a)(c.ticket,{[c.pendingTicket]:"pending"===o.status})},l.a.createElement(wa.a,{arrow:!0,placement:"right",title:(null===(a=o.queue)||void 0===a?void 0:a.name)||"Sem fila"},l.a.createElement("span",{style:{backgroundColor:(null===(t=o.queue)||void 0===t?void 0:t.color)||"#7C7C7C"},className:c.ticketQueueColor})),l.a.createElement(pa.a,null,l.a.createElement(ga.a,{src:null===o||void 0===o||null===(r=o.contact)||void 0===r?void 0:r.profilePicUrl})),l.a.createElement(q.a,{disableTypography:!0,primary:l.a.createElement("span",{className:c.contactNameWrapper},l.a.createElement(w.a,{noWrap:!0,component:"span",variant:"body2",color:"textPrimary"},o.contact.name),"closed"===o.status&&l.a.createElement(B.a,{className:c.closedBadge,badgeContent:"closed",color:"primary"}),o.lastMessage&&l.a.createElement(w.a,{className:c.lastMessageTime,component:"span",variant:"body2",color:"textSecondary"},Object(ma.a)(Object(da.a)(o.updatedAt),new Date)?l.a.createElement(l.a.Fragment,null,Object(ra.a)(Object(da.a)(o.updatedAt),"HH:mm")):l.a.createElement(l.a.Fragment,null,Object(ra.a)(Object(da.a)(o.updatedAt),"dd/MM/yyyy")))),secondary:l.a.createElement("span",{className:c.contactNameWrapper},l.a.createElement(w.a,{className:c.contactLastMessage,noWrap:!0,component:"span",variant:"body2",color:"textSecondary"},o.lastMessage?l.a.createElement(ka,null,o.lastMessage):l.a.createElement("br",null)),l.a.createElement(B.a,{className:c.newMessagesCount,badgeContent:o.unreadMessages,classes:{badge:c.badgeStyle}}))}),"pending"===o.status&&l.a.createElement(va,{color:"primary",variant:"contained",className:c.acceptButton,size:"small",loading:s,onClick:e=>(async e=>{m(!0);try{await Be.put("/tickets/".concat(e.id),{status:"open",userId:null===p||void 0===p?void 0:p.id})}catch(a){m(!1),Pe(a)}u.current&&m(!1),i.push("/tickets/".concat(e.uuid))})(o)},Me.a.t("ticketsList.buttons.accept"))),l.a.createElement(x.a,{variant:"inset",component:"li"}))};var Aa=e=>{let{searchParam:a,tags:t,users:l,pageNumber:r,status:o,date:c,updatedAt:i,showAll:s,queueIds:m,withUnreadMessages:d}=e;const[u,p]=Object(n.useState)(!0),[g,E]=Object(n.useState)(!1),[b,h]=Object(n.useState)([]);return Object(n.useEffect)(()=>{p(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await Be.get("/tickets",{params:{searchParam:a,pageNumber:r,tags:t,users:l,status:o,date:c,updatedAt:i,showAll:s,queueIds:m,withUnreadMessages:d}});h(e.tickets),E(e.hasMore),p(!1)}catch(e){p(!1),Pe(e)}})()},500);return()=>clearTimeout(e)},[a,t,l,r,o,c,i,s,m,d]),{tickets:b,loading:u,hasMore:g}},Na=t(632),Ma=t.n(Na);const Ra=Object(y.a)(e=>({tabContainer:Object(h.a)({overflowY:"auto",maxHeight:350},e.scrollbarStyles),popoverPaper:{width:"100%",maxWidth:350,marginLeft:e.spacing(2),marginRight:e.spacing(1),[e.breakpoints.down("sm")]:{maxWidth:270}},noShadow:{boxShadow:"none !important"}}));var Da=()=>{const e=Ra(),a=Object(E.g)(),{user:t}=Object(n.useContext)(Xe),r=+a.location.pathname.split("/")[2],o=Object(n.useRef)(r),c=Object(n.useRef)(),[i,s]=Object(n.useState)(!1),[m,d]=Object(n.useState)([]),{profile:u,queues:p}=t,[,g]=Object(n.useState)([]),{tickets:b}=Aa({withUnreadMessages:"true"}),[h]=Object(oa.a)(Ma.a),f=Object(n.useRef)(),y=Object(n.useRef)(a);Object(n.useEffect)(()=>{f.current=h,"Notification"in window?Notification.requestPermission():console.log("This browser doesn't support notifications")},[h]),Object(n.useEffect)(()=>{d(b)},[b]),Object(n.useEffect)(()=>{o.current=r},[r]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=He({companyId:e});p.map(e=>e.id);return a.on("connect",()=>a.emit("joinNotification")),a.on("company-".concat(e,"-ticket"),e=>{"updateUnread"!==e.action&&"delete"!==e.action||(d(a=>{const t=a.findIndex(a=>a.id===e.ticketId);return-1!==t?(a.splice(t,1),[...a]):a}),g(a=>{const t=a.findIndex(a=>a.tag===String(e.ticketId));return-1!==t?(a[t].close(),a.splice(t,1),[...a]):a}))}),a.on("company-".concat(e,"-appMessage"),e=>{if("create"===e.action&&!e.message.read&&(e.ticket.userId===(null===t||void 0===t?void 0:t.id)||!e.ticket.userId)){d(a=>{const t=a.findIndex(a=>a.id===e.ticket.id);return-1!==t?(a[t]=e.ticket,[...a]):[e.ticket,...a]});if(e.message.ticketId===o.current&&"visible"===document.visibilityState||e.ticket.userId&&e.ticket.userId!==(null===t||void 0===t?void 0:t.id)||e.ticket.isGroup)return;v(e)}}),()=>{a.disconnect()}},[t,u,p]);const v=e=>{const{message:a,contact:t,ticket:n}=e,l={body:"".concat(a.body," - ").concat(Object(ra.a)(new Date,"HH:mm")),icon:t.profilePicUrl,tag:n.id,renotify:!0},r=new Notification("".concat(Me.a.t("tickets.notification.message")," ").concat(t.name),l);r.onclick=e=>{e.preventDefault(),window.focus(),y.current.push("/tickets/".concat(n.uuid))},g(e=>{const a=e.findIndex(e=>e.tag===r.tag);return-1!==a?(e[a]=r,[...e]):[r,...e]}),f.current()},O=()=>{s(!1)},x=e=>{let{children:a}=e;return l.a.createElement("div",{onClick:O},a)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{onClick:()=>{s(e=>!e)},ref:c,"aria-label":"Mostrar Notifica\xe7\xf5es",variant:"contained"},l.a.createElement(sa.a,null)),l.a.createElement(ca.a,{disableScrollLock:!0,open:i,anchorEl:c.current,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},classes:{paper:e.popoverPaper},onClose:O},l.a.createElement(S.a,{dense:!0,className:e.tabContainer},0===m.length?l.a.createElement(P.a,null,l.a.createElement(q.a,null,Me.a.t("notifications.noTickets"))):m.map(e=>l.a.createElement(x,{key:e.id},l.a.createElement(Ia,{ticket:e}))))))},La=t(26),Pa=t(9),Wa=t(1193),qa=t(1190),Fa=t(1194),za=t(1192),Ba=t(1191),Ua=t(1110),Va=t(1112),Ha=t(1104),Ya=t(1261);const Ga=Object(y.a)(e=>({chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2}}));var _a=e=>{let{selectedQueueIds:a,onChange:t}=e;const r=Ga(),[o,c]=Object(n.useState)([]);Object(n.useEffect)(()=>{(async()=>{try{const{data:e}=await Be.get("/queue");c(e)}catch(e){Pe(e)}})()},[]);return l.a.createElement("div",{style:{marginTop:6}},l.a.createElement(Ha.a,{fullWidth:!0,margin:"dense",variant:"outlined"},l.a.createElement(Va.a,null,Me.a.t("queueSelect.inputLabel")),l.a.createElement(Ua.a,{multiple:!0,labelWidth:60,value:a,onChange:e=>{t(e.target.value)},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},renderValue:e=>l.a.createElement("div",{className:r.chips},(null===e||void 0===e?void 0:e.length)>0&&e.map(e=>{const a=o.find(a=>a.id===e);return a?l.a.createElement(Ya.a,{key:e,style:{backgroundColor:a.color},variant:"outlined",label:a.name,className:r.chip}):null}))},o.map(e=>l.a.createElement(I.a,{key:e.id,value:e.id},e.name)))))};const Qa=Object(y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:ua.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120}})),Ka=La.b().shape({name:La.c().min(2,"Too Short!").max(50,"Too Long!").required("Required"),password:La.c().min(5,"Too Short!").max(50,"Too Long!"),email:La.c().email("Invalid email").required("Required")});var Za=e=>{let{open:a,onClose:t,userId:r}=e;const o=Qa(),c={name:"",email:"",password:"",profile:"user"},{user:i}=Object(n.useContext)(Xe),[s,m]=Object(n.useState)(c),[d,u]=Object(n.useState)([]);Object(n.useEffect)(()=>{(async()=>{if(r)try{var e;const{data:a}=await Be.get("/users/".concat(r));m(e=>Object(h.a)(Object(h.a)({},e),a));const t=null===(e=a.queues)||void 0===e?void 0:e.map(e=>e.id);u(t)}catch(a){Pe(a)}})()},[r,a]);const p=()=>{t(),m(c)};return l.a.createElement("div",{className:o.root},l.a.createElement(qa.a,{open:a,onClose:p,maxWidth:"xs",fullWidth:!0,scroll:"paper"},l.a.createElement(Ba.a,{id:"form-dialog-title"},"".concat(r?Me.a.t("userModal.title.edit"):Me.a.t("userModal.title.add"))),l.a.createElement(Pa.e,{initialValues:s,enableReinitialize:!0,validationSchema:Ka,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a=Object(h.a)(Object(h.a)({},e),{},{queueIds:d});try{r?await Be.put("/users/".concat(r),a):await Be.post("/users",a),b.b.success(Me.a.t("userModal.success"))}catch(t){Pe(t)}p()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n}=e;return l.a.createElement(Pa.d,null,l.a.createElement(za.a,{dividers:!0},l.a.createElement("div",{className:o.multFieldLine},l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("userModal.form.name"),autoFocus:!0,name:"name",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:"outlined",margin:"dense",fullWidth:!0}),l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("userModal.form.password"),type:"password",name:"password",error:a.password&&Boolean(t.password),helperText:a.password&&t.password,variant:"outlined",margin:"dense",fullWidth:!0})),l.a.createElement("div",{className:o.multFieldLine},l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("userModal.form.email"),name:"email",error:a.email&&Boolean(t.email),helperText:a.email&&t.email,variant:"outlined",margin:"dense",fullWidth:!0}),l.a.createElement(Ha.a,{variant:"outlined",className:o.formControl,margin:"dense"},l.a.createElement(aa,{role:i.profile,perform:"user-modal:editProfile",yes:()=>l.a.createElement(l.a.Fragment,null,l.a.createElement(Va.a,{id:"profile-selection-input-label"},Me.a.t("userModal.form.profile")),l.a.createElement(Pa.b,{as:Ua.a,label:Me.a.t("userModal.form.profile"),name:"profile",labelId:"profile-selection-label",id:"profile-selection",required:!0},l.a.createElement(I.a,{value:"admin"},"Admin"),l.a.createElement(I.a,{value:"user"},"User")))}))),l.a.createElement(aa,{role:i.profile,perform:"user-modal:editQueues",yes:()=>l.a.createElement(_a,{selectedQueueIds:d,onChange:e=>u(e)})})),l.a.createElement(Fa.a,null,l.a.createElement(ba.a,{onClick:p,color:"secondary",disabled:n,variant:"outlined"},Me.a.t("userModal.buttons.cancel")),l.a.createElement(ba.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:o.btnWrapper},"".concat(r?Me.a.t("userModal.buttons.okEdit"):Me.a.t("userModal.buttons.okAdd")),n&&l.a.createElement(ha.a,{size:24,className:o.buttonProgress}))))})))},Ja=t(1107);const Xa=Object(y.a)(e=>({backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}));var $a=()=>{const e=Xa();return l.a.createElement(Ja.a,{className:e.backdrop,open:!0},l.a.createElement(ha.a,{color:"inherit"}))};function et(){return{dateToClient:function(e){return Ze()(e).isValid()?Ze()(e).format("DD/MM/YYYY"):e},datetimeToClient:function(e){return Ze()(e).isValid()?Ze()(e).format("DD/MM/YYYY HH:mm"):e},dateToDatabase:function(e){return Ze()(e,"DD/MM/YYYY").isValid()?Ze()(e).format("YYYY-MM-DD HH:mm:ss"):e}}}var at=t(637),tt=t.n(at),nt=t(1195),lt=t(370);const rt=Object(y.a)(e=>({mainPaper:Object(h.a)({flex:1,maxHeight:300,maxWidth:500,padding:e.spacing(1),overflowY:"scroll"},e.scrollbarStyles)}));function ot(e){let{announcement:a,open:t,handleClose:n}=e;return l.a.createElement(qa.a,{open:t,onClose:()=>n(),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(Ba.a,{id:"alert-dialog-title"},a.title),l.a.createElement(za.a,null,a.mediaPath&&l.a.createElement("div",{style:{margin:"0 auto 20px",textAlign:"center",width:550,height:300,backgroundImage:"url(".concat((r=a.mediaPath,"".concat("https://api-whaticket.easypanel.osuporte.site","/public/").concat(r)),")"),backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center"}}),l.a.createElement(nt.a,{id:"alert-dialog-description"},a.text)),l.a.createElement(Fa.a,null,l.a.createElement(ba.a,{onClick:()=>n(),color:"primary",autoFocus:!0},"Fechar")));var r}const ct=(e,a)=>{if("LOAD_ANNOUNCEMENTS"===a.type){const t=a.payload,n=[];return Object(Le.isArray)(t)&&t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_ANNOUNCEMENTS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_ANNOUNCEMENT"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]};function it(){const e=rt(),[a,t]=Object(n.useState)(!1),[r,o]=Object(n.useState)(null),[c,i]=Object(n.useState)(1),[s,m]=Object(n.useState)(!1),[d]=Object(n.useState)(""),[u,p]=Object(n.useReducer)(ct,[]),[g,E]=Object(n.useState)(!1),[b,h]=Object(n.useState)({}),[f,y]=Object(n.useState)(!1);Object(n.useEffect)(()=>{p({type:"RESET"}),i(1)},[d]),Object(n.useEffect)(()=>{t(!0);const e=setTimeout(()=>{v()},500);return()=>clearTimeout(e)},[d,c]),Object(n.useEffect)(()=>{const e=He({companyId:localStorage.getItem("companyId")});return e.on("company-announcement",e=>{"update"!==e.action&&"create"!==e.action||(p({type:"UPDATE_ANNOUNCEMENTS",payload:e.record}),E(!1)),"delete"===e.action&&p({type:"DELETE_ANNOUNCEMENT",payload:+e.id})}),()=>{e.disconnect()}},[]);const v=async()=>{try{const{data:e}=await Be.get("/announcements/",{params:{searchParam:d,pageNumber:c}});p({type:"LOAD_ANNOUNCEMENTS",payload:e.records}),m(e.hasMore),t(!1)}catch(e){Pe(e)}},O=Boolean(r),x=O?"simple-popover":void 0;return l.a.createElement("div",null,l.a.createElement(ot,{announcement:b,open:f,handleClose:()=>y(!1)}),l.a.createElement(C.a,{variant:"contained","aria-describedby":x,onClick:e=>{o(e.currentTarget),E(!0)}},l.a.createElement(B.a,{color:"secondary",variant:"dot",invisible:g||u.length<1},l.a.createElement(tt.a,null))),l.a.createElement(ca.a,{id:x,open:O,anchorEl:r,onClose:()=>{o(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},l.a.createElement(lt.a,{variant:"outlined",onScroll:e=>{if(!s||a)return;const{scrollTop:t,scrollHeight:n,clientHeight:l}=e.currentTarget;n-(t+100)<l&&i(e=>e+1)},className:e.mainPaper},l.a.createElement(S.a,{component:"nav","aria-label":"main mailbox folders",style:{minWidth:300}},Object(Le.isArray)(u)&&u.map((e,a)=>{return l.a.createElement(P.a,{key:a,style:{background:a%2===0?"#0094bb":"white",border:"1px solid #eee",borderLeft:(n=e.priority,1===n?"4px solid #b81111":2===n?"4px solid orange":3===n?"4px solid grey":void 0),cursor:"pointer"},onClick:()=>(h(e),y(!0),void o(null))},e.mediaPath&&l.a.createElement(pa.a,null,l.a.createElement(ga.a,{alt:e.mediaName,src:(t=e.mediaPath,"".concat("https://api-whaticket.easypanel.osuporte.site","/public/").concat(t))})),l.a.createElement(q.a,{primary:e.title,secondary:l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{component:"span",style:{fontSize:12}},Ze()(e.createdAt).format("DD/MM/YYYY")),l.a.createElement("span",{style:{marginTop:5,display:"block"}}),l.a.createElement(w.a,{component:"span",variant:"body2"},e.text))}));var t,n}),Object(Le.isArray)(u)&&0===u.length&&l.a.createElement(q.a,{primary:"Nenhum registro"})))))}var st=t(638),mt=t.n(st),dt=t(431),ut=t.n(dt),pt=t(639),gt=t.n(pt);const Et=Object(y.a)(e=>({mainPaper:Object(h.a)({flex:1,maxHeight:300,maxWidth:500,padding:e.spacing(1),overflowY:"scroll"},e.scrollbarStyles)})),bt=(e,a)=>{if("LOAD_CHATS"===a.type){const t=a.payload,n=[];return Object(Le.isArray)(t)&&t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_CHATS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_CHAT"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[];if("CHANGE_CHAT"===a.type){return e.map(e=>e.id===a.payload.chat.id?a.payload.chat:e)}};function ht(){const e=Et(),{user:a}=Object(n.useContext)(Xe),[t,r]=Object(n.useState)(!1),[o,c]=Object(n.useState)(null),[i,s]=Object(n.useState)(1),[m,d]=Object(n.useState)(!1),[u]=Object(n.useState)(""),[p,g]=Object(n.useReducer)(bt,[]),[E,b]=Object(n.useState)(!0),{datetimeToClient:h}=et(),[f]=Object(oa.a)(gt.a),y=Object(n.useRef)();Object(n.useEffect)(()=>{y.current=f,"Notification"in window?Notification.requestPermission():console.log("This browser doesn't support notifications")},[f]),Object(n.useEffect)(()=>{g({type:"RESET"}),s(1)},[u]),Object(n.useEffect)(()=>{r(!0);const e=setTimeout(()=>{v()},500);return()=>clearTimeout(e)},[u,i]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),t=He({companyId:e});return t.on("company-".concat(e,"-chat"),e=>{"new-message"===e.action&&(g({type:"CHANGE_CHAT",payload:e}),e.newMessage.senderId!==a.id&&(console.log(e),y.current())),"update"===e.action&&g({type:"CHANGE_CHAT",payload:e})}),()=>{t.disconnect()}},[]),Object(n.useEffect)(()=>{let e=0;if(p.length>0)for(let t of p)for(let n of t.users)n.userId===a.id&&(e+=n.unreads);b(!(e>0))},[p,a.id]);const v=async()=>{try{const{data:e}=await Be.get("/chats/",{params:{searchParam:u,pageNumber:i}});g({type:"LOAD_CHATS",payload:e.records}),d(e.hasMore),r(!1)}catch(e){Pe(e)}},O=Boolean(o),x=O?"simple-popover":void 0;return l.a.createElement("div",null,l.a.createElement(C.a,{"aria-describedby":x,variant:"contained",color:E?"default":"inherit",onClick:e=>{c(e.currentTarget),b(!0)}},l.a.createElement(B.a,{color:"secondary",variant:"dot",invisible:E},l.a.createElement(ut.a,null))),l.a.createElement(ca.a,{id:x,open:O,anchorEl:o,onClose:()=>{c(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},l.a.createElement(lt.a,{variant:"outlined",onScroll:e=>{if(!m||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:l}=e.currentTarget;n-(a+100)<l&&s(e=>e+1)},className:e.mainPaper},l.a.createElement(S.a,{component:"nav","aria-label":"main mailbox folders",style:{minWidth:300}},Object(Le.isArray)(p)&&p.map((e,a)=>l.a.createElement(P.a,{key:a,style:{background:a%2===0?"#cc991b":"white",border:"1px solid #eee",cursor:"pointer"},onClick:()=>{return a=e,void(window.location.href="/chats/".concat(a.uuid));var a},button:!0},l.a.createElement(q.a,{primary:e.lastMessage,secondary:l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{component:"span",style:{fontSize:12}},h(e.updatedAt)),l.a.createElement("span",{style:{marginTop:5,display:"block"}}))}))),Object(Le.isArray)(p)&&0===p.length&&l.a.createElement(q.a,{primary:"Nenhum registro"})))))}var ft=t(444),yt=t(643),vt=t.n(yt),Ot=t(642),Ct=t.n(Ot);const xt=Object(y.a)(e=>({root:{display:"flex",height:"100vh",[e.breakpoints.down("sm")]:{height:"calc(100vh - 56px)"},backgroundColor:e.palette.fancyBackground,"& .MuiButton-outlinedPrimary":{color:"light"===e.mode?"#007aff":"#FFF",border:"light"===e.mode?"1px solid rgba(0 124 102)":"1px solid rgba(255, 255, 255, 0.5)"},"& .MuiTab-textColorPrimary.Mui-selected":{color:"light"===e.mode?"#007aff":"#FFF"}},toolbar:{paddingRight:24,color:"white",background:e.palette.barraSuperior},toolbarIcon:{display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px",minHeight:"48px",background:e.palette.barraSuperior,[e.breakpoints.down("sm")]:{height:"48px"}},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:300,width:"calc(100% - ".concat(300,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1,fontSize:14},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:300,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:{overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7),[e.breakpoints.up("sm")]:{width:e.spacing(9)}},appBarSpacer:{minHeight:"48px"},content:Object(h.a)({flex:1,overflow:"auto"},e.scrollbarStyles),container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},containerWithScroll:Object(h.a)({flex:1,padding:e.spacing(1),overflowY:"scroll"},e.scrollbarStyles)}));var St=e=>{var a,t,r;let{children:o}=e;const c=xt(),[i,s]=Object(n.useState)(!1),[m,d]=Object(n.useState)(null),[g,E]=Object(n.useState)(!1),{handleLogout:b,loading:h}=Object(n.useContext)(Xe),[y,A]=Object(n.useState)(!1),[M,D]=Object(n.useState)("permanent"),{user:P}=Object(n.useContext)(Xe),{dateToClient:W}=et(),q=Object(v.a)(),{colorMode:F}=Object(n.useContext)(p),z=Object(u.a)(q.breakpoints.up("sm"));Object(n.useEffect)(()=>{document.body.offsetWidth>600&&A(!0)},[]),Object(n.useEffect)(()=>{document.body.offsetWidth<600?D("temporary"):D("permanent")},[y]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=localStorage.getItem("userId"),t=He({companyId:e});t.on("company-".concat(e,"-auth"),e=>{e.user.id===+a&&(Pe("Sua conta foi acessada em outro computador."),setTimeout(()=>{localStorage.clear(),window.location.reload()},1e3))}),t.emit("userStatus");const n=setInterval(()=>{t.emit("userStatus")},3e5);return()=>{t.disconnect(),clearInterval(n)}},[]);const B=()=>{d(null),E(!1)};return h?l.a.createElement($a,null):l.a.createElement("div",{className:c.root},l.a.createElement(O.a,{variant:M,className:y?c.drawerPaper:c.drawerPaperClose,classes:{paper:Object(f.a)(c.drawerPaper,!y&&c.drawerPaperClose)},open:y},l.a.createElement("div",{className:c.toolbarIcon},l.a.createElement("img",{src:mt.a,style:{margin:"0 auto",height:"100%",width:"100%"},alt:"logo"}),l.a.createElement(C.a,{onClick:()=>A(!y),style:{color:"white"}},l.a.createElement(R.a,null))),l.a.createElement(x.a,null),l.a.createElement(S.a,{className:c.containerWithScroll},l.a.createElement(la,{drawerClose:()=>{document.body.offsetWidth<600&&A(!1)}})),l.a.createElement(x.a,null)),l.a.createElement(Za,{open:i,onClose:()=>s(!1),userId:null===P||void 0===P?void 0:P.id}),l.a.createElement(j.a,{position:"absolute",className:Object(f.a)(c.appBar,y&&c.appBarShift),color:"primary"},l.a.createElement(k.a,{variant:"dense",className:c.toolbar},l.a.createElement(C.a,{edge:"start",variant:"contained","aria-label":"open drawer",onClick:()=>A(!y),className:Object(f.a)(c.menuButton,y&&c.menuButtonHidden)},l.a.createElement(N.a,null)),l.a.createElement(w.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:c.title,style:console.log("dueDate",null===P||void 0===P||null===(a=P.company)||void 0===a?void 0:a.dueDate)},z&&"admin"===(null===P||void 0===P?void 0:P.profile)&&(null===P||void 0===P||null===(t=P.company)||void 0===t?void 0:t.dueDate)?l.a.createElement(l.a.Fragment,null,"Ol\xe1 ",l.a.createElement("b",null,P.name),", seja bem-vindo ao ",l.a.createElement("b",null,ft.a.name),"! (Ativo at\xe9 ",W(null===P||void 0===P||null===(r=P.company)||void 0===r?void 0:r.dueDate),")"):l.a.createElement(l.a.Fragment,null,"Ol\xe1 ",l.a.createElement("b",null,P.name),", seja bem-vindo ao ",l.a.createElement("b",null,ft.a.name),"!")),l.a.createElement(C.a,{edge:"start",onClick:()=>{F.toggleColorMode()}},"dark"===q.mode?l.a.createElement(Ct.a,{style:{color:"white"}}):l.a.createElement(vt.a,{style:{color:"white"}})),P.id&&l.a.createElement(Da,null),l.a.createElement(it,null),l.a.createElement(ht,null),l.a.createElement("div",null,l.a.createElement(C.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:e=>{d(e.currentTarget),E(!0)},variant:"contained",style:{color:"white"}},l.a.createElement(L.a,null)),l.a.createElement(T.a,{id:"menu-appbar",anchorEl:m,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:g,onClose:B},l.a.createElement(I.a,{onClick:()=>{s(!0),B()}},Me.a.t("mainDrawer.appBar.user.profile")),l.a.createElement(I.a,{onClick:()=>{B(),b()}},Me.a.t("mainDrawer.appBar.user.logout")))))),l.a.createElement("main",{className:c.content},l.a.createElement("div",{className:c.appBarSpacer}),o||null))},jt=t(1210),kt=t(1209),wt=t(1108),Tt=t(656),It=t.n(Tt),At=t(658),Nt=t.n(At),Mt=t(657),Rt=t.n(Mt),Dt=t(148),Lt=t.n(Dt),Pt=t(659),Wt=t.n(Pt),qt=t(660),Ft=t.n(qt),zt=t(363),Bt=t(365),Ut=t(1198),Vt=t(1251),Ht=t(1199),Yt=t(653),Gt=t(654),_t=t(131),Qt=t(354),Kt=t(445);var Zt=e=>l.a.createElement(w.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},e.children);var Jt=()=>{const e=Object(v.a)(),a=Object(n.useRef)((new Date).toISOString()),{tickets:t}=Aa({date:a.current}),[r,o]=Object(n.useState)([{time:"01:00",amount:0},{time:"02:00",amount:0},{time:"03:00",amount:0},{time:"04:00",amount:0},{time:"05:00",amount:0},{time:"06:00",amount:0},{time:"07:00",amount:0},{time:"08:00",amount:0},{time:"09:00",amount:0},{time:"10:00",amount:0},{time:"11:00",amount:0},{time:"12:00",amount:0},{time:"13:00",amount:0},{time:"14:00",amount:0},{time:"15:00",amount:0},{time:"16:00",amount:0},{time:"17:00",amount:0},{time:"18:00",amount:0},{time:"19:00",amount:0},{time:"20:00",amount:0},{time:"21:00",amount:0},{time:"22:00",amount:0},{time:"23:00",amount:0},{time:"00:00",amount:0}]);return Object(n.useEffect)(()=>{o(e=>{let a=[...e];return a.forEach(e=>{t.forEach(a=>{Object(ra.a)(Object(Kt.a)(Object(da.a)(a.createdAt)),"HH:mm")===e.time&&e.amount++})}),a})},[t]),l.a.createElement(l.a.Fragment,null,l.a.createElement(Zt,null,"".concat(Me.a.t("dashboard.charts.perDay.title")).concat(t.length)),l.a.createElement(Ut.a,null,l.a.createElement(Vt.a,{data:r,barSize:40,width:730,height:250,margin:{top:16,right:16,bottom:0,left:24}},l.a.createElement(Ht.a,{strokeDasharray:"3 3"}),l.a.createElement(Yt.a,{dataKey:"time",stroke:e.palette.text.secondary}),l.a.createElement(Gt.a,{type:"number",allowDecimals:!1,stroke:e.palette.text.secondary},l.a.createElement(_t.a,{angle:270,position:"left",style:{textAnchor:"middle",fill:e.palette.text.primary}},"Tickets")),l.a.createElement(Qt.a,{dataKey:"amount",fill:e.palette.primary.main}))))},Xt=t(1200),$t=t(1201),en=t(1202);const an=Object(y.a)(e=>({cardAvatar:{fontSize:"55px",color:zt.a[500],backgroundColor:"#ffffff",width:e.spacing(7),height:e.spacing(7)},cardTitle:{fontSize:"18px",color:e.palette.text.primary},cardSubtitle:{color:zt.a[600],fontSize:"14px"}}));function tn(e){const{icon:a,title:t,value:n,loading:r}=e,o=an();return r?l.a.createElement(en.a,{variant:"rect",height:80}):l.a.createElement(Xt.a,null,l.a.createElement($t.a,{avatar:l.a.createElement(ga.a,{className:o.cardAvatar},a),title:l.a.createElement(w.a,{variant:"h6",component:"h2",className:o.cardTitle},t),subheader:l.a.createElement(w.a,{variant:"subtitle1",component:"p",className:o.cardSubtitle},n)}))}var nn=t(1206),ln=t(1208),rn=t(1204),on=t(1205),cn=t(1207),sn=t(1203),mn=t(364),dn=t(655),un=t.n(dn),pn=t(1267);const gn=Object(y.a)(e=>({on:{color:ua.a[600],fontSize:"20px"},off:{color:mn.a[600],fontSize:"20px"},pointer:{cursor:"pointer"}}));function En(e){let{rating:a}=e;const t=null===a?0:Math.trunc(a);return l.a.createElement(pn.a,{defaultValue:t,max:3,readOnly:!0})}function bn(e){const{loading:a,attendants:t}=e,n=gn();return a?l.a.createElement(en.a,{variant:"rect",height:150}):l.a.createElement(on.a,{component:lt.a},l.a.createElement(nn.a,null,l.a.createElement(cn.a,null,l.a.createElement(sn.a,null,l.a.createElement(rn.a,null,"Nome"),l.a.createElement(rn.a,{align:"center"},"Avalia\xe7\xf5es"),l.a.createElement(rn.a,{align:"center"},"T.M. de Atendimento"),l.a.createElement(rn.a,{align:"center"},"Status (Atual)"))),l.a.createElement(ln.a,null,t.map((e,a)=>{return l.a.createElement(sn.a,{key:a},l.a.createElement(rn.a,null,e.name),l.a.createElement(rn.a,{align:"center",title:"1 - Insatisfeito, 2 - Satisfeito, 3 - Muito Satisfeito",className:n.pointer},l.a.createElement(En,{rating:e.rating})),l.a.createElement(rn.a,{align:"center"},(t=e.avgSupportTime,Ze()().startOf("day").add(t,"minutes").format("HH[h] mm[m]"))),l.a.createElement(rn.a,{align:"center"},e.online?l.a.createElement(Lt.a,{className:n.on}):l.a.createElement(un.a,{className:n.off})));var t}))))}var hn=()=>({find:async e=>{const{data:a}=await Be.request({url:"/dashboard",method:"GET",params:e});return a}});var fn=()=>({save:async e=>{const{data:a}=await Be.request({url:"/companies",method:"POST",data:e});return a},update:async e=>{const{data:a}=await Be.request({url:"/companies/".concat(e.id),method:"PUT",data:e});return a},remove:async e=>{const{data:a}=await Be.request({url:"/companies/".concat(e),method:"DELETE"});return a},list:async e=>{const{data:a}=await Be.request({url:"/companies/list",method:"GET"});return a},find:async e=>{const{data:a}=await Be.request({url:"/companies/".concat(e),method:"GET"});return a},finding:async e=>{const{data:a}=await Be.request({url:"/companies/".concat(e),method:"GET"});return a},findAll:async e=>{const{data:a}=await Be.request({url:"/companies",method:"GET"});return a},updateSchedules:async e=>{const{data:a}=await Be.request({url:"/companies/".concat(e.id,"/schedules"),method:"PUT",data:e});return a}});const yn=Object(y.a)(e=>({container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},fixedHeightPaper:Object(h.a)({padding:e.spacing(2),display:"flex",flexDirection:"column",height:240,overflowY:"auto"},e.scrollbarStyles),cardAvatar:{fontSize:"55px",color:zt.a[500],backgroundColor:"#ffffff",width:e.spacing(7),height:e.spacing(7)},cardTitle:{fontSize:"18px",color:Bt.a[700]},cardSubtitle:{color:zt.a[600],fontSize:"14px"},alignRight:{textAlign:"right"},fullWidth:{width:"100%"},selectContainer:{width:"100%",textAlign:"left"},card1:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"#0094bb",color:"#eee"},card2:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"#748e9d",color:"#eee"},card3:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"#7f78e6",color:"#eee"},card4:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"#cc991b",color:"#eee"},card5:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"#434243",color:"#eee"},card6:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"#b87d77",color:"#eee"},card7:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"#7bc780",color:"#eee"},card8:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"#b05c38",color:"#eee"},card9:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"100%",backgroundColor:"#bd3c58",color:"#eee"}}));var vn=()=>{const e=yn(),[a,t]=Object(n.useState)({}),[r,o]=Object(n.useState)([]),[c,i]=Object(n.useState)(1),[s,m]=Object(n.useState)(0),[d,u]=Object(n.useState)(),[p,g]=Object(n.useState)(Ze()("1","D").format("YYYY-MM-DD")),[E,f]=Object(n.useState)(Ze()().format("YYYY-MM-DD")),[y,v]=Object(n.useState)(!1),{find:O}=hn(),{finding:C}=fn();async function x(){v(!0);let e={};if(s>0&&(e={days:s}),!Object(Le.isEmpty)(p)&&Ze()(p).isValid()&&(e=Object(h.a)(Object(h.a)({},e),{},{date_from:Ze()(p).format("YYYY-MM-DD")})),!Object(Le.isEmpty)(E)&&Ze()(E).isValid()&&(e=Object(h.a)(Object(h.a)({},e),{},{date_to:Ze()(E).format("YYYY-MM-DD")})),0===Object.keys(e).length)return b.b.error("Parametrize o filtro"),void v(!1);const a=await O(e);t(a.counters),Object(Le.isArray)(a.attendants)?o(a.attendants):o([]),v(!1)}Object(n.useEffect)(()=>{setTimeout(()=>{!async function(){await x()}()},1e3)},[]),Object(n.useEffect)(()=>{!async function(){await j()}()},[]);const S=localStorage.getItem("companyId"),j=async()=>{v(!0);try{const e=await C(S);u(Ze()(e.dueDate).format("DD/MM/yyyy"))}catch(e){console.log("\ud83d\ude80 Console Log : e",e)}v(!1)};function k(e){return Ze()().startOf("day").add(e,"minutes").format("HH[h] mm[m]")}return l.a.createElement("div",null,l.a.createElement(jt.a,{maxWidth:"lg",className:e.container},l.a.createElement(kt.a,{container:!0,spacing:3,justifyContent:"flex-end"},l.a.createElement(kt.a,{item:!0,xs:12,sm:6,md:4},l.a.createElement(lt.a,{className:e.card1,style:{overflow:"hidden"},elevation:4},l.a.createElement(kt.a,{container:!0,spacing:3},l.a.createElement(kt.a,{item:!0,xs:8},l.a.createElement(w.a,{component:"h3",variant:"h6",paragraph:!0},"Atd. Pendentes"),l.a.createElement(kt.a,{item:!0},l.a.createElement(w.a,{component:"h1",variant:"h4"},a.supportPending))),l.a.createElement(kt.a,{item:!0,xs:2},l.a.createElement(It.a,{style:{fontSize:100,color:"#0b708c"}}))))),l.a.createElement(kt.a,{item:!0,xs:12,sm:6,md:4},l.a.createElement(lt.a,{className:e.card2,style:{overflow:"hidden"},elevation:6},l.a.createElement(kt.a,{container:!0,spacing:3},l.a.createElement(kt.a,{item:!0,xs:8},l.a.createElement(w.a,{component:"h3",variant:"h6",paragraph:!0},"Atd. Acontecendo"),l.a.createElement(kt.a,{item:!0},l.a.createElement(w.a,{component:"h1",variant:"h4"},a.supportHappening))),l.a.createElement(kt.a,{item:!0,xs:4},l.a.createElement(Rt.a,{style:{fontSize:100,color:"#47606e"}}))))),l.a.createElement(kt.a,{item:!0,xs:12,sm:6,md:4},l.a.createElement(lt.a,{className:e.card3,style:{overflow:"hidden"},elevation:6},l.a.createElement(kt.a,{container:!0,spacing:3},l.a.createElement(kt.a,{item:!0,xs:8},l.a.createElement(w.a,{component:"h3",variant:"h6",paragraph:!0},"Finalizados"),l.a.createElement(kt.a,{item:!0},l.a.createElement(w.a,{component:"h1",variant:"h4"},a.supportFinished))),l.a.createElement(kt.a,{item:!0,xs:4},l.a.createElement(Lt.a,{style:{fontSize:100,color:"#5852ab"}}))))),l.a.createElement(kt.a,{item:!0,xs:12,sm:6,md:4},l.a.createElement(lt.a,{className:e.card4,style:{overflow:"hidden"},elevation:6},l.a.createElement(kt.a,{container:!0,spacing:3},l.a.createElement(kt.a,{item:!0,xs:8},l.a.createElement(w.a,{component:"h3",variant:"h6",paragraph:!0},"Novos Contatos"),l.a.createElement(kt.a,{item:!0},l.a.createElement(w.a,{component:"h1",variant:"h4"},a.leads))),l.a.createElement(kt.a,{item:!0,xs:4},l.a.createElement(Nt.a,{style:{fontSize:100,color:"#8c6b19"}}))))),l.a.createElement(kt.a,{item:!0,xs:12,sm:6,md:4},l.a.createElement(lt.a,{className:e.card8,style:{overflow:"hidden"},elevation:6},l.a.createElement(kt.a,{container:!0,spacing:3},l.a.createElement(kt.a,{item:!0,xs:8},l.a.createElement(w.a,{component:"h3",variant:"h6",paragraph:!0},"T.M. de Atendimento"),l.a.createElement(kt.a,{item:!0},l.a.createElement(w.a,{component:"h1",variant:"h4"},k(a.avgSupportTime)))),l.a.createElement(kt.a,{item:!0,xs:4},l.a.createElement(Wt.a,{style:{fontSize:100,color:"#7a3f26"}}))))),l.a.createElement(kt.a,{item:!0,xs:12,sm:6,md:4},l.a.createElement(lt.a,{className:e.card9,style:{overflow:"hidden"},elevation:6},l.a.createElement(kt.a,{container:!0,spacing:3},l.a.createElement(kt.a,{item:!0,xs:8},l.a.createElement(w.a,{component:"h3",variant:"h6",paragraph:!0},"T.M. de Espera"),l.a.createElement(kt.a,{item:!0},l.a.createElement(w.a,{component:"h1",variant:"h4"},k(a.avgWaitTime)))),l.a.createElement(kt.a,{item:!0,xs:4},l.a.createElement(Ft.a,{style:{fontSize:100,color:"#8a2c40"}}))))),l.a.createElement(kt.a,{item:!0,xs:12,sm:6,md:4},l.a.createElement(Ha.a,{className:e.selectContainer},l.a.createElement(Va.a,{id:"period-selector-label"},"Tipo de Filtro"),l.a.createElement(Ua.a,{labelId:"period-selector-label",value:c,onChange:e=>async function(e){i(e),1===e?m(0):(g(""),f(""))}(e.target.value)},l.a.createElement(I.a,{value:1},"Filtro por Data"),l.a.createElement(I.a,{value:2},"Filtro por Per\xedodo")),l.a.createElement(wt.a,null,"Selecione o per\xedodo desejado"))),1===c?l.a.createElement(l.a.Fragment,null,l.a.createElement(kt.a,{item:!0,xs:12,sm:6,md:4},l.a.createElement(Wa.a,{label:"Data Inicial",type:"date",value:p,onChange:e=>g(e.target.value),className:e.fullWidth,InputLabelProps:{shrink:!0}})),l.a.createElement(kt.a,{item:!0,xs:12,sm:6,md:4},l.a.createElement(Wa.a,{label:"Data Final",type:"date",value:E,onChange:e=>f(e.target.value),className:e.fullWidth,InputLabelProps:{shrink:!0}}))):l.a.createElement(kt.a,{item:!0,xs:12,sm:6,md:4},l.a.createElement(Ha.a,{className:e.selectContainer},l.a.createElement(Va.a,{id:"period-selector-label"},"Per\xedodo"),l.a.createElement(Ua.a,{labelId:"period-selector-label",id:"period-selector",value:s,onChange:e=>async function(e){m(e)}(e.target.value)},l.a.createElement(I.a,{value:0},"Nenhum selecionado"),l.a.createElement(I.a,{value:3},"\xdaltimos 3 dias"),l.a.createElement(I.a,{value:7},"\xdaltimos 7 dias"),l.a.createElement(I.a,{value:15},"\xdaltimos 15 dias"),l.a.createElement(I.a,{value:30},"\xdaltimos 30 dias"),l.a.createElement(I.a,{value:60},"\xdaltimos 60 dias"),l.a.createElement(I.a,{value:90},"\xdaltimos 90 dias")),l.a.createElement(wt.a,null,"Selecione o per\xedodo desejado"))),l.a.createElement(kt.a,{item:!0,xs:12,className:e.alignRight},l.a.createElement(va,{loading:y,onClick:()=>x(),variant:"contained",color:"primary"},"Filtrar")),l.a.createElement(kt.a,{item:!0,xs:12},l.a.createElement(lt.a,{className:e.fixedHeightPaper},l.a.createElement(Jt,null))),l.a.createElement(kt.a,{item:!0,xs:12},r.length?l.a.createElement(bn,{attendants:r,loading:y}):null))))},On=t(1224),Cn=t(76),xn=t.n(Cn),Sn=t(717),jn=t(1255),kn=t(1219),wn=t(662),Tn=t.n(wn),In=t(663),An=t.n(In),Nn=t(1220),Mn=t(1221),Rn=t(1211),Dn=t(1259),Ln=t(52),Pn=t.n(Ln);const Wn=Object(y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:ua.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}})),qn=La.b().shape({name:La.c().min(2,"Too Short!").max(50,"Too Long!").required("Required"),number:La.c().min(8,"Too Short!").max(50,"Too Long!"),email:La.c().email("Invalid email")});var Fn=e=>{let{open:a,onClose:t,contactId:r,initialValues:o,onSave:c}=e;const i=Wn(),s=Object(n.useRef)(!0),m={name:"",number:"",email:""},[d,u]=Object(n.useState)(m);Object(n.useEffect)(()=>()=>{s.current=!1},[]),Object(n.useEffect)(()=>{(async()=>{if(o&&u(e=>Object(h.a)(Object(h.a)({},e),o)),r)try{const{data:e}=await Be.get("/contacts/".concat(r));s.current&&u(e)}catch(e){Pe(e)}})()},[r,a,o]);const p=()=>{t(),u(m)};return l.a.createElement("div",{className:i.root},l.a.createElement(qa.a,{open:a,onClose:p,maxWidth:"lg",scroll:"paper"},l.a.createElement(Ba.a,{id:"form-dialog-title"},"".concat(r?Me.a.t("contactModal.title.edit"):Me.a.t("contactModal.title.add"))),l.a.createElement(Pa.e,{initialValues:d,enableReinitialize:!0,validationSchema:qn,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{try{if(r)await Be.put("/contacts/".concat(r),e),p();else{const{data:a}=await Be.post("/contacts",e);c&&c(a),p()}b.b.success(Me.a.t("contactModal.success"))}catch(a){Pe(a)}})(e),a.setSubmitting(!1)},400)}},e=>{let{values:a,errors:t,touched:n,isSubmitting:o}=e;return l.a.createElement(Pa.d,null,l.a.createElement(za.a,{dividers:!0},l.a.createElement(w.a,{variant:"subtitle1",gutterBottom:!0},Me.a.t("contactModal.form.mainInfo")),l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("contactModal.form.name"),name:"name",autoFocus:!0,error:n.name&&Boolean(t.name),helperText:n.name&&t.name,variant:"outlined",margin:"dense",className:i.textField}),l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("contactModal.form.number"),name:"number",error:n.number&&Boolean(t.number),helperText:n.number&&t.number,placeholder:"5513912344321",variant:"outlined",margin:"dense"}),l.a.createElement("div",null,l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("contactModal.form.email"),name:"email",error:n.email&&Boolean(t.email),helperText:n.email&&t.email,placeholder:"Email address",fullWidth:!0,margin:"dense",variant:"outlined"})),l.a.createElement(w.a,{style:{marginBottom:8,marginTop:12},variant:"subtitle1"},Me.a.t("contactModal.form.extraInfo")),l.a.createElement(Pa.c,{name:"extraInfo"},e=>{let{push:t,remove:n}=e;return l.a.createElement(l.a.Fragment,null,a.extraInfo&&a.extraInfo.length>0&&a.extraInfo.map((e,a)=>l.a.createElement("div",{className:i.extraAttr,key:"".concat(a,"-info")},l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("contactModal.form.extraName"),name:"extraInfo[".concat(a,"].name"),variant:"outlined",margin:"dense",className:i.textField}),l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("contactModal.form.extraValue"),name:"extraInfo[".concat(a,"].value"),variant:"outlined",margin:"dense",className:i.textField}),l.a.createElement(C.a,{size:"small",onClick:()=>n(a)},l.a.createElement(Pn.a,null)))),l.a.createElement("div",{className:i.extraAttr},l.a.createElement(ba.a,{style:{flex:1,marginTop:8},variant:"outlined",color:"primary",onClick:()=>t({name:"",value:""})},"+ ".concat(Me.a.t("contactModal.buttons.addExtraInfo")))))})),l.a.createElement(Fa.a,null,l.a.createElement(ba.a,{onClick:p,color:"secondary",disabled:o,variant:"outlined"},Me.a.t("contactModal.buttons.cancel")),l.a.createElement(ba.a,{type:"submit",color:"primary",disabled:o,variant:"contained",className:i.btnWrapper},"".concat(r?Me.a.t("contactModal.buttons.okEdit"):Me.a.t("contactModal.buttons.okAdd")),o&&l.a.createElement(ha.a,{size:24,className:i.buttonProgress}))))})))};const zn=Object(Rn.a)({trim:!0});var Bn=e=>{var a;let{modalOpen:t,onClose:r,initialContact:o}=e;const[c,i]=Object(n.useState)([]),[s,m]=Object(n.useState)(!1),[d,u]=Object(n.useState)(""),[p,g]=Object(n.useState)(null),[E,f]=Object(n.useState)(""),[y,v]=Object(n.useState)({}),[O,C]=Object(n.useState)(!1),{user:x}=Object(n.useContext)(Xe);Object(n.useEffect)(()=>{void 0!==(null===o||void 0===o?void 0:o.id)&&(i([o]),g(o))},[o]),Object(n.useEffect)(()=>{if(!t||d.length<3)return void m(!1);m(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await Be.get("contacts",{params:{searchParam:d}});i(e.contacts),m(!1)}catch(e){m(!1),Pe(e)}})()},500);return()=>clearTimeout(e)},[d,t]);const S=()=>{r(),u(""),g(null)},j=async e=>{if(e)if(""!==E||"admin"===x.profile){m(!0);try{const a=""!==E?E:null,{data:t}=await Be.post("/tickets",{contactId:e,queueId:a,userId:x.id,status:"open"});r(t)}catch(a){Pe(a)}m(!1)}else b.b.error("Selecione uma fila")},k=(e,a)=>{const t=zn(e,a);return""!==a.inputValue&&!s&&d.length>=3&&t.push({name:"".concat(a.inputValue)}),t},w=e=>e.number?"".concat(e.name," - ").concat(e.number):"".concat(Me.a.t("newTicketModal.add")," ").concat(e.name),T=e=>e.number?"".concat(e.name," - ").concat(e.number):"".concat(e.name);return l.a.createElement(l.a.Fragment,null,l.a.createElement(Fn,{open:O,initialValues:y,onClose:()=>{C(!1)},onSave:e=>{j(e.id)}}),l.a.createElement(qa.a,{open:t,onClose:S},l.a.createElement(Ba.a,{id:"form-dialog-title"},Me.a.t("newTicketModal.title")),l.a.createElement(za.a,{dividers:!0},l.a.createElement(kt.a,{style:{width:300},container:!0,spacing:2},void 0===o||void 0===o.id?l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(Dn.a,{fullWidth:!0,options:c,loading:s,clearOnBlur:!0,autoHighlight:!0,freeSolo:!0,clearOnEscape:!0,getOptionLabel:T,renderOption:w,filterOptions:k,onChange:(e,a)=>((e,a)=>{(null===a||void 0===a?void 0:a.number)?g(a):(null===a||void 0===a?void 0:a.name)&&(v({name:a.name}),C(!0))})(0,a),renderInput:e=>l.a.createElement(Wa.a,Object.assign({},e,{label:Me.a.t("newTicketModal.fieldLabel"),variant:"outlined",autoFocus:!0,onChange:e=>u(e.target.value),onKeyPress:e=>{!s&&p&&"Enter"===e.key&&j(p.id)},InputProps:Object(h.a)(Object(h.a)({},e.InputProps),{},{endAdornment:l.a.createElement(l.a.Fragment,null,s?l.a.createElement(ha.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))})):null,l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(Ua.a,{fullWidth:!0,displayEmpty:!0,variant:"outlined",value:E,onChange:e=>{f(e.target.value)},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},renderValue:()=>{if(""===E)return"Selecione uma fila";return x.queues.find(e=>e.id===E).name}},(null===(a=x.queues)||void 0===a?void 0:a.length)>0&&x.queues.map((e,a)=>l.a.createElement(I.a,{dense:!0,key:a,value:e.id},l.a.createElement(q.a,{primary:e.name}))))))),l.a.createElement(Fa.a,null,l.a.createElement(ba.a,{onClick:S,color:"secondary",disabled:s,variant:"outlined"},Me.a.t("newTicketModal.buttons.cancel")),l.a.createElement(va,{variant:"contained",type:"button",disabled:!p,onClick:()=>j(p.id),color:"primary",loading:s},Me.a.t("newTicketModal.buttons.ok")))))},Un=t(1218),Vn=t(1253);const Hn=Object(n.createContext)(),Yn=e=>{let{children:a}=e;const[t,r]=Object(n.useState)({id:null,code:null}),o=Object(E.g)();return Object(n.useEffect)(()=>{null!==t.id&&o.push("/tickets/".concat(t.uuid))},[t]),l.a.createElement(Hn.Provider,{value:{currentTicket:t,setCurrentTicket:r}},a)};var Gn=t(1256),_n=t(448),Qn=t.n(_n),Kn=t(447),Zn=t.n(Kn),Jn=t(1212),Xn=t(1213),$n=t(1214),el=t(1215),al=t(1216),tl=t(1217),nl=t(704);const ll=Object(y.a)(e=>({messageMedia:{objectFit:"cover",width:250,height:200,borderTopLeftRadius:8,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:8}}));var rl=e=>{let{imageUrl:a}=e;const t=ll(),[r,o]=Object(n.useState)(!0),[c,i]=Object(n.useState)("");return Object(n.useEffect)(()=>{if(!a)return;(async()=>{const{data:e,headers:t}=await Be.get(a,{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([e],{type:t["content-type"]}));i(n),o(!1)})()},[a]),l.a.createElement(nl.a,{className:t.messageMedia,smallSrcSet:r?a:c,medium:r?a:c,large:r?a:c,alt:"image"})};var ol=e=>{let{title:a,children:t,open:n,onClose:r,onConfirm:o}=e;return l.a.createElement(qa.a,{open:n,onClose:()=>r(!1),"aria-labelledby":"confirm-dialog"},l.a.createElement(Ba.a,{id:"confirm-dialog"},a),l.a.createElement(za.a,{dividers:!0},l.a.createElement(w.a,null,t)),l.a.createElement(Fa.a,null,l.a.createElement(ba.a,{variant:"contained",onClick:()=>r(!1),color:"default"},Me.a.t("confirmationModal.buttons.cancel")),l.a.createElement(ba.a,{variant:"contained",onClick:()=>{r(!1),o()},color:"secondary"},Me.a.t("confirmationModal.buttons.confirm"))))};const cl=Object(n.createContext)(),il=e=>{let{children:a}=e;const[t,r]=Object(n.useState)(null);return l.a.createElement(cl.Provider,{value:{replyingMessage:t,setReplyingMessage:r}},a)};var sl=e=>{let{message:a,menuOpen:t,handleClose:r,anchorEl:o}=e;const{setReplyingMessage:c}=Object(n.useContext)(cl),[i,s]=Object(n.useState)(!1);return l.a.createElement(l.a.Fragment,null,l.a.createElement(ol,{title:Me.a.t("messageOptionsMenu.confirmationModal.title"),open:i,onClose:s,onConfirm:async()=>{try{await Be.delete("/messages/".concat(a.id))}catch(e){Pe(e)}}},Me.a.t("messageOptionsMenu.confirmationModal.message")),l.a.createElement(T.a,{anchorEl:o,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:t,onClose:r},a.fromMe&&l.a.createElement(I.a,{onClick:e=>{s(!0),r()}},Me.a.t("messageOptionsMenu.delete")),l.a.createElement(I.a,{onClick:()=>{c(a),r()}},Me.a.t("messageOptionsMenu.reply"))))},ml=t(661),dl=t.n(ml);const ul=Object(y.a)(e=>({messagesListWrapper:{overflow:"hidden",position:"relative",display:"flex",flexDirection:"column",flexGrow:1,width:"100%",minWidth:300,minHeight:200},messagesList:Object(h.a)({backgroundImage:"url(".concat(dl.a,")"),display:"flex",flexDirection:"column",flexGrow:1,padding:"20px 20px 20px 20px",overflowY:"scroll"},e.scrollbarStyles),circleLoading:{color:ua.a[500],position:"absolute",opacity:"70%",top:0,left:"50%",marginTop:12},messageLeft:{marginRight:20,marginTop:2,minWidth:100,maxWidth:600,height:"auto",display:"block",position:"relative","&:hover #messageActionsButton":{display:"flex",position:"absolute",top:0,right:0},whiteSpace:"pre-wrap",backgroundColor:"#ffffff",color:"#303030",alignSelf:"flex-start",borderTopLeftRadius:0,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:8,paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:0,boxShadow:"0 1px 1px #b3b3b3"},quotedContainerLeft:{margin:"-3px -80px 6px -6px",overflow:"hidden",backgroundColor:"#f0f0f0",borderRadius:"7.5px",display:"flex",position:"relative"},quotedMsg:{padding:10,maxWidth:300,height:"auto",display:"block",whiteSpace:"pre-wrap",overflow:"hidden"},quotedSideColorLeft:{flex:"none",width:"4px",backgroundColor:"#6bcbef"},messageRight:{marginLeft:20,marginTop:2,minWidth:100,maxWidth:600,height:"auto",display:"block",position:"relative","&:hover #messageActionsButton":{display:"flex",position:"absolute",top:0,right:0},whiteSpace:"pre-wrap",backgroundColor:"#dcf8c6",color:"#303030",alignSelf:"flex-end",borderTopLeftRadius:8,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:0,paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:0,boxShadow:"0 1px 1px #b3b3b3"},quotedContainerRight:{margin:"-3px -80px 6px -6px",overflowY:"hidden",backgroundColor:"#cfe9ba",borderRadius:"7.5px",display:"flex",position:"relative"},quotedMsgRight:{padding:10,maxWidth:300,height:"auto",whiteSpace:"pre-wrap"},quotedSideColorRight:{flex:"none",width:"4px",backgroundColor:"#35cd96"},messageActionsButton:{display:"none",position:"relative",color:"#999",zIndex:1,backgroundColor:"inherit",opacity:"90%","&:hover, &.Mui-focusVisible":{backgroundColor:"inherit"}},messageContactName:{display:"flex",color:"#6bcbef",fontWeight:500},textContentItem:{overflowWrap:"break-word",padding:"3px 80px 6px 6px"},textContentItemDeleted:{fontStyle:"italic",color:"rgba(0, 0, 0, 0.36)",overflowWrap:"break-word",padding:"3px 80px 6px 6px"},messageMedia:{objectFit:"cover",width:250,height:200,borderTopLeftRadius:8,borderTopRightRadius:8,borderBottomLeftRadius:8,borderBottomRightRadius:8},timestamp:{fontSize:11,position:"absolute",bottom:0,right:5,color:"#999"},dailyTimestamp:{alignItems:"center",textAlign:"center",alignSelf:"center",width:"110px",backgroundColor:"#e1f3fb",margin:"10px",borderRadius:"10px",boxShadow:"0 1px 1px #b3b3b3"},dailyTimestampText:{color:"#808888",padding:8,alignSelf:"center",marginLeft:"0px"},ackIcons:{fontSize:18,verticalAlign:"middle",marginLeft:4},deletedIcon:{fontSize:18,verticalAlign:"middle",marginRight:4},ackDoneAllIcon:{color:ua.a[500],fontSize:18,verticalAlign:"middle",marginLeft:4},downloadMedia:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"inherit",padding:10},imageLocation:{position:"relative",width:"100%",height:80,borderRadius:5}})),pl=(e,a)=>{if("LOAD_MESSAGES"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...n,...e]}if("ADD_MESSAGE"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?e[n]=t:e.push(t),[...e]}if("UPDATE_MESSAGE"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n&&(e[n]=t),[...e]}if("RESET"===a.type)return[]};var gl=e=>{let{ticket:a,ticketId:t,isGroup:r}=e;const o=ul(),[c,i]=Object(n.useReducer)(pl,[]),[s,m]=Object(n.useState)(1),[d,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)(!1),E=Object(n.useRef)(),[b,h]=Object(n.useState)({}),[y,v]=Object(n.useState)(null),O=Boolean(y),S=Object(n.useRef)(t);Object(n.useEffect)(()=>{i({type:"RESET"}),m(1),S.current=t},[t]),Object(n.useEffect)(()=>{g(!0);const e=setTimeout(()=>{(async()=>{if(void 0!==t)try{const{data:e}=await Be.get("/messages/"+t,{params:{pageNumber:s}});S.current===t&&(i({type:"LOAD_MESSAGES",payload:e.messages}),u(e.hasMore),g(!1)),1===s&&e.messages.length>1&&j()}catch(e){g(!1),Pe(e)}})()},500);return()=>{clearTimeout(e)}},[s,t]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),t=He({companyId:e});return t.on("connect",()=>t.emit("joinChatBox","".concat(a.id))),t.on("company-".concat(e,"-appMessage"),e=>{"create"===e.action&&(i({type:"ADD_MESSAGE",payload:e.message}),j()),"update"===e.action&&i({type:"UPDATE_MESSAGE",payload:e.message})}),()=>{t.disconnect()}},[t,a]);const j=()=>{E.current&&E.current.scrollIntoView({})},k=(e,a)=>{v(e.currentTarget),h(a)},T=e=>"image"===e.mediaType?l.a.createElement(rl,{imageUrl:e.mediaUrl}):"audio"===e.mediaType?l.a.createElement("audio",{controls:!0},l.a.createElement("source",{src:e.mediaUrl,type:"audio/ogg"})):"video"===e.mediaType?l.a.createElement("video",{className:o.messageMedia,src:e.mediaUrl,controls:!0}):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:o.downloadMedia},l.a.createElement(ba.a,{startIcon:l.a.createElement(Jn.a,null),color:"primary",variant:"outlined",target:"_blank",href:e.mediaUrl},"Download")),l.a.createElement(x.a,null)),I=(e,a)=>{if(0===a)return l.a.createElement("span",{className:o.dailyTimestamp,key:"timestamp-".concat(e.id)},l.a.createElement("div",{className:o.dailyTimestampText},Object(ra.a)(Object(da.a)(c[a].createdAt),"dd/MM/yyyy")));if(a<c.length-1){let t=Object(da.a)(c[a].createdAt),n=Object(da.a)(c[a-1].createdAt);if(!Object(ma.a)(t,n))return l.a.createElement("span",{className:o.dailyTimestamp,key:"timestamp-".concat(e.id)},l.a.createElement("div",{className:o.dailyTimestampText},Object(ra.a)(Object(da.a)(c[a].createdAt),"dd/MM/yyyy")))}return a===c.length-1?l.a.createElement("div",{key:"ref-".concat(e.createdAt),ref:E,style:{float:"left",clear:"both"}}):void 0},A=(e,a)=>{if(a<c.length&&a>0){if(c[a].fromMe!==c[a-1].fromMe)return l.a.createElement("span",{style:{marginTop:16},key:"divider-".concat(e.id)})}},N=e=>{var a,t,n,r,c;return l.a.createElement("div",{className:Object(f.a)(o.quotedContainerLeft,{[o.quotedContainerRight]:e.fromMe})},l.a.createElement("span",{className:Object(f.a)(o.quotedSideColorLeft,{[o.quotedSideColorRight]:null===(a=e.quotedMsg)||void 0===a?void 0:a.fromMe})}),l.a.createElement("div",{className:o.quotedMsg},!(null===(t=e.quotedMsg)||void 0===t?void 0:t.fromMe)&&l.a.createElement("span",{className:o.messageContactName},null===(n=e.quotedMsg)||void 0===n||null===(r=n.contact)||void 0===r?void 0:r.name),null===(c=e.quotedMsg)||void 0===c?void 0:c.body))},M=e=>e.includes("BEGIN:VCARD"),R=e=>{const a=null===e||void 0===e?void 0:e.substring(e.indexOf("N:;")+3,e.indexOf(";;;")),t=null===e||void 0===e?void 0:e.substring(e.indexOf("TION:")+5,e.indexOf("TEL"));return l.a.createElement("div",null,l.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginTop:20,marginBottom:20}},l.a.createElement(ga.a,{style:{marginRight:10,marginLeft:20,width:60,height:60}}),l.a.createElement("div",{style:{width:350}},l.a.createElement("div",null,l.a.createElement(w.a,{noWrap:!0,component:"h4",variant:"body2",color:"textPrimary",style:{fontWeight:"700"}},a)),l.a.createElement("div",{style:{width:350}},l.a.createElement(w.a,{component:"span",variant:"body2",color:"textPrimary",style:{display:"flex"}},t)))),l.a.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",marginTop:20,borderWidth:"1px 0 0 0",borderTopColor:"#bdbdbd",borderStyle:"solid",padding:8}},l.a.createElement(w.a,{noWrap:!0,component:"h4",variant:"body2",color:"textPrimary",style:{fontWeight:"700",color:"#2c9ce7"}},"Conversar")))},D=(e,a)=>l.a.createElement("div",{className:[o.textContentItem,{display:"flex",padding:5}]},l.a.createElement("img",{src:e.split("|")[0],className:o.imageLocation}),l.a.createElement("a",{style:{fontWeight:"700",color:"gray"},target:"_blank",href:e.split("|")[1]}," Clique para ver localiza\xe7\xe3o"),l.a.createElement("span",{className:o.timestamp},Object(ra.a)(Object(da.a)(a),"HH:mm")));return l.a.createElement("div",{className:o.messagesListWrapper},l.a.createElement(sl,{message:b,anchorEl:y,menuOpen:O,handleClose:e=>{v(null)}}),l.a.createElement("div",{id:"messagesList",className:o.messagesList,onScroll:e=>{if(!d)return;const{scrollTop:a}=e.currentTarget;0===a&&(document.getElementById("messagesList").scrollTop=1),p||a<50&&m(e=>e+1)}},c.length>0?(()=>{if(c.length>0){return c.map((e,a)=>{var t,n,c;return e.fromMe?l.a.createElement(l.a.Fragment,{key:e.id},I(e,a),A(e,a),l.a.createElement("div",{className:o.messageRight,title:e.queueId&&(null===(t=e.queue)||void 0===t?void 0:t.name)},l.a.createElement(C.a,{variant:"contained",size:"small",id:"messageActionsButton",disabled:e.isDeleted,className:o.messageActionsButton,onClick:a=>k(a,e)},l.a.createElement(al.a,null)),e.mediaUrl&&T(e),l.a.createElement("div",{className:Object(f.a)(o.textContentItem,{[o.textContentItemDeleted]:e.isDeleted})},e.isDeleted&&l.a.createElement(tl.a,{color:"disabled",fontSize:"small",className:o.deletedIcon}),e.body.includes("data:image")?D(e.body,e.createdAt):M(e.body)?l.a.createElement("div",{className:[o.textContentItem]},R(e.body)):e.quotedMsg&&N(e),l.a.createElement(ka,null,e.body),l.a.createElement("span",{className:o.timestamp},Object(ra.a)(Object(da.a)(e.createdAt),"HH:mm"),(e=>0===e.ack?l.a.createElement(Xn.a,{fontSize:"small",className:o.ackIcons}):1===e.ack?l.a.createElement($n.a,{fontSize:"small",className:o.ackIcons}):2===e.ack?l.a.createElement(el.a,{fontSize:"small",className:o.ackIcons}):3===e.ack||4===e.ack?l.a.createElement(el.a,{fontSize:"small",className:o.ackDoneAllIcon}):void 0)(e))))):l.a.createElement(l.a.Fragment,{key:e.id},I(e,a),A(e,a),l.a.createElement("div",{className:o.messageLeft,title:e.queueId&&(null===(n=e.queue)||void 0===n?void 0:n.name)},l.a.createElement(C.a,{variant:"contained",size:"small",id:"messageActionsButton",disabled:e.isDeleted,className:o.messageActionsButton,onClick:a=>k(a,e)},l.a.createElement(al.a,null)),r&&l.a.createElement("span",{className:o.messageContactName},null===(c=e.contact)||void 0===c?void 0:c.name),e.mediaUrl&&T(e),e.body.includes("data:image")?D(e.body,e.createdAt):M(e.body)?l.a.createElement("div",{className:[o.textContentItem,{marginRight:0}]},R(e.body)):l.a.createElement("div",{className:o.textContentItem},e.quotedMsg&&N(e),l.a.createElement(ka,null,e.body),l.a.createElement("span",{className:o.timestamp},Object(ra.a)(Object(da.a)(e.createdAt),"HH:mm")))))})}return l.a.createElement("div",null,"Say hello to your new contact!")})():[]),"whatsapp"!==(null===a||void 0===a?void 0:a.channel)&&l.a.createElement("div",{style:{width:"100%",display:"flex",padding:"10px",alignItems:"center",backgroundColor:"#E1F3FB"}}),p&&l.a.createElement("div",null,l.a.createElement(ha.a,{className:o.circleLoading})))};const El=Object(y.a)(e=>({ticketHeader:{display:"flex",background:e.palette.total,flex:"none",borderBottom:"1px solid rgba(0, 0, 0, 0.12)"}}));var bl=()=>{const e=El();return l.a.createElement(Xt.a,{square:!0,className:e.ticketHeader},l.a.createElement($t.a,{titleTypographyProps:{noWrap:!0},subheaderTypographyProps:{noWrap:!0},avatar:l.a.createElement(en.a,{animation:"wave",variant:"circle"},l.a.createElement(ga.a,{alt:"contact_image"})),title:l.a.createElement(en.a,{animation:"wave",width:80}),subheader:l.a.createElement(en.a,{animation:"wave",width:140})}))};const hl=Object(y.a)(e=>({ticketHeader:{display:"flex",background:e.palette.total,flex:"none",borderBottom:"1px solid rgba(0, 0, 0, 0.12)"}}));var fl=e=>{let{loading:a,children:t}=e;const n=hl();return l.a.createElement(l.a.Fragment,null,a?l.a.createElement(bl,null):l.a.createElement(Xt.a,{square:!0,className:n.ticketHeader},t))};var yl=e=>{let{contact:a,ticket:t,onClick:r}=e;const{user:o}=t,[c,i]=Object(n.useState)(""),[s,m]=Object(n.useState)("");return Object(n.useEffect)(()=>{if(a&&(m(a.name),document.body.offsetWidth<600&&a.name.length>10)){const e=a.name.substring(0,10)+"...";m(e)}o&&a&&(i("".concat(Me.a.t("messagesList.header.assignedTo")," ").concat(o.name)),document.body.offsetWidth<600&&i("".concat(o.name)))},[]),l.a.createElement($t.a,{onClick:r,style:{cursor:"pointer"},titleTypographyProps:{noWrap:!0},subheaderTypographyProps:{noWrap:!0},avatar:l.a.createElement(ga.a,{src:a.profilePicUrl,alt:"contact_image"}),title:"".concat(s," #").concat(t.id),subheader:t.user&&"".concat(c)})};const vl=Object(y.a)(e=>({root:{display:"flex",height:"100%",position:"relative",overflow:"hidden"},mainWrapper:{flex:1,height:"100%",display:"flex",flexDirection:"column",overflow:"hidden",borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:"0",marginRight:-320,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},mainWrapperShift:{borderTopRightRadius:0,borderBottomRightRadius:0,transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0}}));function Ol(e){let{open:a,handleClose:t,ticketId:r}=e;const o=Object(E.g)(),c=vl(),{user:i}=Object(n.useContext)(Xe),[,s]=Object(n.useState)(!1),[m,d]=Object(n.useState)(!0),[u,p]=Object(n.useState)({}),[g,f]=Object(n.useState)({});Object(n.useEffect)(()=>{let e=null;return a&&(d(!0),e=setTimeout(()=>{(async()=>{try{const{data:e}=await Be.get("/tickets/"+r),{queueId:a}=e,{queues:t,profile:n}=i;if(void 0===t.find(e=>e.id===a)&&"admin"!==n)return b.b.error("Acesso n\xe3o permitido"),void o.push("/tickets");p(e.contact),f(e),d(!1)}catch(e){d(!1),Pe(e)}})()},500)),()=>{null!==e&&clearTimeout(e)}},[r,i,o,a]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId");let t=null;return a&&(t=He({companyId:e}),t.on("connect",()=>t.emit("joinChatBox","".concat(g.id))),t.on("company-".concat(e,"-ticket"),e=>{"update"===e.action&&f(e.ticket),"delete"===e.action&&(b.b.success("Ticket deleted sucessfully."),o.push("/tickets"))}),t.on("company-".concat(e,"-contact"),e=>{"update"===e.action&&p(a=>{var t;return a.id===(null===(t=e.contact)||void 0===t?void 0:t.id)?Object(h.a)(Object(h.a)({},a),e.contact):a})})),()=>{null!==t&&t.disconnect()}},[r,g,o,a]);const y=()=>{s(!0)};return l.a.createElement(qa.a,{maxWidth:"md",onClose:t,open:a},l.a.createElement(fl,{loading:m},(()=>{if(void 0!==g.user)return l.a.createElement(yl,{contact:u,ticket:g,onClick:y})})()),l.a.createElement(il,null,l.a.createElement(Vn.a,{className:c.root},l.a.createElement(gl,{ticket:g,ticketId:g.id,isGroup:g.isGroup}))),l.a.createElement(Fa.a,null,l.a.createElement(ba.a,{onClick:t,color:"primary"},"Fechar")))}var Cl=t(348),xl=t.n(Cl),Sl=t(367),jl=t.n(Sl);const kl=Object(y.a)(e=>({ticket:{position:"relative",height:98,paddingHorizontal:10,paddingVertical:0},pendingTicket:{cursor:"unset"},noTicketsDiv:{display:"flex",height:"100px",margin:40,flexDirection:"column",alignItems:"center",justifyContent:"center"},noTicketsText:{textAlign:"center",color:"rgb(104, 121, 146)",fontSize:"14px",lineHeight:"1.4"},noTicketsTitle:{textAlign:"center",fontSize:"16px",fontWeight:"600",margin:"0px"},contactNameWrapper:{display:"flex",justifyContent:"space-between"},lastMessageTime:{justifySelf:"flex-end",textAlign:"right",position:"relative",top:-23,fontSize:12},closedBadge:{alignSelf:"center",justifySelf:"flex-end",marginRight:32,marginLeft:"auto"},contactLastMessage:{paddingRight:"50%"},newMessagesCount:{alignSelf:"center",marginRight:0,marginLeft:"auto",top:-10,right:10},badgeStyle:{color:"white",backgroundColor:ua.a[500],right:0,top:10},acceptButton:{position:"absolute",right:"108px"},ticketQueueColor:{flex:"none",width:"8px",height:"100%",position:"absolute",top:"0%",left:"0%"},ticketInfo:{position:"relative",top:0},ticketInfo1:{position:"relative",top:40,right:0},Radiusdot:{"& .MuiBadge-badge":{borderRadius:2,position:"inherit",height:16,margin:2,padding:3,fontSize:10},"& .MuiBadge-anchorOriginTopRightRectangle":{transform:"scale(1) translate(0%, -40%)"}}}));var wl=e=>{var a,t,r,o;let{ticket:c,setUpdate:i}=e;const s=kl(),m=Object(E.g)(),[d,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)(null),[b,h]=Object(n.useState)(null),[y,v]=Object(n.useState)(!1),{ticketId:O}=Object(E.h)(),C=Object(n.useRef)(!0),{setCurrentTicket:S}=Object(n.useContext)(Hn),{user:j}=Object(n.useContext)(Xe),{profile:k}=j;Object(n.useEffect)(()=>{},[]),Object(n.useEffect)(()=>(c.userId&&c.user&&g(c.user.name),c.whatsappId&&c.whatsapp&&h(c.whatsapp.name),()=>{C.current=!1}),[]);const T=async e=>{u(!0);try{await Be.put("/tickets/".concat(e),{status:"closed",justClose:!0,userId:null===j||void 0===j?void 0:j.id})}catch(a){u(!1),Pe(a)}C.current&&u(!1),m.push("/tickets/"),i(Math.random()),u(!1)};return l.a.createElement(l.a.Fragment,{key:c.id},l.a.createElement(Ol,{open:y,handleClose:()=>v(!1),ticketId:c.id}),l.a.createElement(P.a,{dense:!0,button:!0,onClick:e=>{"pending"!==c.status&&(e=>{const a=Object(Gn.a)(),{id:t,uuid:n}=e;S({id:t,uuid:n,code:a})})(c)},selected:O&&+O===c.id,className:Object(f.a)(s.ticket,{[s.pendingTicket]:"pending"===c.status})},l.a.createElement(wa.a,{arrow:!0,placement:"right",title:(null===(a=c.queue)||void 0===a?void 0:a.name)||"Sem fila"},l.a.createElement("span",{style:{backgroundColor:(null===(t=c.queue)||void 0===t?void 0:t.color)||"#7C7C7C"},className:s.ticketQueueColor})),l.a.createElement(pa.a,null,l.a.createElement(ga.a,{src:null===c||void 0===c||null===(r=c.contact)||void 0===r?void 0:r.profilePicUrl})),l.a.createElement(q.a,{disableTypography:!0,primary:l.a.createElement("span",{className:s.contactNameWrapper},l.a.createElement(w.a,{noWrap:!0,component:"span",variant:"body2",color:"textPrimary"},"whatsapp"===c.channel&&l.a.createElement(wa.a,{title:"Atribuido \xe0 ".concat(p)},l.a.createElement(V.a,{fontSize:"inherit",style:{color:zt.a[700]}}))," ",c.contact.name)),secondary:l.a.createElement("span",{className:s.contactNameWrapper},l.a.createElement(w.a,{className:s.contactLastMessage,noWrap:!0,component:"span",variant:"body2",color:"textSecondary"}," ",c.lastMessage.includes("data:image/png;base64")?l.a.createElement(ka,null," Localiza\xe7\xe3o"):l.a.createElement(ka,null,c.lastMessage)),l.a.createElement(Un.a,{style:{left:73}},l.a.createElement(Vn.a,{className:s.ticketInfo1},(()=>{var e,a,t,n,r,o;return p?l.a.createElement(l.a.Fragment,null,l.a.createElement(B.a,{className:s.Radiusdot,badgeContent:"".concat(p),style:{backgroundColor:"#3498db",height:18,padding:5,position:"inherit",borderRadius:7,color:"#fff",top:-6,marginRight:3}}),c.whatsappId&&l.a.createElement(B.a,{className:s.Radiusdot,badgeContent:"".concat(b),style:{backgroundColor:"#7d79f2",height:18,padding:5,position:"inherit",borderRadius:7,color:"white",top:-6,marginRight:3}}),null!==(null===(e=c.queue)||void 0===e?void 0:e.name)&&l.a.createElement(B.a,{className:s.Radiusdot,style:{backgroundColor:(null===(a=c.queue)||void 0===a?void 0:a.color)||"#7C7C7C",height:18,padding:5,position:"inherit",borderRadius:7,color:"white",top:-6,marginRight:3},badgeContent:(null===(t=c.queue)||void 0===t?void 0:t.name)||"Sem fila"}),"open"===c.status&&l.a.createElement(wa.a,{title:"Fechar Conversa"},l.a.createElement(jl.a,{onClick:()=>T(c.id),fontSize:"small",style:{color:"#fff",backgroundColor:mn.a[700],cursor:"pointer",padding:2,height:23,width:23,fontSize:12,borderRadius:50,position:"absolute",right:0,top:-8}})),"admin"===k&&l.a.createElement(wa.a,{title:"Espiar Conversa"},l.a.createElement(Zn.a,{onClick:()=>v(!0),fontSize:"small",style:{padding:2,height:23,width:23,fontSize:12,color:"#fff",cursor:"pointer",backgroundColor:Bt.a[700],borderRadius:50,position:"absolute",right:28,top:-8}})),c.chatbot&&l.a.createElement(wa.a,{title:"Chatbot"},l.a.createElement(Qn.a,{fontSize:"small",style:{color:zt.a[700],marginRight:5}}))):l.a.createElement(l.a.Fragment,null,c.whatsappId&&l.a.createElement(B.a,{className:s.Radiusdot,badgeContent:"".concat(b),style:{backgroundColor:"#7d79f2",height:18,padding:5,position:"inherit",borderRadius:7,color:"white",top:-6,marginRight:3}}),null!==(null===(n=c.queue)||void 0===n?void 0:n.name)&&l.a.createElement(B.a,{className:s.Radiusdot,style:{backgroundColor:(null===(r=c.queue)||void 0===r?void 0:r.color)||"#7C7C7C",height:18,padding:5,paddingHorizontal:12,position:"inherit",borderRadius:7,color:"white",top:-6,marginRight:2},badgeContent:(null===(o=c.queue)||void 0===o?void 0:o.name)||"Sem fila"}),"pending"===c.status&&l.a.createElement(wa.a,{title:"Fechar Conversa"},l.a.createElement(jl.a,{onClick:()=>T(c.id),fontSize:"small",style:{color:"#fff",backgroundColor:mn.a[700],cursor:"pointer",margin:"0 5 0 5",padding:2,right:48,height:23,width:23,fontSize:12,borderRadius:50,top:-8,position:"absolute"}})),c.chatbot&&l.a.createElement(wa.a,{title:"Chatbot"},l.a.createElement(Qn.a,{fontSize:"small",style:{color:zt.a[700],marginRight:5}})),"open"===c.status&&l.a.createElement(wa.a,{title:"Fechar Conversa"},l.a.createElement(jl.a,{onClick:()=>T(c.id),fontSize:"small",style:{color:mn.a[700],cursor:"pointer",marginRight:5,right:49,top:-8,position:"absolute"}})),"pending"===c.status&&l.a.createElement(wa.a,{title:"Aceitar Conversa"},l.a.createElement(xl.a,{onClick:()=>(async e=>{u(!0);try{await Be.put("/tickets/".concat(e),{status:"open",userId:null===j||void 0===j?void 0:j.id})}catch(a){u(!1),Pe(a)}C.current&&u(!1),m.push("/tickets/".concat(c.uuid)),i(Math.random()),u(!1)})(c.id),fontSize:"small",style:{color:"#fff",backgroundColor:ua.a[700],cursor:"pointer",padding:2,height:23,width:23,fontSize:12,borderRadius:50,right:25,top:-8,position:"absolute"}})),"admin"===k&&l.a.createElement(wa.a,{title:"Espiar Conversa"},l.a.createElement(Zn.a,{onClick:()=>v(!0),fontSize:"small",style:{padding:2,height:23,width:23,fontSize:12,color:"#fff",cursor:"pointer",backgroundColor:Bt.a[700],borderRadius:50,right:0,top:-8,position:"absolute"}})))})())))}),l.a.createElement(Un.a,{style:{}},"closed"===c.status&&l.a.createElement(B.a,{className:s.Radiusdot,badgeContent:"FECHADO",style:{backgroundColor:(null===(o=c.queue)||void 0===o?void 0:o.color)||"#ff0000",height:18,padding:5,paddingHorizontal:12,borderRadius:7,color:"white",top:-28,marginRight:5}}),c.lastMessage&&l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{className:s.lastMessageTime,component:"span",variant:"body2",color:"textSecondary"},Object(ma.a)(Object(da.a)(c.updatedAt),new Date)?l.a.createElement(l.a.Fragment,null,Object(ra.a)(Object(da.a)(c.updatedAt),"HH:mm")):l.a.createElement(l.a.Fragment,null,Object(ra.a)(Object(da.a)(c.updatedAt),"dd/MM/yyyy"))),l.a.createElement(B.a,{className:s.newMessagesCount,badgeContent:c.unreadMessages?c.unreadMessages:null,classes:{badge:s.badgeStyle}}),l.a.createElement("br",null)))),l.a.createElement(x.a,{variant:"inset",component:"li"}))};var Tl=()=>l.a.createElement(l.a.Fragment,null,l.a.createElement(P.a,{dense:!0},l.a.createElement(pa.a,null,l.a.createElement(en.a,{animation:"wave",variant:"circle",width:40,height:40})),l.a.createElement(q.a,{primary:l.a.createElement(en.a,{animation:"wave",height:20,width:60}),secondary:l.a.createElement(en.a,{animation:"wave",height:20,width:90})})),l.a.createElement(x.a,{variant:"inset"}),l.a.createElement(P.a,{dense:!0},l.a.createElement(pa.a,null,l.a.createElement(en.a,{animation:"wave",variant:"circle",width:40,height:40})),l.a.createElement(q.a,{primary:l.a.createElement(en.a,{animation:"wave",height:20,width:70}),secondary:l.a.createElement(en.a,{animation:"wave",height:20,width:120})})),l.a.createElement(x.a,{variant:"inset"}),l.a.createElement(P.a,{dense:!0},l.a.createElement(pa.a,null,l.a.createElement(en.a,{animation:"wave",variant:"circle",width:40,height:40})),l.a.createElement(q.a,{primary:l.a.createElement(en.a,{animation:"wave",height:20,width:60}),secondary:l.a.createElement(en.a,{animation:"wave",height:20,width:90})})),l.a.createElement(x.a,{variant:"inset"}));const Il=Object(y.a)(e=>({ticketsListWrapper:{position:"relative",display:"flex",height:"100%",flexDirection:"column",overflow:"hidden",borderTopRightRadius:0,borderBottomRightRadius:0},ticketsList:Object(h.a)(Object(h.a)({flex:1,maxHeight:"100%",overflowY:"scroll"},e.scrollbarStyles),{},{borderTop:"2px solid rgba(0, 0, 0, 0.12)"}),ticketsListHeader:{color:"rgb(67, 83, 105)",zIndex:2,backgroundColor:"white",borderBottom:"1px solid rgba(0, 0, 0, 0.12)",display:"flex",alignItems:"center",justifyContent:"space-between"},ticketsCount:{fontWeight:"normal",color:"rgb(104, 121, 146)",marginLeft:"8px",fontSize:"14px"},noTicketsText:{textAlign:"center",color:"rgb(104, 121, 146)",fontSize:"14px",lineHeight:"1.4"},noTicketsTitle:{textAlign:"center",fontSize:"16px",fontWeight:"600",margin:"0px"},noTicketsDiv:{display:"flex",height:"100px",margin:40,flexDirection:"column",alignItems:"center",justifyContent:"center"}})),Al=(e,a)=>{if("LOAD_TICKETS"===a.type){return a.payload.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?(e[t]=a,a.unreadMessages>0&&e.unshift(e.splice(t,1)[0])):e.push(a)}),[...e]}if("RESET_UNREAD"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&(e[n].unreadMessages=0),[...e]}if("UPDATE_TICKET"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?e[n]=t:e.unshift(t),[...e]}if("UPDATE_TICKET_UNREAD_MESSAGES"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,e.unshift(e.splice(n,1)[0])):e.unshift(t),[...e]}if("UPDATE_TICKET_CONTACT"===a.type){const t=a.payload,n=e.findIndex(e=>e.contactId===t.id);return-1!==n&&(e[n].contact=t),[...e]}if("DELETE_TICKET"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]};var Nl=e=>{const{status:a,searchParam:t,tags:r,users:o,showAll:c,selectedQueueIds:i,updateCount:s,style:m}=e,d=Il(),[u,p]=Object(n.useState)(1),[g,E]=Object(n.useState)(0),[b,h]=Object(n.useReducer)(Al,[]),[f,y]=Object(n.useState)([]),{user:v}=Object(n.useContext)(Xe),{profile:O,queues:C}=v;Object(n.useEffect)(()=>{h({type:"RESET"}),p(1)},[a,t,h,c,r,o,i]);const{tickets:x,hasMore:j,loading:k}=Aa({pageNumber:u,searchParam:t,status:a,showAll:c,tags:JSON.stringify(r),users:JSON.stringify(o),queueIds:JSON.stringify(i)});Object(n.useEffect)(()=>{const e=C.map(e=>e.id),a=x.filter(a=>e.indexOf(a.queueId)>-1);h("user"===O?{type:"LOAD_TICKETS",payload:a}:{type:"LOAD_TICKETS",payload:x})},[x,a,t,C,O]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),t=He({companyId:e}),n=e=>(!e.userId||e.userId===(null===v||void 0===v?void 0:v.id)||c)&&(!e.queueId||i.indexOf(e.queueId)>-1);return t.on("connect",()=>{a?t.emit("joinTickets",a):t.emit("joinNotification")}),t.on("company-".concat(e,"-ticket"),e=>{var a,t;("updateUnread"===e.action&&h({type:"RESET_UNREAD",payload:e.ticketId}),"update"===e.action&&n(e.ticket)&&h({type:"UPDATE_TICKET",payload:e.ticket}),"update"===e.action&&((t=e.ticket).queueId&&-1===i.indexOf(t.queueId)))&&h({type:"DELETE_TICKET",payload:null===(a=e.ticket)||void 0===a?void 0:a.id});"delete"===e.action&&h({type:"DELETE_TICKET",payload:null===e||void 0===e?void 0:e.ticketId}),"removeFromList"===e.action&&h({type:"DELETE_TICKET",payload:e.ticketId})}),t.on("company-".concat(e,"-appMessage"),e=>{var a;const t=C.map(e=>e.id);("user"!==O||-1!==t.indexOf(null===(a=e.ticket.queue)||void 0===a?void 0:a.id)&&null!==e.ticket.queue)&&"create"===e.action&&n(e.ticket)&&h({type:"UPDATE_TICKET_UNREAD_MESSAGES",payload:e.ticket})}),t.on("company-".concat(e,"-contact"),e=>{"update"===e.action&&h({type:"UPDATE_TICKET_CONTACT",payload:e.contact})}),()=>{t.disconnect()}},[a,c,v,i,r,o,O,C]),Object(n.useEffect)(()=>{"function"===typeof s&&s(b.length)},[b]);return l.a.createElement(lt.a,{className:d.ticketsListWrapper,style:m},l.a.createElement(lt.a,{square:!0,name:"closed",elevation:0,className:d.ticketsList,onScroll:e=>{if(!j||k)return;const{scrollTop:a,scrollHeight:t,clientHeight:n}=e.currentTarget;t-(a+100)<n&&p(e=>e+1)}},l.a.createElement(S.a,{style:{paddingTop:0}},0!==b.length||k?l.a.createElement(l.a.Fragment,null,b.map(e=>l.a.createElement(wl,{ticket:e,setUpdate:E,key:e.id}))):l.a.createElement("div",{className:d.noTicketsDiv},l.a.createElement("span",{className:d.noTicketsTitle},Me.a.t("ticketsList.noTicketsTitle")),l.a.createElement("p",{className:d.noTicketsText},Me.a.t("ticketsList.noTicketsMessage"))),k&&l.a.createElement(Tl,null))))};const Ml=["children","value","name"];var Rl=e=>{let{children:a,value:t,name:n}=e,r=Object(Ea.a)(e,Ml);return t===n?l.a.createElement("div",Object.assign({role:"tabpanel",id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},r),l.a.createElement(l.a.Fragment,null,a)):null},Dl=t(1257);var Ll=e=>{let{userQueues:a,selectedQueueIds:t=[],onChange:n}=e;return l.a.createElement("div",{style:{width:120,marginTop:-4}},l.a.createElement(Ha.a,{fullWidth:!0,margin:"dense"},l.a.createElement(Ua.a,{multiple:!0,displayEmpty:!0,variant:"outlined",value:t,onChange:e=>{n(e.target.value)},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},renderValue:()=>Me.a.t("ticketsQueueSelect.placeholder")},(null===a||void 0===a?void 0:a.length)>0&&a.map(e=>l.a.createElement(I.a,{dense:!0,key:e.id,value:e.id},l.a.createElement(Dl.a,{style:{color:e.color},size:"small",color:"primary",checked:t.indexOf(e.id)>-1}),l.a.createElement(q.a,{primary:e.name}))))))};function Pl(e){let{onFiltered:a}=e;const[t,r]=Object(n.useState)([]),[o,c]=Object(n.useState)([]);Object(n.useEffect)(()=>{!async function(){await i()}()},[]);const i=async()=>{try{const{data:e}=await Be.get("/tags/list");r(e)}catch(e){Pe(e)}};return l.a.createElement(Vn.a,{style:{padding:10}},l.a.createElement(Dn.a,{multiple:!0,size:"small",options:t,value:o,onChange:(e,t,n)=>(async e=>{c(e),a(e)})(t),getOptionLabel:e=>e.name,renderTags:(e,a)=>e.map((e,t)=>l.a.createElement(Ya.a,Object.assign({variant:"outlined",style:{backgroundColor:e.color||"#eee",textShadow:"1px 1px 1px #000",color:"white"},label:e.name},a({index:t}),{size:"small"}))),renderInput:e=>l.a.createElement(Wa.a,Object.assign({},e,{variant:"outlined",placeholder:"Filtro por Tags"}))}))}function Wl(e){let{onFiltered:a,initialUsers:t}=e;const[r,o]=Object(n.useState)([]),[c,i]=Object(n.useState)([]);Object(n.useEffect)(()=>{!async function(){await s()}()},[]),Object(n.useEffect)(()=>{i([]),Array.isArray(t)&&Array.isArray(r)&&r.length>0&&m(t)},[t,r]);const s=async()=>{try{const{data:e}=await Be.get("/users/list"),a=e.map(e=>({id:e.id,name:e.name}));o(a)}catch(e){Pe(e)}},m=async e=>{i(e),a(e)};return l.a.createElement(Vn.a,{style:{padding:"0px 10px 10px"}},l.a.createElement(Dn.a,{multiple:!0,size:"small",options:r,value:c,onChange:(e,a,t)=>m(a),getOptionLabel:e=>e.name,getOptionSelected:(e,a)=>(null===e||void 0===e?void 0:e.id)===(null===a||void 0===a?void 0:a.id)||(null===e||void 0===e?void 0:e.name.toLowerCase())===(null===a||void 0===a?void 0:a.name.toLowerCase()),renderTags:(e,a)=>e.map((e,t)=>l.a.createElement(Ya.a,Object.assign({variant:"outlined",style:{backgroundColor:"#bfbfbf",textShadow:"1px 1px 1px #000",color:"white"},label:e.name},a({index:t}),{size:"small"}))),renderInput:e=>l.a.createElement(Wa.a,Object.assign({},e,{variant:"outlined",placeholder:"Filtro por Users"}))}))}const ql=Object(y.a)(e=>({ticketsWrapper:{position:"relative",display:"flex",height:"100%",flexDirection:"column",overflow:"hidden",borderTopRightRadius:0,borderBottomRightRadius:0},tabsHeader:{flex:"none",backgroundColor:e.palette.tabHeaderBackground},settingsIcon:{alignSelf:"center",marginLeft:"auto",padding:8},tab:{minWidth:120,width:120},ticketOptionsBox:{display:"flex",justifyContent:"space-between",alignItems:"center",background:e.palette.optionsBackground,padding:e.spacing(1)},serachInputWrapper:{flex:1,background:e.palette.total,display:"flex",borderRadius:40,padding:4,marginRight:e.spacing(1)},searchIcon:{color:"grey",marginLeft:6,marginRight:6,alignSelf:"center"},searchInput:{flex:1,border:"none",borderRadius:30},badge:{right:"-10px"},show:{display:"block"},hide:{display:"none !important"}}));var Fl=()=>{const e=ql(),a=Object(E.g)(),[t,r]=Object(n.useState)(""),[o,c]=Object(n.useState)("open"),[i,s]=Object(n.useState)("open"),[m,d]=Object(n.useState)(!1),[u,p]=Object(n.useState)(!1),g=Object(n.useRef)(),{user:b}=Object(n.useContext)(Xe),{profile:h}=b,[f,y]=Object(n.useState)(0),[v,O]=Object(n.useState)(0),C=b.queues.map(e=>e.id),[x,S]=Object(n.useState)(C||[]),[j,k]=Object(n.useState)([]),[w,T]=Object(n.useState)([]);let I;Object(n.useEffect)(()=>{"ADMIN"===b.profile.toUpperCase()&&p(!0)},[]),Object(n.useEffect)(()=>{"search"===o&&g.current.focus()},[o]);const A=e=>{if(i!==e)return{width:0,height:0}};return l.a.createElement(lt.a,{elevation:0,variant:"outlined",className:e.ticketsWrapper},l.a.createElement(Bn,{modalOpen:m,onClose:e=>{console.log("ticket",e),(e=>{d(!1),void 0!==e&&void 0!==e.uuid&&a.push("/tickets/".concat(e.uuid))})(e)}}),l.a.createElement(lt.a,{elevation:0,square:!0,className:e.tabsHeader},l.a.createElement(jn.a,{value:o,onChange:(e,a)=>{c(a)},variant:"fullWidth",indicatorColor:"primary",textColor:"primary","aria-label":"icon label tabs example"},l.a.createElement(kn.a,{value:"open",icon:l.a.createElement(Tn.a,null),label:Me.a.t("tickets.tabs.open.title"),classes:{root:e.tab}}),l.a.createElement(kn.a,{value:"closed",icon:l.a.createElement(An.a,null),label:Me.a.t("tickets.tabs.closed.title"),classes:{root:e.tab}}),l.a.createElement(kn.a,{value:"search",icon:l.a.createElement(xn.a,null),label:Me.a.t("tickets.tabs.search.title"),classes:{root:e.tab}}))),l.a.createElement(lt.a,{square:!0,elevation:0,className:e.ticketOptionsBox},"search"===o?l.a.createElement("div",{className:e.serachInputWrapper},l.a.createElement(xn.a,{className:e.searchIcon}),l.a.createElement(Sn.a,{className:e.searchInput,inputRef:g,placeholder:Me.a.t("tickets.search.placeholder"),type:"search",onChange:e=>{const a=e.target.value.toLowerCase();if(clearTimeout(I),""===a)return r(a),void c("open");I=setTimeout(()=>{r(a)},500)}})):l.a.createElement(l.a.Fragment,null,l.a.createElement(ba.a,{variant:"outlined",color:"primary",onClick:()=>d(!0)},Me.a.t("ticketsManager.buttons.newTicket")),l.a.createElement(aa,{role:b.profile,perform:"tickets-manager:showall",yes:()=>l.a.createElement(Nn.a,{label:Me.a.t("tickets.buttons.showAll"),labelPlacement:"start",control:l.a.createElement(Mn.a,{size:"small",checked:u,onChange:()=>p(e=>!e),name:"showAllTickets",color:"primary"})})})),l.a.createElement(Ll,{style:{marginLeft:6},selectedQueueIds:x,userQueues:null===b||void 0===b?void 0:b.queues,onChange:e=>S(e)})),l.a.createElement(Rl,{value:o,name:"open",className:e.ticketsWrapper},l.a.createElement(jn.a,{value:i,onChange:(e,a)=>{s(a)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},l.a.createElement(kn.a,{label:l.a.createElement(B.a,{className:e.badge,badgeContent:f,color:"primary"},Me.a.t("ticketsList.assignedHeader")),value:"open"}),l.a.createElement(kn.a,{label:l.a.createElement(B.a,{className:e.badge,badgeContent:v,color:"secondary"},Me.a.t("ticketsList.pendingHeader")),value:"pending"})),l.a.createElement(lt.a,{className:e.ticketsWrapper},l.a.createElement(Nl,{status:"open",showAll:u,selectedQueueIds:x,updateCount:e=>y(e),style:A("open")}),l.a.createElement(Nl,{status:"pending",selectedQueueIds:x,updateCount:e=>O(e),style:A("pending")}))),l.a.createElement(Rl,{value:o,name:"closed",className:e.ticketsWrapper},l.a.createElement(Nl,{status:"closed",showAll:!0,selectedQueueIds:x})),l.a.createElement(Rl,{value:o,name:"search",className:e.ticketsWrapper},l.a.createElement(Pl,{onFiltered:e=>{const a=e.map(e=>e.id);k(a)}}),"admin"===h&&l.a.createElement(Wl,{onFiltered:e=>{const a=e.map(e=>e.id);T(a)}}),l.a.createElement(Nl,{searchParam:t,showAll:!0,tags:j,users:w,selectedQueueIds:x})))},zl=t(664),Bl=t.n(zl),Ul=t(1222),Vl=t(665),Hl=t.n(Vl);var Yl=e=>{let{classes:a}=e;return l.a.createElement("div",{className:a.content},l.a.createElement(lt.a,{square:!0,variant:"outlined",className:a.contactHeader},l.a.createElement(kt.a,{container:!0},l.a.createElement(kt.a,{item:!0},l.a.createElement(en.a,{animation:"wave",variant:"circle",width:60,height:60,className:a.contactAvatar})),l.a.createElement(kt.a,{item:!0},l.a.createElement(en.a,{animation:"wave",height:25,width:90}),l.a.createElement(en.a,{animation:"wave",height:25,width:80}),l.a.createElement(en.a,{animation:"wave",height:25,width:80})))),l.a.createElement(lt.a,{square:!0,className:a.contactDetails},l.a.createElement(w.a,{variant:"subtitle1"},Me.a.t("contactDrawer.extraInfo")),l.a.createElement(lt.a,{square:!0,variant:"outlined",className:a.contactExtraInfo},l.a.createElement(en.a,{animation:"wave",height:20,width:60}),l.a.createElement(en.a,{animation:"wave",height:20,width:160})),l.a.createElement(lt.a,{square:!0,variant:"outlined",className:a.contactExtraInfo},l.a.createElement(en.a,{animation:"wave",height:20,width:60}),l.a.createElement(en.a,{animation:"wave",height:20,width:160})),l.a.createElement(lt.a,{square:!0,variant:"outlined",className:a.contactExtraInfo},l.a.createElement(en.a,{animation:"wave",height:20,width:60}),l.a.createElement(en.a,{animation:"wave",height:20,width:160}))))};const Gl=Object(y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:ua.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},textCenter:{backgroundColor:"red"}})),_l=La.b().shape({name:La.c().min(2,"Too Short!").max(50,"Too Long!").required("Required"),number:La.c().min(8,"Too Short!").max(50,"Too Long!"),email:La.c().email("Invalid email")});function Ql(e){let{initialContact:a,onSave:t,onCancel:r}=e;const o=Gl(),[c,i]=Object(n.useState)(a);Object(n.useEffect)(()=>{i(a)},[a]);return l.a.createElement(Pa.e,{initialValues:c,enableReinitialize:!0,validationSchema:_l,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{try{if(c.id)await Be.put("/contacts/".concat(c.id),e);else{const{data:a}=await Be.post("/contacts",e);t&&t(a)}b.b.success(Me.a.t("contactModal.success"))}catch(a){Pe(a)}})(e),a.setSubmitting(!1)},400)}},e=>{let{values:a,errors:t,touched:n,isSubmitting:i}=e;return l.a.createElement(Pa.d,null,l.a.createElement(kt.a,{container:!0,spacing:1},l.a.createElement(kt.a,{item:!0,xs:12},l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("contactModal.form.name"),name:"name",autoFocus:!0,error:n.name&&Boolean(t.name),helperText:n.name&&t.name,variant:"outlined",margin:"dense",className:o.textField,fullWidth:!0})),l.a.createElement(kt.a,{item:!0,xs:12},l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("contactModal.form.number"),name:"number",error:n.number&&Boolean(t.number),helperText:n.number&&t.number,placeholder:"5513912344321",variant:"outlined",margin:"dense",fullWidth:!0})),l.a.createElement(kt.a,{item:!0,xs:12},l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("contactModal.form.email"),name:"email",error:n.email&&Boolean(t.email),helperText:n.email&&t.email,placeholder:"Email address",fullWidth:!0,margin:"dense",variant:"outlined"})),l.a.createElement(kt.a,{item:!0,xs:12,spacing:1},l.a.createElement(kt.a,{container:!0,spacing:1},l.a.createElement(kt.a,{xs:6,item:!0},l.a.createElement(ba.a,{onClick:r,color:"secondary",disabled:i,variant:"outlined",fullWidth:!0},Me.a.t("contactModal.buttons.cancel"))),l.a.createElement(kt.a,{classes:o.textCenter,xs:6,item:!0},l.a.createElement(ba.a,{type:"submit",color:"primary",disabled:i,variant:"contained",className:o.btnWrapper,fullWidth:!0},c.id?"".concat(Me.a.t("contactModal.buttons.okEdit")):"".concat(Me.a.t("contactModal.buttons.okAdd")),i&&l.a.createElement(ha.a,{size:24,className:o.buttonProgress})))))))})}var Kl=t(235),Zl=t.n(Kl);const Jl=Object(y.a)(e=>({inline:{width:"100%"}}));function Xl(e){const{note:a,deleteItem:t}=e,n=Jl();return l.a.createElement(P.a,{alignItems:"flex-start"},l.a.createElement(pa.a,null,l.a.createElement(ga.a,{alt:a.user.name,src:"/static/images/avatar/1.jpg"})),l.a.createElement(q.a,{primary:l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{component:"span",variant:"body2",className:n.inline,color:"textPrimary"},a.note)),secondary:l.a.createElement(l.a.Fragment,null,a.user.name,", ",Ze()(a.createdAt).format("DD/MM/YY HH:mm"))}),l.a.createElement(Un.a,null,l.a.createElement(C.a,{onClick:()=>{t(a)},edge:"end","aria-label":"delete"},l.a.createElement(Zl.a,null))))}var $l=()=>({saveNote:async e=>{const{data:a}=await Be.request({url:"/ticket-notes",method:"POST",data:e});return a},deleteNote:async e=>{const{data:a}=await Be.request({url:"/ticket-notes/".concat(e),method:"DELETE"});return a},listNotes:async e=>{const{data:a}=await Be.request({url:"/ticket-notes/list",method:"GET",params:e});return a}});const er=Object(y.a)(e=>({root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"350px"}},list:{width:"100%",maxWidth:"350px",maxHeight:"200px",backgroundColor:e.palette.background.paper,overflow:"auto"},inline:{width:"100%"}})),ar=La.b().shape({note:La.c().min(2,"Too Short!").required("Required")});function tr(e){let{ticket:a}=e;const{id:t,contactId:r}=a,o=er(),[c,i]=Object(n.useState)({note:""}),[s,m]=Object(n.useState)(!1),[d,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)({}),[E,f]=Object(n.useState)([]),{saveNote:y,deleteNote:v,listNotes:O}=$l();Object(n.useEffect)(()=>{!async function(){C(),await k()}()},[]);const C=()=>{i({note:""}),m(!1)},x=e=>{i({note:e.target.value})},j=e=>{g(e),u(!0)},k=async()=>{m(!0);try{const e=await O({ticketId:t,contactId:r});f(e)}catch(e){b.b.error(e)}m(!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(ol,{title:"Excluir Registro",open:d,onClose:u,onConfirm:async()=>{m(!0);try{await v(p.id),await k(),g({}),b.b.success("Observa\xe7\xe3o exclu\xedda com sucesso!")}catch(e){b.b.error(e)}m(!1)}},"Deseja realmente excluir este registro?"),l.a.createElement(Pa.e,{initialValues:c,enableReinitialize:!0,validationSchema:ar,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{m(!0);try{await y(Object(h.a)(Object(h.a)({},e),{},{ticketId:t,contactId:r})),await k(),i({note:""}),b.b.success("Observa\xe7\xe3o adicionada com sucesso!")}catch(a){b.b.error(a)}m(!1)})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,setErrors:n}=e;return l.a.createElement(Pa.d,null,l.a.createElement(kt.a,{container:!0,spacing:2},l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(Pa.b,{as:Wa.a,name:"note",rows:3,label:Me.a.t("ticketOptionsMenu.appointmentsModal.textarea"),placeholder:Me.a.t("ticketOptionsMenu.appointmentsModal.placeholder"),multiline:!0,error:a.note&&Boolean(t.note),helperText:a.note&&t.note,variant:"outlined",onChange:x,fullWidth:!0})),E.length>0&&l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(S.a,{className:o.list},E.map(e=>l.a.createElement(Xl,{note:e,key:e.id,deleteItem:j})))),l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(kt.a,{container:!0,spacing:2},l.a.createElement(kt.a,{xs:6,item:!0},l.a.createElement(ba.a,{onClick:()=>{i(""),n({})},color:"primary",variant:"outlined",fullWidth:!0},"Cancelar")),l.a.createElement(kt.a,{xs:6,item:!0},l.a.createElement(va,{loading:s,color:"primary",type:"submit",variant:"contained",autoFocus:!0,fullWidth:!0},"Salvar"))))))}))}const nr=Object(y.a)(e=>({drawer:{width:320,flexShrink:0},drawerPaper:{width:320,display:"flex",borderTop:"1px solid rgba(0, 0, 0, 0.12)",borderRight:"1px solid rgba(0, 0, 0, 0.12)",borderBottom:"1px solid rgba(0, 0, 0, 0.12)",borderTopRightRadius:4,borderBottomRightRadius:4},header:{display:"flex",borderBottom:"1px solid rgba(0, 0, 0, 0.12)",background:e.palette.total,alignItems:"center",padding:e.spacing(0,1),minHeight:"73px",justifyContent:"flex-start"},content:Object(h.a)({display:"flex",background:e.palette.total,flexDirection:"column",padding:"8px 0px 8px 8px",height:"100%",overflowY:"scroll"},e.scrollbarStyles),contactAvatar:{margin:15,width:100,height:100},contactHeader:{display:"flex",padding:8,flexDirection:"column",alignItems:"center",justifyContent:"center","& > *":{margin:4}},contactDetails:{marginTop:8,padding:8,display:"flex",flexDirection:"column"},contactExtraInfo:{marginTop:4,padding:6}}));var lr=e=>{var a;let{open:t,handleDrawerClose:r,contact:o,ticket:c,loading:i}=e;const s=nr(),[m,d]=Object(n.useState)(!1),[u,p]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{p(!1)},[t,o]),l.a.createElement(l.a.Fragment,null,l.a.createElement(O.a,{className:s.drawer,variant:"persistent",anchor:"right",open:t,PaperProps:{style:{position:"absolute"}},BackdropProps:{style:{position:"absolute"}},ModalProps:{container:document.getElementById("drawer-container"),style:{position:"absolute"}},classes:{paper:s.drawerPaper}},l.a.createElement("div",{className:s.header},l.a.createElement(C.a,{onClick:r},l.a.createElement(Bl.a,null)),l.a.createElement(w.a,{style:{justifySelf:"center"}},Me.a.t("contactDrawer.header"))),i?l.a.createElement(Yl,{classes:s}):l.a.createElement("div",{className:s.content},l.a.createElement(lt.a,{square:!0,variant:"outlined",className:s.contactHeader},l.a.createElement($t.a,{onClick:()=>{},style:{cursor:"pointer",width:"100%"},titleTypographyProps:{noWrap:!0},subheaderTypographyProps:{noWrap:!0},avatar:l.a.createElement(ga.a,{src:o.profilePicUrl,alt:"contact_image",style:{width:60,height:60}}),title:l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{onClick:()=>p(!0)},o.name,l.a.createElement(Hl.a,{style:{fontSize:16,marginLeft:5}}))),subheader:l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{style:{fontSize:12}},l.a.createElement(Ul.a,{href:"tel:".concat(o.number)},o.number)),l.a.createElement(w.a,{style:{fontSize:12}},l.a.createElement(Ul.a,{href:"mailto:".concat(o.email)},o.email)))}),l.a.createElement(ba.a,{variant:"outlined",color:"primary",onClick:()=>d(!u),style:{fontSize:12}},Me.a.t("contactDrawer.buttons.edit")),o.id&&u&&l.a.createElement(Ql,{initialContact:o,onCancel:()=>p(!1)})),l.a.createElement(lt.a,{square:!0,variant:"outlined",className:s.contactDetails},l.a.createElement(w.a,{variant:"subtitle1",style:{marginBottom:10}},Me.a.t("ticketOptionsMenu.appointmentsModal.title")),l.a.createElement(tr,{ticket:c})),l.a.createElement(lt.a,{square:!0,variant:"outlined",className:s.contactDetails},l.a.createElement(Fn,{open:m,onClose:()=>d(!1),contactId:o.id}),l.a.createElement(w.a,{variant:"subtitle1"},Me.a.t("contactDrawer.extraInfo")),null===o||void 0===o||null===(a=o.extraInfo)||void 0===a?void 0:a.map(e=>l.a.createElement(lt.a,{key:e.id,square:!0,variant:"outlined",className:s.contactExtraInfo},l.a.createElement(Va.a,null,e.name),l.a.createElement(w.a,{component:"div",noWrap:!0,style:{paddingTop:2}},l.a.createElement(ka,null,e.value))))))))},rr=(t(1005),t(702)),or=t(666),cr=t.n(or),ir=t(237),sr=t.n(ir),mr=t(668),dr=t.n(mr),ur=t(238),pr=t.n(ur),gr=t(672),Er=t.n(gr),br=t(435),hr=t.n(br),fr=t(671),yr=t.n(fr),vr=t(670),Or=t.n(vr),Cr=t(669),xr=t.n(Cr);const Sr=Object(y.a)(e=>({timerBox:{display:"flex",marginLeft:10,marginRight:10,alignItems:"center"}}));var jr=()=>{const e=Sr(),[a,t]=Object(n.useState)({minutes:0,seconds:0});Object(n.useEffect)(()=>{const e=setInterval(()=>t(e=>59===e.seconds?Object(h.a)(Object(h.a)({},e),{},{minutes:e.minutes+1,seconds:0}):Object(h.a)(Object(h.a)({},e),{},{seconds:e.seconds+1})),1e3);return()=>{clearInterval(e)}},[]);const r=e=>e<10?"0"+e:e;return l.a.createElement("div",{className:e.timerBox},l.a.createElement("span",null,"".concat(r(a.minutes),":").concat(r(a.seconds))))};var kr=()=>({save:async e=>{const{data:a}=await Be.request({url:"/quick-messages",method:"POST",data:e});return a},update:async e=>{const{data:a}=await Be.request({url:"/quick-messages/".concat(e.id),method:"PUT",data:e});return a},deleteRecord:async e=>{const{data:a}=await Be.request({url:"/quick-messages/".concat(e),method:"DELETE"});return a},list:async e=>{const{data:a}=await Be.request({url:"/quick-messages/list",method:"GET",params:e});return a}}),wr=t(667),Tr=t.n(wr),Ir=t(1223);function Ar(e){return n.createElement(Vn.a,{sx:{display:"flex",alignItems:"center"}},n.createElement(Vn.a,{sx:{width:"100%",mr:1}},n.createElement(Ir.a,Object.assign({variant:"determinate"},e,{style:{position:"initial",backgroundColor:"mediumseagreen"}}))),n.createElement(Vn.a,{sx:{minWidth:35}},n.createElement(w.a,{variant:"body2",color:"text.secondary",style:{color:"#fff",position:"absolute"}},"".concat(Math.round(e.value),"%"))))}function Nr(e){let{progress:a}=e;return n.useEffect(()=>{},[a]),n.createElement(Vn.a,{sx:{width:"100%"}},n.createElement(Ar,{value:a,style:{height:50}}))}const Mr=["InputLabelProps","InputProps"],Rr=new cr.a({bitRate:128}),Dr=Object(y.a)(e=>({mainWrapper:{background:"#eee",display:"flex",flexDirection:"column",alignItems:"center",borderTop:"1px solid rgba(0, 0, 0, 0.12)"},newMessageBox:{background:"#eee",width:"100%",display:"flex",padding:"7px",alignItems:"center"},messageInputWrapper:{padding:6,marginRight:7,background:e.palette.total,display:"flex",borderRadius:20,flex:1},messageInput:{paddingLeft:10,flex:1,border:"none"},sendMessageIcons:{color:"grey"},uploadInput:{display:"none"},viewMediaInputWrapper:{display:"flex",padding:"10px 13px",position:"relative",justifyContent:"space-between",alignItems:"center",background:e.palette.total,borderTop:"1px solid rgba(0, 0, 0, 0.12)"},emojiBox:{position:"absolute",bottom:63,width:40,borderTop:"1px solid #e8e8e8"},circleLoading:{color:ua.a[500],opacity:"70%",position:"absolute",top:"20%",left:"50%",marginLeft:-12},audioLoading:{color:ua.a[500],opacity:"70%"},recorderWrapper:{display:"flex",alignItems:"center",alignContent:"middle"},cancelAudioIcon:{color:"red"},sendAudioIcon:{color:"green"},replyginMsgWrapper:{display:"flex",width:"100%",alignItems:"center",justifyContent:"center",paddingTop:8,paddingLeft:73,paddingRight:7},replyginMsgContainer:{flex:1,marginRight:5,overflowY:"hidden",backgroundColor:"rgba(0, 0, 0, 0.05)",borderRadius:"7.5px",display:"flex",position:"relative"},replyginMsgBody:{padding:10,height:"auto",display:"block",whiteSpace:"pre-wrap",overflow:"hidden"},replyginContactMsgSideColor:{flex:"none",width:"4px",backgroundColor:"#35cd96"},replyginSelfMsgSideColor:{flex:"none",width:"4px",backgroundColor:"#6bcbef"},messageContactName:{display:"flex",color:"#6bcbef",fontWeight:500}})),Lr=e=>{const{disabled:a,showEmoji:t,setShowEmoji:n,handleAddEmoji:r}=e,o=Dr();return l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{"aria-label":"emojiPicker",component:"span",disabled:a,onClick:e=>n(e=>!e)},l.a.createElement(dr.a,{className:o.sendMessageIcons})),t?l.a.createElement("div",{className:o.emojiBox},l.a.createElement(rr.a,{perLine:16,showPreview:!1,showSkinTones:!1,onSelect:r})):null)},Pr=e=>{const{width:a,setSignMessage:t,signMessage:n}=e;return Object(On.b)("md",a)?l.a.createElement(Nn.a,{style:{marginRight:7,color:"gray"},label:Me.a.t("messagesInput.signMessage"),labelPlacement:"start",control:l.a.createElement(Mn.a,{size:"small",checked:n,onChange:e=>{t(e.target.checked)},name:"showAllTickets",color:"primary"})}):null},Wr=e=>{const{handleChangeMedias:a,disableOption:t}=e,n=Dr();return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{multiple:!0,type:"file",id:"upload-button",disabled:t(),className:n.uploadInput,onChange:a}),l.a.createElement("label",{htmlFor:"upload-button"},l.a.createElement(C.a,{"aria-label":"upload",component:"span",disabled:t()},l.a.createElement(sr.a,{className:n.sendMessageIcons}))))},qr=e=>{const{inputMessage:a,loading:t,recording:n,ticketStatus:r,handleSendMessage:o,handleCancelAudio:c,handleUploadAudio:i,handleStartRecording:s}=e,m=Dr();return a?l.a.createElement(C.a,{"aria-label":"sendMessage",component:"span",onClick:o,disabled:t},l.a.createElement(pr.a,{className:m.sendMessageIcons})):n?l.a.createElement("div",{className:m.recorderWrapper},l.a.createElement(C.a,{"aria-label":"cancelRecording",component:"span",fontSize:"large",disabled:t,onClick:c},l.a.createElement(xr.a,{className:m.cancelAudioIcon})),t?l.a.createElement("div",null,l.a.createElement(ha.a,{className:m.audioLoading})):l.a.createElement(jr,null),l.a.createElement(C.a,{"aria-label":"sendRecordedAudio",component:"span",onClick:i,disabled:t},l.a.createElement(Or.a,{className:m.sendAudioIcon}))):l.a.createElement(C.a,{"aria-label":"showRecorder",component:"span",disabled:t||"open"!==r,onClick:s},l.a.createElement(yr.a,{className:m.sendMessageIcons}))},Fr=e=>{const{loading:a,inputRef:t,ticketStatus:r,inputMessage:o,setInputMessage:c,handleSendMessage:i,handleInputPaste:s,disableOption:m}=e,d=Dr(),[u,p]=Object(n.useState)([]),[g,E]=Object(n.useState)([]),[b,h]=Object(n.useState)(!1),{user:f}=Object(n.useContext)(Xe),{list:y}=kr();Object(n.useEffect)(()=>{!async function(){const e=localStorage.getItem("companyId"),a=(await y({companyId:e,userId:f.id})).map(e=>{let a=e.message;return Object(Le.isString)(a)&&a.length>35&&(a=e.message.substring(0,35)+"..."),{value:e.message,label:"/".concat(e.shortcode," - ").concat(a)}});p(a)}()},[]),Object(n.useEffect)(()=>{if(Object(Le.isString)(o)&&!Object(Le.isEmpty)(o)&&o.length>1){const e=o.charAt(0);h(e.indexOf("/")>-1);const a=u.filter(e=>e.label.indexOf(o)>-1);E(a)}else h(!1)},[o]);const v=e=>{e&&(e.focus(),t.current=e)};return l.a.createElement("div",{className:d.messageInputWrapper},l.a.createElement(Dn.a,{freeSolo:!0,open:b,id:"grouped-demo",value:o,options:g,closeIcon:null,getOptionLabel:e=>Object(Le.isObject)(e)?e.label:e,onChange:(e,a)=>{Object(Le.isObject)(a)&&Object(Le.has)(a,"value")&&(c(a.value),setTimeout(()=>{t.current.scrollTop=t.current.scrollHeight},200))},onInputChange:(e,a,t)=>{"input"===t&&c(e.target.value)},onPaste:e=>{"open"===r&&s(e)},onKeyPress:e=>{a||e.shiftKey||"Enter"===e.key&&i()},style:{width:"100%"},renderInput:e=>{const{InputLabelProps:a,InputProps:t}=e,n=Object(Ea.a)(e,Mr);return l.a.createElement(Sn.a,Object.assign({},e.InputProps,n,{disabled:m(),inputRef:v,placeholder:"open"===r?Me.a.t("messagesInput.placeholderOpen"):Me.a.t("messagesInput.placeholderClosed"),multiline:!0,className:d.messageInput,maxRows:5}))}}))};var zr=Object(On.a)()(e=>{var a;const{ticketStatus:t,ticketId:r}=e,o=Dr(),[c,i]=Object(n.useState)([]),[s,m]=Object(n.useState)(""),[d,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)(!1),[E,b]=Object(n.useState)(!1),[h,y]=Object(n.useState)(0),v=Object(n.useRef)(),{setReplyingMessage:O,replyingMessage:x}=Object(n.useContext)(cl),{user:S}=Object(n.useContext)(Xe),[j,k]=function(e,a){const[t,l]=Object(n.useState)(()=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):a}catch(t){return Pe(t),a}});return[t,a=>{try{const n=a instanceof Function?a(t):a;l(n),localStorage.setItem(e,JSON.stringify(n))}catch(n){Pe(n)}}]}("signOption",!0);Object(n.useEffect)(()=>{v.current.focus()},[x]),Object(n.useEffect)(()=>(v.current.focus(),()=>{m(""),u(!1),i([]),O(null)}),[r,O]);const w=e=>{let a=e.native;m(e=>e+a)},T=e=>{if(!e.target.files)return;const a=Array.from(e.target.files);i(a)},I=e=>{e.clipboardData.files[0]&&i([e.clipboardData.files[0]])},A=async()=>{if(""===s.trim())return;g(!0);const e={read:1,fromMe:!0,mediaUrl:"",body:j?"*".concat(null===S||void 0===S?void 0:S.name,":*\n").concat(s.trim()):s.trim(),quotedMsg:x};try{await Be.post("/messages/".concat(r),e)}catch(a){Pe(a)}m(""),u(!1),g(!1),O(null)},N=async()=>{g(!0);try{await navigator.mediaDevices.getUserMedia({audio:!0}),await Rr.start(),b(!0),g(!1)}catch(e){Pe(e),g(!1)}},M=async()=>{g(!0);try{const[,e]=await Rr.stop().getMp3();if(e.size<1e4)return g(!1),void b(!1);const a=new FormData,t="audio-record-site-".concat((new Date).getTime(),".mp3");a.append("medias",e,t),a.append("body",t),a.append("fromMe",!0),await Be.post("/messages/".concat(r),a)}catch(e){Pe(e)}b(!1),g(!1)},R=async()=>{try{await Rr.stop().getMp3(),b(!1)}catch(e){Pe(e)}},D=()=>p||E||"open"!==t;return c.length>0?l.a.createElement(lt.a,{elevation:0,square:!0,className:o.viewMediaInputWrapper},l.a.createElement(C.a,{"aria-label":"cancel-upload",component:"span",onClick:e=>i([])},l.a.createElement(Er.a,{className:o.sendMessageIcons})),p?l.a.createElement("div",null,l.a.createElement(Nr,{progress:h})):l.a.createElement("span",null,null===(a=c[0])||void 0===a?void 0:a.name),l.a.createElement(C.a,{"aria-label":"send-upload",component:"span",onClick:async e=>{g(!0),e.preventDefault();const a=new FormData;a.append("fromMe",!0),c.forEach(async(e,t)=>{const n=e;n&&("image"==(null===e||void 0===e?void 0:e.type.split("/")[0])?new Tr.a(n,{quality:.7,async success(e){a.append("medias",e),a.append("body",e.name)},error(e){alert("erro"),console.log(e.message)}}):(a.append("medias",e),a.append("body",e.name)))}),setTimeout(async()=>{try{await Be.post("/messages/".concat(r),a,{onUploadProgress:e=>{let a=Math.round(100*e.loaded/e.total);y(a),console.log("A imagem  est\xe1 ".concat(a,"% carregada... "))}}).then(e=>{g(!1),i([]),y(0),console.log("A imagem \xe1 foi enviada para o servidor!")}).catch(e=>{console.error("Houve um problema ao realizar o upload da imagem."),console.log(e)})}catch(e){Pe(e)}},2e3)},disabled:p},l.a.createElement(pr.a,{className:o.sendMessageIcons}))):l.a.createElement(lt.a,{square:!0,elevation:0,className:o.mainWrapper},x&&(e=>{var a;return l.a.createElement("div",{className:o.replyginMsgWrapper},l.a.createElement("div",{className:o.replyginMsgContainer},l.a.createElement("span",{className:Object(f.a)(o.replyginContactMsgSideColor,{[o.replyginSelfMsgSideColor]:!e.fromMe})}),l.a.createElement("div",{className:o.replyginMsgBody},!e.fromMe&&l.a.createElement("span",{className:o.messageContactName},null===(a=e.contact)||void 0===a?void 0:a.name),e.body)),l.a.createElement(C.a,{"aria-label":"showRecorder",component:"span",disabled:p||"open"!==t,onClick:()=>O(null)},l.a.createElement(hr.a,{className:o.sendMessageIcons})))})(x),l.a.createElement("div",{className:o.newMessageBox},l.a.createElement(Lr,{disabled:D(),handleAddEmoji:w,showEmoji:d,setShowEmoji:u}),l.a.createElement(Wr,{disableOption:D,handleChangeMedias:T}),l.a.createElement(Pr,{width:e.width,setSignMessage:k,signMessage:j}),l.a.createElement(Fr,{loading:p,inputRef:v,ticketStatus:t,inputMessage:s,setInputMessage:m,handleSendMessage:A,handleInputPaste:I,disableOption:D}),l.a.createElement(qr,{inputMessage:s,loading:p,recording:E,ticketStatus:t,handleSendMessage:A,handleCancelAudio:R,handleUploadAudio:M,handleStartRecording:N})))}),Br=t(1225),Ur=t(1227);var Vr=()=>({findAll:async()=>{const{data:e}=await Be.get("/queue");return e}});const Hr=Object(y.a)(e=>({maxWidth:{width:"100%"}})),Yr=Object(Rn.a)({trim:!0});var Gr=e=>{let{modalOpen:a,onClose:t,ticketid:r}=e;const o=Object(E.g)(),[c,i]=Object(n.useState)([]),[s,m]=Object(n.useState)([]),[d,u]=Object(n.useState)([]),[p,g]=Object(n.useState)(!1),[b,f]=Object(n.useState)(""),[y,v]=Object(n.useState)(null),[O,C]=Object(n.useState)(""),x=Hr(),{findAll:S}=Vr(),j=Object(n.useRef)(!0);Object(n.useEffect)(()=>()=>{j.current=!1},[]),Object(n.useEffect)(()=>{if(j.current){(async()=>{const e=await S();u(e),m(e)})()}},[]),Object(n.useEffect)(()=>{if(!a||b.length<3)return void g(!1);const e=setTimeout(()=>{g(!0);(async()=>{try{const{data:e}=await Be.get("/users/",{params:{searchParam:b}});i(e.users),g(!1)}catch(e){g(!1),Pe(e)}})()},500);return()=>clearTimeout(e)},[b,a]);const k=()=>{t(),f(""),v(null)};return l.a.createElement(qa.a,{open:a,onClose:k,maxWidth:"lg",scroll:"paper"},l.a.createElement("form",{onSubmit:async e=>{if(e.preventDefault(),r&&O&&""!==O){g(!0);try{let e={};y&&(e.userId=y.id),O&&null!==O&&(e.queueId=O,y||(e.status="pending",e.userId=null)),await Be.put("/tickets/".concat(r),e),o.push("/tickets")}catch(a){g(!1),Pe(a)}}}},l.a.createElement(Ba.a,{id:"form-dialog-title"},Me.a.t("transferTicketModal.title")),l.a.createElement(za.a,{dividers:!0},l.a.createElement(Dn.a,{style:{width:300,marginBottom:20},getOptionLabel:e=>"".concat(e.name),onChange:(e,a)=>{v(a),null!=a&&Array.isArray(a.queues)?m(a.queues):(m(d),C(""))},options:c,filterOptions:Yr,freeSolo:!0,autoHighlight:!0,noOptionsText:Me.a.t("transferTicketModal.noOptions"),loading:p,renderInput:e=>l.a.createElement(Wa.a,Object.assign({},e,{label:Me.a.t("transferTicketModal.fieldLabel"),variant:"outlined",autoFocus:!0,onChange:e=>f(e.target.value),InputProps:Object(h.a)(Object(h.a)({},e.InputProps),{},{endAdornment:l.a.createElement(l.a.Fragment,null,p?l.a.createElement(ha.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}),l.a.createElement(Ha.a,{variant:"outlined",className:x.maxWidth},l.a.createElement(Va.a,null,Me.a.t("transferTicketModal.fieldQueueLabel")),l.a.createElement(Ua.a,{value:O,onChange:e=>C(e.target.value),label:Me.a.t("transferTicketModal.fieldQueuePlaceholder")},s.map(e=>l.a.createElement(I.a,{key:e.id,value:e.id},e.name))))),l.a.createElement(Fa.a,null,l.a.createElement(ba.a,{onClick:k,color:"secondary",disabled:p,variant:"outlined"},Me.a.t("transferTicketModal.buttons.cancel")),l.a.createElement(va,{variant:"contained",type:"submit",color:"primary",loading:p},Me.a.t("transferTicketModal.buttons.ok")))))};const _r=Object(y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:ua.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120}})),Qr=La.b().shape({body:La.c().min(5,"Mensagem muito curta").required("Obrigat\xf3rio"),contactId:La.a().required("Obrigat\xf3rio"),sendAt:La.c().required("Obrigat\xf3rio")});var Kr=e=>{let{open:a,onClose:t,scheduleId:r,contactId:o,cleanContact:c,reload:i}=e;const s=_r(),m=Object(E.g)(),{user:d}=Object(n.useContext)(Xe),u={body:"",contactId:"",sendAt:Ze()().add(1,"hour").format("YYYY-MM-DDTHH:mm"),sentAt:""},p={id:"",name:""},[g,f]=Object(n.useState)(u),[y,v]=Object(n.useState)(p),[O,C]=Object(n.useState)([p]);Object(n.useEffect)(()=>{if(o&&O.length){const e=O.find(e=>e.id===o);e&&v(e)}},[o,O]),Object(n.useEffect)(()=>{const{companyId:e}=d;if(a)try{(async()=>{const{data:a}=await Be.get("/contacts/list",{params:{companyId:e}});let t=a.map(e=>({id:e.id,name:e.name}));if(Object(Le.isArray)(t)&&C([{id:"",name:""},...t]),o&&f(e=>Object(h.a)(Object(h.a)({},e),{},{contactId:o})),!r)return;const{data:n}=await Be.get("/schedules/".concat(r));f(e=>Object(h.a)(Object(h.a)(Object(h.a)({},e),n),{},{sendAt:Ze()(n.sendAt).format("YYYY-MM-DDTHH:mm")})),v(n.contact)})()}catch(t){Pe(t)}},[r,o,a,d]);const x=()=>{t(),f(u)};return l.a.createElement("div",{className:s.root},l.a.createElement(qa.a,{open:a,onClose:x,maxWidth:"xs",fullWidth:!0,scroll:"paper"},l.a.createElement(Ba.a,{id:"form-dialog-title"},"ERRO"===g.status?"Erro de Envio":"Mensagem ".concat(Object(Le.capitalize)(g.status))),l.a.createElement(Pa.e,{initialValues:g,enableReinitialize:!0,validationSchema:Qr,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a=Object(h.a)(Object(h.a)({},e),{},{userId:d.id});try{r?await Be.put("/schedules/".concat(r),a):await Be.post("/schedules",a),b.b.success(Me.a.t("scheduleModal.success")),"function"==typeof i&&i(),o&&"function"===typeof c&&(c(),m.push("/schedules"))}catch(t){Pe(t)}v(p),f(u),x()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:o}=e;return l.a.createElement(Pa.d,null,l.a.createElement(za.a,{dividers:!0},l.a.createElement("div",{className:s.multFieldLine},l.a.createElement(Ha.a,{variant:"outlined",fullWidth:!0},l.a.createElement(Dn.a,{fullWidth:!0,value:y,options:O,onChange:(e,a)=>{const t=a?a.id:"";f(Object(h.a)(Object(h.a)({},g),{},{contactId:t})),v(a||p)},getOptionLabel:e=>e.name,getOptionSelected:(e,a)=>a.id===e.id,renderInput:e=>l.a.createElement(Wa.a,Object.assign({},e,{variant:"outlined",placeholder:"Contato"}))}))),l.a.createElement("br",null),l.a.createElement("div",{className:s.multFieldLine},l.a.createElement(Pa.b,{as:Wa.a,rows:9,multiline:!0,label:Me.a.t("scheduleModal.form.body"),name:"body",error:a.body&&Boolean(t.body),helperText:a.body&&t.body,variant:"outlined",margin:"dense",fullWidth:!0})),l.a.createElement("br",null),l.a.createElement("div",{className:s.multFieldLine},l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("scheduleModal.form.sendAt"),type:"datetime-local",name:"sendAt",InputLabelProps:{shrink:!0},error:a.sendAt&&Boolean(t.sendAt),helperText:a.sendAt&&t.sendAt,variant:"outlined",fullWidth:!0}))),l.a.createElement(Fa.a,null,l.a.createElement(ba.a,{onClick:x,color:"secondary",disabled:n,variant:"outlined"},Me.a.t("scheduleModal.buttons.cancel")),(null===g.sentAt||""===g.sentAt)&&l.a.createElement(ba.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:s.btnWrapper},"".concat(r?Me.a.t("scheduleModal.buttons.okEdit"):Me.a.t("scheduleModal.buttons.okAdd")),n&&l.a.createElement(ha.a,{size:24,className:s.buttonProgress}))))})))};var Zr=e=>{let{ticket:a,menuOpen:t,handleClose:r,anchorEl:o}=e;const[c,i]=Object(n.useState)(!1),[s,m]=Object(n.useState)(!1),d=Object(n.useRef)(!0),{user:u}=Object(n.useContext)(Xe),[p,g]=Object(n.useState)(!1),[E,b]=Object(n.useState)(null);Object(n.useEffect)(()=>()=>{d.current=!1},[]);const h=e=>{i(!0),r()};return l.a.createElement(l.a.Fragment,null,l.a.createElement(T.a,{id:"menu-appbar",anchorEl:o,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:t,onClose:r},l.a.createElement(I.a,{onClick:()=>{r(),b(a.contact.id),g(!0)}},Me.a.t("ticketOptionsMenu.schedule")),l.a.createElement(I.a,{onClick:e=>{m(!0),r()}},Me.a.t("ticketOptionsMenu.transfer")),l.a.createElement(aa,{role:u.profile,perform:"ticket-options:deleteTicket",yes:()=>l.a.createElement(I.a,{onClick:h},Me.a.t("ticketOptionsMenu.delete"))})),l.a.createElement(ol,{title:"".concat(Me.a.t("ticketOptionsMenu.confirmationModal.title")).concat(a.id," ").concat(Me.a.t("ticketOptionsMenu.confirmationModal.titleFrom")," ").concat(a.contact.name,"?"),open:c,onClose:i,onConfirm:async()=>{try{await Be.delete("/tickets/".concat(a.id))}catch(e){Pe(e)}}},Me.a.t("ticketOptionsMenu.confirmationModal.message")),l.a.createElement(Gr,{modalOpen:s,onClose:()=>{d.current&&m(!1)},ticketid:a.id}),l.a.createElement(Kr,{open:p,onClose:()=>{g(!1),b(null)},"aria-labelledby":"form-dialog-title",contactId:E}))},Jr=t(673),Xr=t.n(Jr);const $r=Object(y.a)(e=>({actionButtons:{marginRight:6,flex:"none",alignSelf:"center",marginLeft:"auto","& > *":{margin:e.spacing(.5)}}}));var eo=e=>{let{ticket:a}=e;const t=$r(),r=Object(E.g)(),[o,c]=Object(n.useState)(null),[i,s]=Object(n.useState)(!1),u=Boolean(o),{user:p}=Object(n.useContext)(Xe),{setCurrentTicket:g}=Object(n.useContext)(Hn),b=Object(m.a)({palette:{primary:ua.a}}),f=async(e,t,n)=>{s(!0);try{await Be.put("/tickets/".concat(a.id),{status:t,userId:n||null}),s(!1),"open"===t?g(Object(h.a)(Object(h.a)({},a),{},{code:"#open"})):(g({id:null,code:null}),r.push("/tickets"))}catch(l){s(!1),Pe(l)}};return l.a.createElement("div",{className:t.actionButtons},"closed"===a.status&&l.a.createElement(va,{loading:i,startIcon:l.a.createElement(Br.a,null),size:"small",onClick:e=>f(0,"open",null===p||void 0===p?void 0:p.id)},Me.a.t("messagesList.header.buttons.reopen")),"open"===a.status&&l.a.createElement(l.a.Fragment,null,l.a.createElement(wa.a,{title:Me.a.t("messagesList.header.buttons.return")},l.a.createElement(C.a,{onClick:e=>f(0,"pending",null)},l.a.createElement(Xr.a,null))),l.a.createElement(d.a,{theme:b},l.a.createElement(wa.a,{title:Me.a.t("messagesList.header.buttons.resolve")},l.a.createElement(C.a,{onClick:e=>f(0,"closed",null===p||void 0===p?void 0:p.id),color:"primary"},l.a.createElement(Lt.a,null)))),l.a.createElement(C.a,{onClick:e=>{c(e.currentTarget)}},l.a.createElement(Ur.a,null)),l.a.createElement(Zr,{ticket:a,anchorEl:o,menuOpen:u,handleClose:e=>{c(null)}})),"pending"===a.status&&l.a.createElement(va,{loading:i,size:"small",variant:"contained",color:"primary",onClick:e=>f(0,"open",null===p||void 0===p?void 0:p.id)},Me.a.t("messagesList.header.buttons.accept")))};function ao(e){let{ticket:a}=e;const[t,r]=Object(n.useState)([]),[o,c]=Object(n.useState)([]),i=Object(n.useRef)(!0);Object(n.useEffect)(()=>()=>{i.current=!1},[]),Object(n.useEffect)(()=>{i.current&&m().then(()=>{Array.isArray(a.tags)?c(a.tags):c([])})},[a]);const s=async e=>{try{const{data:a}=await Be.post("/tags",e);return a}catch(a){Pe(a)}},m=async()=>{try{const{data:e}=await Be.get("/tags/list");r(e)}catch(e){Pe(e)}},d=async(e,t)=>{let n=[];if("create-option"===t){if(Object(Le.isArray)(e))for(let a of e)if(Object(Le.isString)(a)){const e=await s({name:a});n.push(e)}else n.push(a);await m()}else n=e;c(n),await(async e=>{try{const{data:a}=await Be.post("/tags/sync",e);return a}catch(a){Pe(a)}})({ticketId:a.id,tags:n})};return l.a.createElement(lt.a,{style:{padding:12}},l.a.createElement(Dn.a,{multiple:!0,size:"small",options:t,value:o,freeSolo:!0,onChange:(e,a,t)=>d(a,t),getOptionLabel:e=>e.name,renderTags:(e,a)=>e.map((e,t)=>l.a.createElement(Ya.a,Object.assign({variant:"outlined",style:{backgroundColor:e.color||"#eee",textShadow:"1px 1px 1px #000",color:"white"},label:e.name},a({index:t}),{size:"small"}))),renderInput:e=>l.a.createElement(Wa.a,Object.assign({},e,{variant:"outlined",placeholder:"Tags"})),PaperComponent:e=>{let{children:a}=e;return l.a.createElement(lt.a,{style:{width:400,marginLeft:12}},a)}}))}const to=Object(y.a)(e=>({root:{display:"flex",height:"100%",position:"relative",overflow:"hidden"},mainWrapper:{flex:1,height:"100%",display:"flex",flexDirection:"column",overflow:"hidden",borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:"0",marginRight:-320,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},mainWrapperShift:{borderTopRightRadius:0,borderBottomRightRadius:0,transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0}}));var no=()=>{const{ticketId:e}=Object(E.h)(),a=Object(E.g)(),t=to(),{user:r}=Object(n.useContext)(Xe),[o,c]=Object(n.useState)(!1),[i,s]=Object(n.useState)(!0),[m,d]=Object(n.useState)({}),[u,p]=Object(n.useState)({});Object(n.useEffect)(()=>{s(!0);const t=setTimeout(()=>{(async()=>{try{const{data:t}=await Be.get("/tickets/u/"+e),{queueId:n}=t,{queues:l,profile:o}=r;if(void 0===l.find(e=>e.id===n)&&"admin"!==o)return b.b.error("Acesso n\xe3o permitido"),void a.push("/tickets");d(t.contact),p(t),s(!1)}catch(t){s(!1),Pe(t)}})()},500);return()=>clearTimeout(t)},[e,r,a]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),t=He({companyId:e});return t.on("connect",()=>t.emit("joinChatBox","".concat(u.id))),t.on("company-".concat(e,"-ticket"),e=>{"update"===e.action&&p(e.ticket),"delete"===e.action&&(b.b.success("Ticket deleted sucessfully."),a.push("/tickets"))}),t.on("company-".concat(e,"-contact"),e=>{"update"===e.action&&d(a=>{var t;return a.id===(null===(t=e.contact)||void 0===t?void 0:t.id)?Object(h.a)(Object(h.a)({},a),e.contact):a})}),()=>{t.disconnect()}},[e,u,a]);const g=()=>{c(!0)};return l.a.createElement("div",{className:t.root,id:"drawer-container"},l.a.createElement(lt.a,{variant:"outlined",elevation:0,className:Object(f.a)(t.mainWrapper,{[t.mainWrapperShift]:o})},l.a.createElement(fl,{loading:i},(()=>{if(void 0!==u.user)return l.a.createElement(yl,{contact:m,ticket:u,onClick:g})})(),l.a.createElement(eo,{ticket:u})),l.a.createElement(lt.a,null,l.a.createElement(ao,{ticket:u})),l.a.createElement(il,null,l.a.createElement(l.a.Fragment,null,l.a.createElement(gl,{ticket:u,ticketId:u.id,isGroup:u.isGroup}),l.a.createElement(zr,{ticketId:u.id,ticketStatus:u.status})))),l.a.createElement(lr,{open:o,handleDrawerClose:()=>{c(!1)},contact:m,loading:i,ticket:u}))};const lo=Object(y.a)(e=>({chatContainer:{flex:1,padding:e.spacing(1),height:"calc(100% - 48px)",overflowY:"hidden"},chatPapper:{display:"flex",height:"100%"},contactsWrapper:{display:"flex",height:"100%",flexDirection:"column",overflowY:"hidden"},messagesWrapper:{display:"flex",height:"100%",flexDirection:"column"},welcomeMsg:{background:e.palette.total,display:"flex",justifyContent:"space-evenly",alignItems:"center",height:"100%",textAlign:"center"}}));var ro=()=>{const e=lo(),{ticketId:a}=Object(E.h)();return l.a.createElement("div",{className:e.chatContainer},l.a.createElement("div",{className:e.chatPapper},l.a.createElement(kt.a,{container:!0,spacing:0},l.a.createElement(kt.a,{item:!0,xs:4,className:e.contactsWrapper},l.a.createElement(Fl,null)),l.a.createElement(kt.a,{item:!0,xs:8,className:e.messagesWrapper},a?l.a.createElement(l.a.Fragment,null,l.a.createElement(no,null)):l.a.createElement(lt.a,{square:!0,variant:"outlined",className:e.welcomeMsg},l.a.createElement("span",null,Me.a.t("chat.noTicketMessage")))))))},oo=t(1228),co=t(1229),io=t(674),so=t.n(io),mo=t(707);var uo=Object(mo.a)(lt.a)({height:"calc(100% - 48px)",display:"grid",gridTemplateRows:"56px 1fr"});const po=Object(y.a)(e=>({header:{},content:{overflow:"auto"},placeholderContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",background:e.palette.total},placeholderItem:{}}));var go=e=>{const a=po(),{ticketId:t}=Object(E.h)(),[r,o]=Object(n.useState)(0),{currentTicket:c,setCurrentTicket:i}=Object(n.useContext)(Hn);Object(n.useEffect)(()=>(null!==c.id&&i({id:c.id,code:"#open"}),t||o(1),()=>{i({id:null,code:null})}),[]),Object(n.useEffect)(()=>{null!==c.id&&o(0)},[c]);return l.a.createElement(uo,null,l.a.createElement(Vn.a,{className:a.header},l.a.createElement(oo.a,{value:r,onChange:(e,a)=>{o(a)},showLabels:!0,className:a.root},l.a.createElement(co.a,{label:"Ticket",icon:l.a.createElement(sa.a,null)}),l.a.createElement(co.a,{label:"Atendimentos",icon:l.a.createElement(so.a,null)}))),l.a.createElement(Vn.a,{className:a.content},0===r?t?l.a.createElement(no,null):l.a.createElement(Vn.a,{className:a.placeholderContainer},l.a.createElement("div",{className:a.placeholderItem},Me.a.t("chat.noTicketMessage")),l.a.createElement("br",null),l.a.createElement(ba.a,{onClick:()=>o(1),variant:"contained",color:"primary"},"Selecionar Ticket")):l.a.createElement(Fl,null)))};var Eo=Object(On.a)()((function(e){return Object(On.b)("md",e.width)?l.a.createElement(ro,null):l.a.createElement(go,null)})),bo=t(675),ho=t.n(bo);var fo=()=>({getPlanList:async e=>{const{data:a}=await ze.request({url:"/plans/list",method:"GET",params:e});return a},list:async e=>{const{data:a}=await Be.request({url:"/plans/all",method:"GET",params:e});return a},save:async e=>{const{data:a}=await Be.request({url:"/plans",method:"POST",data:e});return a},update:async e=>{const{data:a}=await Be.request({url:"/plans/".concat(e.id),method:"PUT",data:e});return a},finder:async e=>{const{data:a}=await Be.request({url:"/plans/".concat(e),method:"GET"});return a},remove:async e=>{const{data:a}=await Be.request({url:"/plans/".concat(e),method:"DELETE"});return a}}),yo=t(265),vo=t.n(yo);const Oo=Object(y.a)(e=>({root:{width:"100vw",height:"100vh",background:"",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%",backgroundPosition:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",padding:e.spacing(2),borderRadius:e.spacing(2),backgroundColor:e.palette.background.paper,boxShadow:"0px 3px 6px rgba(0, 0, 0, 0.16)"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},powered:{color:"white"}})),Co=La.b().shape({name:La.c().min(2,"Too Short!").max(50,"Too Long!").required("Required"),password:La.c().min(5,"Too Short!").max(50,"Too Long!"),email:La.c().email("Invalid email").required("Required")});var xo=()=>{const e=Oo(),a=Object(E.g)();let t=null;const r=ho.a.parse(window.location.search);void 0!==r.companyId&&(t=r.companyId);const[o]=Object(n.useState)({name:"",email:"",password:"",planId:""}),i=Ze()().add(3,"day").format(),[s,m]=Object(n.useState)([]),{list:d}=fo();return Object(n.useEffect)(()=>{!async function(){const e=await d();m(e)}()},[]),l.a.createElement("div",{className:e.root},l.a.createElement(jt.a,{component:"main",maxWidth:"xs"},l.a.createElement(c.a,null),l.a.createElement("div",{className:e.paper},l.a.createElement("div",null,l.a.createElement("img",{style:{margin:"0 auto",height:"80px",width:"100%"},src:vo.a,alt:"Whats"})),l.a.createElement(w.a,{component:"h1",variant:"h5"},Me.a.t("signup.title")),l.a.createElement(Pa.e,{initialValues:o,enableReinitialize:!0,validationSchema:Co,onSubmit:(e,t)=>{setTimeout(()=>{(async e=>{Object.assign(e,{recurrence:"MENSAL"}),Object.assign(e,{dueDate:i}),Object.assign(e,{status:"t"}),Object.assign(e,{campaignsEnabled:!0});try{await ze.post("/companies/cadastro",e),b.b.success(Me.a.t("signup.toasts.success")),a.push("/login")}catch(t){console.log(t),Pe(t)}})(e),t.setSubmitting(!1)},400)}},a=>{let{touched:t,errors:n,isSubmitting:r}=a;return l.a.createElement(Pa.d,{className:e.form},l.a.createElement(kt.a,{container:!0,spacing:2},l.a.createElement(kt.a,{item:!0,xs:12},l.a.createElement(Pa.b,{as:Wa.a,autoComplete:"name",name:"name",error:t.name&&Boolean(n.name),helperText:t.name&&n.name,variant:"outlined",fullWidth:!0,id:"name",label:"Nome da Empresa"})),l.a.createElement(kt.a,{item:!0,xs:12},l.a.createElement(Pa.b,{as:Wa.a,variant:"outlined",fullWidth:!0,id:"email",label:Me.a.t("signup.form.email"),name:"email",error:t.email&&Boolean(n.email),helperText:t.email&&n.email,autoComplete:"email",required:!0})),l.a.createElement(kt.a,{item:!0,xs:12},l.a.createElement(Pa.b,{as:Wa.a,variant:"outlined",fullWidth:!0,name:"password",error:t.password&&Boolean(n.password),helperText:t.password&&n.password,label:Me.a.t("signup.form.password"),type:"password",id:"password",autoComplete:"current-password",required:!0})),l.a.createElement(kt.a,{item:!0,xs:12},l.a.createElement(Va.a,{htmlFor:"plan-selection"},"Plano"),l.a.createElement(Pa.b,{as:Ua.a,variant:"outlined",fullWidth:!0,id:"plan-selection",label:"Plano",name:"planId",required:!0},s.map((e,a)=>l.a.createElement(I.a,{key:a,value:e.id},e.name," - Atendentes: ",e.users," - WhatsApp: ",e.connections," - Filas: ",e.queues," - R$ ",e.value))))),l.a.createElement(ba.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},Me.a.t("signup.buttons.submit")),l.a.createElement(kt.a,{container:!0,justify:"flex-end"},l.a.createElement(kt.a,{item:!0},l.a.createElement(Ul.a,{href:"#",variant:"body2",component:g.b,to:"/login"},Me.a.t("signup.buttons.login")))))})),l.a.createElement(Vn.a,{mt:5})))},So=t(1231),jo=t(1232),ko=t(1233);t(1012);const wo=Object(y.a)(e=>({paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",padding:e.spacing(2),borderRadius:e.spacing(2),backgroundColor:e.palette.background.paper,boxShadow:"0px 3px 6px rgba(0, 0, 0, 0.16)"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},whatsapp:{backgroundColor:"#32d951"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},containerWrapper:{display:"flex",justifyContent:"space-between",gap:e.spacing(4)},container:{display:"flex",flexDirection:"column",height:"100vh"},mobileContainer:{flex:1,display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},hideOnMobile:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",[e.breakpoints.down("sm")]:{display:"none"}}}));var To=()=>{const e=wo(),[a,t]=Object(n.useState)({email:"",password:""}),[r,o]=Object(n.useState)(!1),{handleLogin:i}=Object(n.useContext)(Xe),s=e=>{t(Object(h.a)(Object(h.a)({},a),{},{[e.target.name]:e.target.value}))};return l.a.createElement("div",{className:e.root},l.a.createElement(jt.a,{component:"main",maxWidth:"md"},l.a.createElement(c.a,null),l.a.createElement("div",{className:e.containerWrapper},l.a.createElement(jt.a,{component:"div",maxWidth:"xs",className:e.mobileContainer},l.a.createElement("div",{className:e.paper},l.a.createElement("div",null,l.a.createElement("img",{src:vo.a,style:{width:"100%"},alt:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_BACKEND_URL:"https://api-whaticket.easypanel.osuporte.site"}).REACT_APP_TITLE})),l.a.createElement(w.a,{component:"h1",variant:"h5"},Me.a.t("login.title")),l.a.createElement("form",{className:e.form,noValidate:!0,onSubmit:e=>{e.preventDefault(),i(a)}},l.a.createElement(Wa.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:Me.a.t("login.form.email"),name:"email",value:a.email,onChange:s,autoComplete:"email",autoFocus:!0}),l.a.createElement(Wa.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:Me.a.t("login.form.password"),id:"password",value:a.password,onChange:s,autoComplete:"current-password",type:r?"text":"password",InputProps:{endAdornment:l.a.createElement(So.a,{position:"end"},l.a.createElement(C.a,{"aria-label":"toggle password visibility",onClick:()=>o(e=>!e)},r?l.a.createElement(jo.a,null):l.a.createElement(ko.a,null)))}}),l.a.createElement(ba.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},Me.a.t("login.buttons.submit")),l.a.createElement(kt.a,{container:!0,justifyContent:"flex-end"},l.a.createElement(kt.a,{item:!0},l.a.createElement(Ul.a,{variant:"body2",component:g.b,to:"/signup"},Me.a.t("login.buttons.register"))))))))))},Io=t(368),Ao=t.n(Io),No=t(1234),Mo=t(1235),Ro=t(1236),Do=t(1237),Lo=t(1238),Po=t(1239),Wo=t(1240),qo=t(1241),Fo=t(1242),zo=t(1243),Bo=t(449),Uo=t.n(Bo);const Vo=Object(y.a)(e=>({mainContainer:{flex:1,padding:e.spacing(2),height:"calc(100% - 48px)"},contentWrapper:{height:"100%",overflowY:"hidden",display:"flex",flexDirection:"column"}}));var Ho=e=>{let{children:a}=e;const t=Vo();return l.a.createElement(jt.a,{className:t.mainContainer},l.a.createElement("div",{className:t.contentWrapper},a))};const Yo=Object(y.a)(e=>({contactsHeader:{display:"flex",alignItems:"center",padding:"0px 6px 6px 6px"}}));var Go=e=>{let{children:a}=e;const t=Yo();return l.a.createElement("div",{className:t.contactsHeader},a)};const _o=Object(y.a)(e=>({MainHeaderButtonsWrapper:{flex:"none",marginLeft:"auto","& > *":{margin:e.spacing(1)}}}));var Qo=e=>{let{children:a}=e;const t=_o();return l.a.createElement("div",{className:t.MainHeaderButtonsWrapper},a)};function Ko(e){return l.a.createElement(w.a,{variant:"h5",color:"primary",gutterBottom:!0},e.children)}const Zo=Object(y.a)(e=>({customTableCell:{display:"flex",alignItems:"center",justifyContent:"center"}}));var Jo=e=>{let{avatar:a,columns:t}=e;const n=Zo();return l.a.createElement(l.a.Fragment,null,l.a.createElement(sn.a,null,a&&l.a.createElement(l.a.Fragment,null,l.a.createElement(rn.a,{style:{paddingRight:0}},l.a.createElement(en.a,{animation:"wave",variant:"circle",width:40,height:40})),l.a.createElement(rn.a,null,l.a.createElement(en.a,{animation:"wave",height:30,width:80}))),Array.from({length:t},(e,a)=>l.a.createElement(rn.a,{align:"center",key:a},l.a.createElement("div",{className:n.customTableCell},l.a.createElement(en.a,{align:"center",animation:"wave",height:30,width:80}))))))};const Xo=Object(y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:ua.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}})),$o=La.b().shape({name:La.c().min(2,"Too Short!").max(50,"Too Long!").required("Required")});var ec=l.a.memo(e=>{let{open:a,onClose:t,whatsAppId:r}=e;const o=Xo(),c={name:"",greetingMessage:"",complationMessage:"",outOfHoursMessage:"",ratingMessage:"",isDefault:!1,token:"",provider:"beta"},[i,s]=Object(n.useState)(c),[m,d]=Object(n.useState)([]);Object(n.useEffect)(()=>{(async()=>{if(r)try{var e;const{data:a}=await Be.get("whatsapp/".concat(r,"?session=0"));s(a);const t=null===(e=a.queues)||void 0===e?void 0:e.map(e=>e.id);d(t)}catch(a){Pe(a)}})()},[r]);const u=()=>{t(),s(c)};return l.a.createElement("div",{className:o.root},l.a.createElement(qa.a,{open:a,onClose:u,maxWidth:"sm",fullWidth:!0,scroll:"paper"},l.a.createElement(Ba.a,null,r?Me.a.t("whatsappModal.title.edit"):Me.a.t("whatsappModal.title.add")),l.a.createElement(Pa.e,{initialValues:i,enableReinitialize:!0,validationSchema:$o,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a=Object(h.a)(Object(h.a)({},e),{},{queueIds:m});delete a.queues,delete a.session;try{r?await Be.put("/whatsapp/".concat(r),a):await Be.post("/whatsapp",a),b.b.success(Me.a.t("whatsappModal.success")),u()}catch(t){Pe(t)}})(e),a.setSubmitting(!1)},400)}},e=>{let{values:a,touched:t,errors:n,isSubmitting:c}=e;return l.a.createElement(Pa.d,null,l.a.createElement(za.a,{dividers:!0},l.a.createElement("div",{className:o.multFieldLine},l.a.createElement(kt.a,{spacing:2,container:!0},l.a.createElement(kt.a,{item:!0},l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("whatsappModal.form.name"),autoFocus:!0,name:"name",error:t.name&&Boolean(n.name),helperText:t.name&&n.name,variant:"outlined",margin:"dense",className:o.textField})),l.a.createElement(kt.a,{style:{paddingTop:15},item:!0},l.a.createElement(Nn.a,{control:l.a.createElement(Pa.b,{as:Mn.a,color:"primary",name:"isDefault",checked:a.isDefault}),label:Me.a.t("whatsappModal.form.default")})))),l.a.createElement("div",null,l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("queueModal.form.greetingMessage"),type:"greetingMessage",multiline:!0,rows:4,fullWidth:!0,name:"greetingMessage",error:t.greetingMessage&&Boolean(n.greetingMessage),helperText:t.greetingMessage&&n.greetingMessage,variant:"outlined",margin:"dense"})),l.a.createElement("div",null,l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("queueModal.form.complationMessage"),type:"complationMessage",multiline:!0,rows:4,fullWidth:!0,name:"complationMessage",error:t.complationMessage&&Boolean(n.complationMessage),helperText:t.complationMessage&&n.complationMessage,variant:"outlined",margin:"dense"})),l.a.createElement("div",null,l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("queueModal.form.outOfHoursMessage"),type:"outOfHoursMessage",multiline:!0,rows:4,fullWidth:!0,name:"outOfHoursMessage",error:t.outOfHoursMessage&&Boolean(n.outOfHoursMessage),helperText:t.outOfHoursMessage&&n.outOfHoursMessage,variant:"outlined",margin:"dense"})),l.a.createElement("div",null,l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("queueModal.form.ratingMessage"),type:"ratingMessage",multiline:!0,rows:4,fullWidth:!0,name:"ratingMessage",error:t.ratingMessage&&Boolean(n.ratingMessage),helperText:t.ratingMessage&&n.ratingMessage,variant:"outlined",margin:"dense"})),l.a.createElement("div",null,l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("queueModal.form.token"),type:"token",fullWidth:!0,name:"token",variant:"outlined",margin:"dense"})),l.a.createElement(_a,{selectedQueueIds:m,onChange:e=>d(e)})),l.a.createElement(Fa.a,null,l.a.createElement(ba.a,{onClick:u,color:"secondary",disabled:c,variant:"outlined"},Me.a.t("whatsappModal.buttons.cancel")),l.a.createElement(ba.a,{type:"submit",color:"primary",disabled:c,variant:"contained",className:o.btnWrapper},r?Me.a.t("whatsappModal.buttons.okEdit"):Me.a.t("whatsappModal.buttons.okAdd"),c&&l.a.createElement(ha.a,{size:24,className:o.buttonProgress}))))})))}),ac=t(676),tc=t.n(ac);var nc=l.a.memo(e=>{let{open:a,onClose:t,whatsAppId:r}=e;const[o,c]=Object(n.useState)("");return Object(n.useEffect)(()=>{(async()=>{if(r)try{const{data:e}=await Be.get("/whatsapp/".concat(r));c(e.qrcode)}catch(e){Pe(e)}})()},[r]),Object(n.useEffect)(()=>{if(!r)return;const e=localStorage.getItem("companyId"),a=He({companyId:e});return a.on("company-".concat(e,"-whatsappSession"),e=>{"update"===e.action&&e.session.id===r&&c(e.session.qrcode),"update"===e.action&&""===e.session.qrcode&&t()}),()=>{a.disconnect()}},[r,t]),l.a.createElement(qa.a,{open:a,onClose:t,maxWidth:"lg",scroll:"paper"},l.a.createElement(za.a,null,l.a.createElement(lt.a,{elevation:0},l.a.createElement(w.a,{color:"primary",gutterBottom:!0},Me.a.t("qrCode.message")),o?l.a.createElement(tc.a,{value:o,size:256}):l.a.createElement("span",null,"Waiting for QR Code"))))});const lc=Object(y.a)(e=>({mainPaper:Object(h.a)({flex:1,padding:e.spacing(1),overflowY:"scroll"},e.scrollbarStyles),customTableCell:{display:"flex",alignItems:"center",justifyContent:"center"},tooltip:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",fontSize:e.typography.pxToRem(14),border:"1px solid #dadde9",maxWidth:450},tooltipPopper:{textAlign:"center"},buttonProgress:{color:ua.a[500]}})),rc=e=>{let{title:a,content:t,children:n}=e;const r=lc();return l.a.createElement(wa.a,{arrow:!0,classes:{tooltip:r.tooltip,popper:r.tooltipPopper},title:l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{gutterBottom:!0,color:"inherit"},a),t&&l.a.createElement(w.a,null,t))},n)};var oc=()=>{const e=lc(),{whatsApps:a,loading:t}=Object(n.useContext)(_e),[r,o]=Object(n.useState)(!1),[c,i]=Object(n.useState)(!1),[s,m]=Object(n.useState)(null),[d,u]=Object(n.useState)(!1),p={action:"",title:"",message:"",whatsAppId:"",open:!1},[g,E]=Object(n.useState)(p),h=e=>{if("unknown"!==e.status){const{accessToken:a,id:t}=e;Be.post("/facebook",{facebookUserId:t,facebookUserToken:a}).then(e=>{b.b.success(Me.a.t("connections.facebook.success"))}).catch(e=>{Pe(e)})}},f=e=>{if("unknown"!==e.status){const{accessToken:a,id:t}=e;Be.post("/facebook",{addInstagram:!0,facebookUserId:t,facebookUserToken:a}).then(e=>{b.b.success(Me.a.t("connections.facebook.success"))}).catch(e=>{Pe(e)})}},y=Object(n.useCallback)(()=>{o(!1),m(null)},[m,o]),v=Object(n.useCallback)(()=>{m(null),i(!1)},[i,m]),O=(e,a)=>{"disconnect"===e&&E({action:e,title:Me.a.t("connections.confirmationModal.disconnectTitle"),message:Me.a.t("connections.confirmationModal.disconnectMessage"),whatsAppId:a}),"delete"===e&&E({action:e,title:Me.a.t("connections.confirmationModal.deleteTitle"),message:Me.a.t("connections.confirmationModal.deleteMessage"),whatsAppId:a}),u(!0)},x=e=>l.a.createElement(l.a.Fragment,null,"qrcode"===e.status&&l.a.createElement(ba.a,{size:"small",variant:"contained",color:"primary",onClick:()=>(e=>{m(e),i(!0)})(e)},Me.a.t("connections.buttons.qrcode")),"DISCONNECTED"===e.status&&l.a.createElement(l.a.Fragment,null,l.a.createElement(ba.a,{size:"small",variant:"outlined",color:"primary",onClick:()=>(async e=>{try{await Be.post("/whatsappsession/".concat(e))}catch(a){Pe(a)}})(e.id)},Me.a.t("connections.buttons.tryAgain"))," ",l.a.createElement(ba.a,{size:"small",variant:"outlined",color:"secondary",onClick:()=>(async e=>{try{await Be.put("/whatsappsession/".concat(e))}catch(a){Pe(a)}})(e.id)},Me.a.t("connections.buttons.newQr"))),("CONNECTED"===e.status||"PAIRING"===e.status||"TIMEOUT"===e.status)&&l.a.createElement(ba.a,{size:"small",variant:"outlined",color:"secondary",onClick:()=>{O("disconnect",e.id)}},Me.a.t("connections.buttons.disconnect")),"OPENING"===e.status&&l.a.createElement(ba.a,{size:"small",variant:"outlined",disabled:!0,color:"default"},Me.a.t("connections.buttons.connecting")));return l.a.createElement(Ho,null,l.a.createElement(ol,{title:g.title,open:d,onClose:u,onConfirm:async()=>{if("disconnect"===g.action)try{await Be.delete("/whatsappsession/".concat(g.whatsAppId))}catch(e){Pe(e)}if("delete"===g.action)try{await Be.delete("/whatsapp/".concat(g.whatsAppId)),b.b.success(Me.a.t("connections.toasts.deleted"))}catch(e){Pe(e)}E(p)}},g.message),l.a.createElement(nc,{open:c,onClose:v,whatsAppId:!r&&(null===s||void 0===s?void 0:s.id)}),l.a.createElement(ec,{open:r,onClose:y,whatsAppId:!c&&(null===s||void 0===s?void 0:s.id)}),l.a.createElement(Go,null,l.a.createElement(Ko,null,Me.a.t("connections.title")),l.a.createElement(Qo,null,l.a.createElement(Ao.a,{variant:"popover",popupId:"demo-popup-menu"},e=>l.a.createElement(l.a.Fragment,null,l.a.createElement(ba.a,Object.assign({variant:"contained",color:"primary"},Object(Io.bindTrigger)(e)),"Adicionar Conex\xe3o"),l.a.createElement(T.a,Object(Io.bindMenu)(e),l.a.createElement(I.a,{onClick:()=>{m(null),o(!0),e.close()}},l.a.createElement(No.a,{fontSize:"small",style:{marginRight:"10px"}}),"WhatsApp"),l.a.createElement(Uo.a,{appId:"",autoLoad:!1,fields:"name,email,picture",version:"9.0",scope:"public_profile,pages_messaging,pages_show_list,pages_manage_metadata,pages_read_engagement",callback:h,render:e=>l.a.createElement(I.a,{onClick:e.onClick},l.a.createElement(Po.a,{fontSize:"small",style:{marginRight:"10px"}}),"Facebook")}),l.a.createElement(Uo.a,{appId:"",autoLoad:!1,fields:"name,email,picture",version:"9.0",scope:"public_profile,instagram_basic,instagram_manage_messages,pages_messaging,pages_show_list,pages_manage_metadata,pages_read_engagement",callback:f,render:e=>l.a.createElement(I.a,{onClick:e.onClick},l.a.createElement(Wo.a,{fontSize:"small",style:{marginRight:"10px"}}),"Instagram")})))))),l.a.createElement(lt.a,{className:e.mainPaper,variant:"outlined"},l.a.createElement(nn.a,{size:"small"},l.a.createElement(cn.a,null,l.a.createElement(sn.a,null,l.a.createElement(rn.a,{align:"center"},"Channel"),l.a.createElement(rn.a,{align:"center"},Me.a.t("connections.table.name")),l.a.createElement(rn.a,{align:"center"},Me.a.t("connections.table.status")),l.a.createElement(rn.a,{align:"center"},Me.a.t("connections.table.session")),l.a.createElement(rn.a,{align:"center"},Me.a.t("connections.table.lastUpdate")),l.a.createElement(rn.a,{align:"center"},Me.a.t("connections.table.default")),l.a.createElement(rn.a,{align:"center"},Me.a.t("connections.table.actions")))),l.a.createElement(ln.a,null,t?l.a.createElement(Jo,null):l.a.createElement(l.a.Fragment,null,(null===a||void 0===a?void 0:a.length)>0&&a.map(a=>l.a.createElement(sn.a,{key:a.id},l.a.createElement(rn.a,{align:"center"},(e=>{switch(e){case"whatsapp":return l.a.createElement(No.a,null);default:return"ID"}})(a.channel)),l.a.createElement(rn.a,{align:"center"},a.name),l.a.createElement(rn.a,{align:"center"},(a=>l.a.createElement("div",{className:e.customTableCell},"DISCONNECTED"===a.status&&l.a.createElement(rc,{title:Me.a.t("connections.toolTips.disconnected.title"),content:Me.a.t("connections.toolTips.disconnected.content")},l.a.createElement(Mo.a,{color:"secondary"})),"OPENING"===a.status&&l.a.createElement(ha.a,{size:24,className:e.buttonProgress}),"qrcode"===a.status&&l.a.createElement(rc,{title:Me.a.t("connections.toolTips.qrcode.title"),content:Me.a.t("connections.toolTips.qrcode.content")},l.a.createElement(Ro.a,null)),"CONNECTED"===a.status&&l.a.createElement(rc,{title:Me.a.t("connections.toolTips.connected.title")},l.a.createElement(Do.a,{style:{color:ua.a[500]}})),("TIMEOUT"===a.status||"PAIRING"===a.status)&&l.a.createElement(rc,{title:Me.a.t("connections.toolTips.timeout.title"),content:Me.a.t("connections.toolTips.timeout.content")},l.a.createElement(Lo.a,{color:"secondary"}))))(a)),l.a.createElement(rn.a,{align:"center"},x(a)),l.a.createElement(rn.a,{align:"center"},Object(ra.a)(Object(da.a)(a.updatedAt),"dd/MM/yy HH:mm")),l.a.createElement(rn.a,{align:"center"},a.isDefault&&l.a.createElement("div",{className:e.customTableCell},l.a.createElement(qo.a,{style:{color:ua.a[500]}}))),l.a.createElement(rn.a,{align:"center"},l.a.createElement(C.a,{size:"small",onClick:()=>(e=>{m(e),o(!0)})(a)},l.a.createElement(Fo.a,null)),l.a.createElement(C.a,{size:"small",onClick:e=>{O("delete",a.id)}},l.a.createElement(zo.a,null))))))))))},cc=t(450);const ic=Object(y.a)(e=>({root:{width:"100%"},fullWidth:{width:"100%"},textfield:{width:"100%"},row:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},control:{paddingRight:e.spacing(1),paddingLeft:e.spacing(1)},buttonContainer:{textAlign:"right",padding:e.spacing(1)}}));var sc=function(e){const{initialValues:a,onSubmit:t,loading:r,labelSaveButton:o}=e,c=ic(),[i,s]=Object(n.useState)([{weekday:"Segunda-feira",weekdayEn:"monday",startTime:"",endTime:""},{weekday:"Ter\xe7a-feira",weekdayEn:"tuesday",startTime:"",endTime:""},{weekday:"Quarta-feira",weekdayEn:"wednesday",startTime:"",endTime:""},{weekday:"Quinta-feira",weekdayEn:"thursday",startTime:"",endTime:""},{weekday:"Sexta-feira",weekdayEn:"friday",startTime:"",endTime:""},{weekday:"S\xe1bado",weekdayEn:"saturday",startTime:"",endTime:""},{weekday:"Domingo",weekdayEn:"sunday",startTime:"",endTime:""}]);return Object(n.useEffect)(()=>{Object(Le.isArray)(a)&&a.length>0&&s(a)},[a]),l.a.createElement(Pa.e,{enableReinitialize:!0,className:c.fullWidth,initialValues:{schedules:i},onSubmit:e=>{let{schedules:a}=e;return setTimeout(()=>{t(a)},500)}},e=>{let{values:a}=e;return l.a.createElement(Pa.d,{className:c.fullWidth},l.a.createElement(Pa.c,{name:"schedules",render:e=>l.a.createElement(kt.a,{spacing:4,container:!0},a.schedules.map((e,a)=>l.a.createElement(jt.a,null,l.a.createElement(Pa.a,{as:Wa.a,label:"Dia da Semana",name:"schedules[".concat(a,"].weekday"),disabled:!0,variant:"outlined",style:{marginRight:"3.2%",width:"30%"},margin:"dense"}),l.a.createElement(Pa.a,{name:"schedules[".concat(a,"].startTime")},e=>{let{field:a}=e;return l.a.createElement(cc.a,Object.assign({label:"Hora de Inicial"},a,{variant:"outlined",margin:"dense",customInput:Wa.a,format:"##:##",style:{marginRight:"3.2%",width:"30%"}}))}),l.a.createElement(Pa.a,{name:"schedules[".concat(a,"].endTime")},e=>{let{field:a}=e;return l.a.createElement(cc.a,Object.assign({label:"Hora de Final"},a,{variant:"outlined",margin:"dense",customInput:Wa.a,format:"##:##",style:{marginRight:"3.2%",width:"30%"}}))}))))}),l.a.createElement("div",{style:{textAlign:"center",marginTop:"2%"},className:c.buttonContainer},l.a.createElement(va,{loading:r,type:"submit",color:"primary",variant:"contained"},null!==o&&void 0!==o?o:"Salvar")))})};const mc=Object(y.a)(e=>({chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2}}));var dc=e=>{let{selectedQueueIds:a,companyId:t,onChange:r}=e;const o=mc(),[c,i]=Object(n.useState)([]);Object(n.useEffect)(()=>{(async()=>{try{const{data:e}=await Be.get("/queue",{params:{companyId:t}});i(e)}catch(e){Pe(e)}})()},[t]);return l.a.createElement("div",{style:{marginTop:6}},l.a.createElement(Ha.a,{fullWidth:!0,margin:"dense",variant:"outlined"},l.a.createElement(Va.a,null,Me.a.t("queueSelect.inputLabel")),l.a.createElement(Ua.a,{multiple:!0,labelWidth:60,value:a,onChange:e=>{r(e.target.value)},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null},renderValue:e=>l.a.createElement("div",{className:o.chips},(null===e||void 0===e?void 0:e.length)>0&&e.map(e=>{const a=c.find(a=>a.id===e);return a?l.a.createElement(Ya.a,{key:e,style:{backgroundColor:a.color},variant:"outlined",label:a.name,className:o.chip}):null}))},c.map(e=>l.a.createElement(I.a,{key:e.id,value:e.id},e.name)))))};const uc=Object(y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:ua.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120}})),pc=La.b().shape({name:La.c().min(2,"Too Short!").max(50,"Too Long!").required("Required"),password:La.c().min(5,"Too Short!").max(50,"Too Long!"),email:La.c().email("Invalid email").required("Required")});var gc=e=>{let{open:a,onClose:t,userId:r,companyId:o}=e;const c=uc(),i={name:"",email:"",password:"",profile:"user"},{user:s}=Object(n.useContext)(Xe),[m,d]=Object(n.useState)(i),[u,p]=Object(n.useState)([]);Object(n.useEffect)(()=>{(async()=>{if(r&&a)try{var e;const{data:a}=await Be.get("/users/".concat(r));d(e=>Object(h.a)(Object(h.a)({},e),a));const t=null===(e=a.queues)||void 0===e?void 0:e.map(e=>e.id);p(t)}catch(t){Pe(t)}})()},[r,a]);const g=()=>{t(),d(i)};return l.a.createElement("div",{className:c.root},l.a.createElement(qa.a,{open:a,onClose:g,maxWidth:"xs",fullWidth:!0,scroll:"paper"},l.a.createElement(Ba.a,{id:"form-dialog-title"},"".concat(r?Me.a.t("userModal.title.edit"):Me.a.t("userModal.title.add"))),l.a.createElement(Pa.e,{initialValues:m,enableReinitialize:!0,validationSchema:pc,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a=Object(h.a)(Object(h.a)({},e),{},{companyId:o,queueIds:u});try{r?await Be.put("/users/".concat(r),a):await Be.post("/users",a),b.b.success(Me.a.t("userModal.success"))}catch(t){Pe(t)}g()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n}=e;return l.a.createElement(Pa.d,null,l.a.createElement(za.a,{dividers:!0},l.a.createElement("div",{className:c.multFieldLine},l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("userModal.form.name"),autoFocus:!0,name:"name",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:"outlined",margin:"dense",fullWidth:!0}),l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("userModal.form.password"),type:"password",name:"password",error:a.password&&Boolean(t.password),helperText:a.password&&t.password,variant:"outlined",margin:"dense",fullWidth:!0})),l.a.createElement("div",{className:c.multFieldLine},l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("userModal.form.email"),name:"email",error:a.email&&Boolean(t.email),helperText:a.email&&t.email,variant:"outlined",margin:"dense",fullWidth:!0}),l.a.createElement(Ha.a,{variant:"outlined",className:c.formControl,margin:"dense"},l.a.createElement(aa,{role:s.profile,perform:"user-modal:editProfile",yes:()=>l.a.createElement(l.a.Fragment,null,l.a.createElement(Va.a,{id:"profile-selection-input-label"},Me.a.t("userModal.form.profile")),l.a.createElement(Pa.b,{as:Ua.a,label:Me.a.t("userModal.form.profile"),name:"profile",labelId:"profile-selection-label",id:"profile-selection",required:!0},l.a.createElement(I.a,{value:"admin"},"Admin"),l.a.createElement(I.a,{value:"user"},"User")))}))),l.a.createElement(aa,{role:s.profile,perform:"user-modal:editQueues",yes:()=>l.a.createElement(dc,{companyId:o,selectedQueueIds:u,onChange:e=>p(e)})})),l.a.createElement(Fa.a,null,l.a.createElement(ba.a,{onClick:g,color:"secondary",disabled:n,variant:"outlined"},Me.a.t("userModal.buttons.cancel")),l.a.createElement(ba.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:c.btnWrapper},"".concat(r?Me.a.t("userModal.buttons.okEdit"):Me.a.t("userModal.buttons.okAdd")),n&&l.a.createElement(ha.a,{size:24,className:c.buttonProgress}))))})))};const Ec=Object(y.a)(e=>({root:{width:"100%"},mainPaper:{width:"100%",flex:1,padding:e.spacing(2)},fullWidth:{width:"100%"},tableContainer:Object(h.a)({width:"100%",overflowX:"scroll"},e.scrollbarStyles),textfield:{width:"100%"},textRight:{textAlign:"right"},row:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},control:{paddingRight:e.spacing(1),paddingLeft:e.spacing(1)},buttonContainer:{textAlign:"right",padding:e.spacing(1)}}));function bc(e){const{onSubmit:a,onDelete:t,onCancel:r,initialValue:o,loading:c}=e,i=Ec(),[s,m]=Object(n.useState)([]),[d,u]=Object(n.useState)(!1),[p,g]=Object(n.useState)({}),[E,f]=Object(n.useState)(Object(h.a)({name:"",email:"",phone:"",planId:"",status:!0,campaignsEnabled:!1,dueDate:"",recurrence:""},o)),{list:y}=fo();Object(n.useEffect)(()=>{!async function(){const e=await y();m(e)}()},[]),Object(n.useEffect)(()=>{f(e=>(Ze()(o).isValid()&&(o.dueDate=Ze()(o.dueDate).format("YYYY-MM-DD")),Object(h.a)(Object(h.a)({},e),o)))},[o]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(gc,{userId:p.id,companyId:o.id,open:d,onClose:()=>{g({}),u(!1)}}),l.a.createElement(Pa.e,{enableReinitialize:!0,className:i.fullWidth,initialValues:E,onSubmit:(e,t)=>{let{resetForm:n}=t;return setTimeout(()=>{(async e=>{""!==e.dueDate&&!1!==Ze()(e.dueDate).isValid()||(e.dueDate=null),a(e),f(Object(h.a)(Object(h.a)({},o),{},{dueDate:""}))})(e),n()},500)}},(e,a)=>l.a.createElement(Pa.d,{className:i.fullWidth},l.a.createElement(kt.a,{spacing:2,justifyContent:"flex-end",container:!0},l.a.createElement(kt.a,{xs:12,sm:6,md:4,item:!0},l.a.createElement(Pa.b,{as:Wa.a,label:"Nome",name:"name",variant:"outlined",className:i.fullWidth,margin:"dense"})),l.a.createElement(kt.a,{xs:12,sm:6,md:2,item:!0},l.a.createElement(Pa.b,{as:Wa.a,label:"E-mail",name:"email",variant:"outlined",className:i.fullWidth,margin:"dense",required:!0})),l.a.createElement(kt.a,{xs:12,sm:6,md:2,item:!0},l.a.createElement(Pa.b,{as:Wa.a,label:"Telefone",name:"phone",variant:"outlined",className:i.fullWidth,margin:"dense"})),l.a.createElement(kt.a,{xs:12,sm:6,md:2,item:!0},l.a.createElement(Ha.a,{margin:"dense",variant:"outlined",fullWidth:!0},l.a.createElement(Va.a,{htmlFor:"plan-selection"},"Plano"),l.a.createElement(Pa.b,{as:Ua.a,id:"plan-selection",label:"Plano",labelId:"plan-selection-label",name:"planId",margin:"dense",required:!0},s.map((e,a)=>l.a.createElement(I.a,{key:a,value:e.id},e.name))))),l.a.createElement(kt.a,{xs:12,sm:6,md:2,item:!0},l.a.createElement(Ha.a,{margin:"dense",variant:"outlined",fullWidth:!0},l.a.createElement(Va.a,{htmlFor:"status-selection"},"Status"),l.a.createElement(Pa.b,{as:Ua.a,id:"status-selection",label:"Status",labelId:"status-selection-label",name:"status",margin:"dense"},l.a.createElement(I.a,{value:!0},"Sim"),l.a.createElement(I.a,{value:!1},"N\xe3o")))),l.a.createElement(kt.a,{xs:12,sm:6,md:2,item:!0},l.a.createElement(Ha.a,{margin:"dense",variant:"outlined",fullWidth:!0},l.a.createElement(Va.a,{htmlFor:"status-selection"},"Campanhas"),l.a.createElement(Pa.b,{as:Ua.a,id:"campaigns-selection",label:"Campanhas",labelId:"campaigns-selection-label",name:"campaignsEnabled",margin:"dense"},l.a.createElement(I.a,{value:!0},"Habilitadas"),l.a.createElement(I.a,{value:!1},"Desabilitadas")))),l.a.createElement(kt.a,{xs:12,sm:6,md:2,item:!0},l.a.createElement(Ha.a,{variant:"outlined",fullWidth:!0},l.a.createElement(Pa.b,{as:Wa.a,label:"Data de Vencimento",type:"date",name:"dueDate",InputLabelProps:{shrink:!0},variant:"outlined",fullWidth:!0,margin:"dense"}))),l.a.createElement(kt.a,{xs:12,sm:6,md:2,item:!0},l.a.createElement(Ha.a,{margin:"dense",variant:"outlined",fullWidth:!0},l.a.createElement(Va.a,{htmlFor:"recorrencia-selection"},"Recorr\xeancia"),l.a.createElement(Pa.b,{as:Ua.a,label:"Recorr\xeancia",labelId:"recorrencia-selection-label",id:"recurrence",name:"recurrence",margin:"dense"},l.a.createElement(I.a,{value:"MENSAL"},"Mensal"),l.a.createElement(I.a,{value:"BIMESTRAL"},"Bimestral"),l.a.createElement(I.a,{value:"TRIMESTRAL"},"Trimestral"),l.a.createElement(I.a,{value:"SEMESTRAL"},"Semestral"),l.a.createElement(I.a,{value:"ANUAL"},"Anual")))),l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(kt.a,{justifyContent:"flex-end",spacing:1,container:!0},l.a.createElement(kt.a,{xs:4,md:1,item:!0},l.a.createElement(va,{className:i.fullWidth,style:{marginTop:7},loading:c,onClick:()=>r(),variant:"contained"},"Limpar")),void 0!==E.id?l.a.createElement(l.a.Fragment,null,l.a.createElement(kt.a,{xs:6,md:1,item:!0},l.a.createElement(va,{style:{marginTop:7},className:i.fullWidth,loading:c,onClick:()=>t(E),variant:"contained",color:"secondary"},"Excluir")),l.a.createElement(kt.a,{xs:6,md:2,item:!0},l.a.createElement(va,{style:{marginTop:7},className:i.fullWidth,loading:c,onClick:()=>(()=>{const e=Object(h.a)({},E);if(""!==e.dueDate&&null!==e.dueDate)switch(e.recurrence){case"MENSAL":e.dueDate=Ze()(e.dueDate).add(1,"month").format("YYYY-MM-DD");break;case"BIMESTRAL":e.dueDate=Ze()(e.dueDate).add(2,"month").format("YYYY-MM-DD");break;case"TRIMESTRAL":e.dueDate=Ze()(e.dueDate).add(3,"month").format("YYYY-MM-DD");break;case"SEMESTRAL":e.dueDate=Ze()(e.dueDate).add(6,"month").format("YYYY-MM-DD");break;case"ANUAL":e.dueDate=Ze()(e.dueDate).add(12,"month").format("YYYY-MM-DD")}f(e)})(),variant:"contained",color:"primary"},"+ Vencimento")),l.a.createElement(kt.a,{xs:6,md:1,item:!0},l.a.createElement(va,{style:{marginTop:7},className:i.fullWidth,loading:c,onClick:()=>(async()=>{try{const{data:e}=await Be.get("/users/list",{params:{companyId:o.id}});Object(Le.isArray)(e)&&e.length&&g(Object(Le.head)(e)),u(!0)}catch(e){b.b.error(e)}})(),variant:"contained",color:"primary"},"Usu\xe1rio"))):null,l.a.createElement(kt.a,{xs:6,md:1,item:!0},l.a.createElement(va,{className:i.fullWidth,style:{marginTop:7},loading:c,type:"submit",variant:"contained",color:"primary"},"Salvar"))))))))}function hc(e){const{records:a,onSelect:t}=e,n=Ec(),{dateToClient:r}=et(),o=e=>{if(Ze()(e.dueDate).isValid()){const a=Ze()(),t=Ze()(e.dueDate).diff(a,"days");if(5===t)return{backgroundColor:"#fffead"};if(t>=-3&&t<=4)return{backgroundColor:"#f7cc8f"};if(-4===t)return{backgroundColor:"#fa8c8c"}}return{}};return l.a.createElement(lt.a,{className:n.tableContainer},l.a.createElement(nn.a,{className:n.fullWidth,size:"small","aria-label":"a dense table"},l.a.createElement(cn.a,null,l.a.createElement(sn.a,null,l.a.createElement(rn.a,{align:"center",style:{width:"1%"}},"#"),l.a.createElement(rn.a,{align:"left"},"Nome"),l.a.createElement(rn.a,{align:"left"},"E-mail"),l.a.createElement(rn.a,{align:"left"},"Telefone"),l.a.createElement(rn.a,{align:"left"},"Plano"),l.a.createElement(rn.a,{align:"left"},"Campanhas"),l.a.createElement(rn.a,{align:"left"},"Status"),l.a.createElement(rn.a,{align:"left"},"Criada Em"),l.a.createElement(rn.a,{align:"left"},"Vencimento"))),l.a.createElement(ln.a,null,a.map((e,a)=>l.a.createElement(sn.a,{style:o(e),key:a},l.a.createElement(rn.a,{align:"center",style:{width:"1%"}},l.a.createElement(C.a,{onClick:()=>t(e),"aria-label":"delete"},l.a.createElement(Fo.a,null))),l.a.createElement(rn.a,{align:"left"},e.name||"-"),l.a.createElement(rn.a,{align:"left"},e.email||"-"),l.a.createElement(rn.a,{align:"left"},e.phone||"-"),l.a.createElement(rn.a,{align:"left"},(e=>null!==e.planId?e.plan.name:"-")(e)),l.a.createElement(rn.a,{align:"left"},(e=>{if(Object(Le.has)(e,"settings")&&Object(Le.isArray)(e.settings)&&e.settings.length>0){const a=e.settings.find(e=>"campaignsEnabled"===e.key);if(a)return"true"===a.value?"Habilitadas":"Desabilitadas"}return"Desabilitadas"})(e)),l.a.createElement(rn.a,{align:"left"},(e=>!1===e.status?"N\xe3o":"Sim")(e)),l.a.createElement(rn.a,{align:"left"},r(e.createdAt)),l.a.createElement(rn.a,{align:"left"},r(e.dueDate),l.a.createElement("br",null),l.a.createElement("span",null,e.recurrence)))))))}function fc(){const e=Ec(),{list:a,save:t,update:r,remove:o}=fn(),[c,i]=Object(n.useState)(!1),[s,m]=Object(n.useState)(!1),[d,u]=Object(n.useState)([]),[p,g]=Object(n.useState)({name:"",email:"",phone:"",planId:"",status:!0,campaignsEnabled:!1,dueDate:"",recurrence:""});Object(n.useEffect)(()=>{E()},[]);const E=async()=>{m(!0);try{const e=await a();u(e)}catch(e){b.b.error("N\xe3o foi poss\xedvel carregar a lista de registros")}m(!1)},f=()=>{g(e=>Object(h.a)(Object(h.a)({},e),{},{name:"",email:"",phone:"",planId:"",status:!0,campaignsEnabled:!1,dueDate:"",recurrence:""}))};return l.a.createElement(lt.a,{className:e.mainPaper,elevation:0},l.a.createElement(kt.a,{spacing:2,container:!0},l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(bc,{initialValue:p,onDelete:()=>{i(!0)},onSubmit:async e=>{m(!0);try{void 0!==e.id?await r(e):await t(e),await E(),f(),b.b.success("Opera\xe7\xe3o realizada com sucesso!")}catch(a){b.b.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o. Verifique se j\xe1 existe uma empresa com o mesmo nome ou se os campos foram preenchidos corretamente")}m(!1)},onCancel:f,loading:s})),l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(hc,{records:d,onSelect:e=>{let a=!1;const t=e.settings.find(e=>e.key.indexOf("campaignsEnabled")>-1);t&&(a="true"===t.value||"enabled"===t.value),g(t=>Object(h.a)(Object(h.a)({},t),{},{id:e.id,name:e.name||"",phone:e.phone||"",email:e.email||"",planId:e.planId||"",status:!1!==e.status,campaignsEnabled:a,dueDate:e.dueDate||"",recurrence:e.recurrence||""}))}}))),l.a.createElement(ol,{title:"Exclus\xe3o de Registro",open:c,onClose:()=>i(!1),onConfirm:()=>(async()=>{m(!0);try{await o(p.id),await E(),f(),b.b.success("Opera\xe7\xe3o realizada com sucesso!")}catch(e){b.b.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o")}m(!1)})()},"Deseja realmente excluir esse registro?"))}var yc=t(436),vc=t.n(yc),Oc=t(677),Cc=t.n(Oc);const xc=["maskOptions"],Sc={prefix:"R$",suffix:"",includeThousandsSeparator:!0,thousandsSeparatorSymbol:".",allowDecimal:!0,decimalSymbol:",",decimalLimit:2,integerLimit:7,allowNegative:!1,allowLeadingZeroes:!1},jc=e=>{let{maskOptions:a}=e,t=Object(Ea.a)(e,xc);const n=Cc()(Object(h.a)(Object(h.a)({},Sc),a));return l.a.createElement(vc.a,Object.assign({mask:n},t))};jc.defaultProps={inputMode:"numeric",maskOptions:{}};t(1018),t(1020);const kc=Object(y.a)(e=>({root:{width:"100%"},mainPaper:{width:"100%",flex:1,padding:e.spacing(2)},fullWidth:{width:"100%"},tableContainer:Object(h.a)({width:"100%",overflowX:"scroll"},e.scrollbarStyles),textfield:{width:"100%"},textRight:{textAlign:"right"},row:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},control:{paddingRight:e.spacing(1),paddingLeft:e.spacing(1)},buttonContainer:{textAlign:"right",padding:e.spacing(1)}}));function wc(e){const{onSubmit:a,onDelete:t,onCancel:r,initialValue:o,loading:c}=e,i=kc(),[s,m]=Object(n.useState)({name:"",users:0,connections:0,queues:0,value:0});Object(n.useEffect)(()=>{m(o)},[o]);return l.a.createElement(Pa.e,{enableReinitialize:!0,className:i.fullWidth,initialValues:s,onSubmit:(e,t)=>{let{resetForm:n}=t;return setTimeout(()=>{(async e=>{a(e)})(e),n()},500)}},e=>l.a.createElement(Pa.d,{className:i.fullWidth},l.a.createElement(kt.a,{spacing:2,justifyContent:"flex-end",container:!0},l.a.createElement(kt.a,{xs:12,sm:6,md:4,item:!0},l.a.createElement(Pa.b,{as:Wa.a,label:"Nome",name:"name",variant:"outlined",className:i.fullWidth,margin:"dense"})),l.a.createElement(kt.a,{xs:12,sm:6,md:4,item:!0},l.a.createElement(Pa.b,{as:Wa.a,label:"Valor",name:"value",variant:"outlined",className:i.fullWidth,margin:"dense",type:"text"})),l.a.createElement(kt.a,{xs:12,sm:6,md:4,item:!0},l.a.createElement(Pa.b,{as:Wa.a,label:"Usu\xe1rios",name:"users",variant:"outlined",className:i.fullWidth,margin:"dense",type:"number"})),l.a.createElement(kt.a,{xs:12,sm:6,md:4,item:!0},l.a.createElement(Pa.b,{as:Wa.a,label:"Conex\xf5es",name:"connections",variant:"outlined",className:i.fullWidth,margin:"dense",type:"number"})),l.a.createElement(kt.a,{xs:12,sm:6,md:4,item:!0},l.a.createElement(Pa.b,{as:Wa.a,label:"Filas",name:"queues",variant:"outlined",className:i.fullWidth,margin:"dense",type:"number"})),l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(kt.a,{justifyContent:"flex-end",spacing:1,container:!0},l.a.createElement(kt.a,{xs:4,md:1,item:!0},l.a.createElement(va,{className:i.fullWidth,loading:c,onClick:()=>r(),variant:"contained"},"Limpar")),void 0!==s.id?l.a.createElement(kt.a,{xs:4,md:1,item:!0},l.a.createElement(va,{className:i.fullWidth,loading:c,onClick:()=>t(s),variant:"contained",color:"secondary"},"Excluir")):null,l.a.createElement(kt.a,{xs:4,md:1,item:!0},l.a.createElement(va,{className:i.fullWidth,loading:c,type:"submit",variant:"contained",color:"primary"},"Salvar")))))))}function Tc(e){const{records:a,onSelect:t}=e,n=kc();return l.a.createElement(lt.a,{className:n.tableContainer},l.a.createElement(nn.a,{className:n.fullWidth,size:"small","aria-label":"a dense table"},l.a.createElement(cn.a,null,l.a.createElement(sn.a,null,l.a.createElement(rn.a,{align:"center",style:{width:"1%"}},"#"),l.a.createElement(rn.a,{align:"left"},"Nome"),l.a.createElement(rn.a,{align:"center"},"Usu\xe1rios"),l.a.createElement(rn.a,{align:"center"},"Conex\xf5es"),l.a.createElement(rn.a,{align:"center"},"Filas"),l.a.createElement(rn.a,{align:"center"},"Valor"))),l.a.createElement(ln.a,null,a.map(e=>l.a.createElement(sn.a,{key:e.id},l.a.createElement(rn.a,{align:"center",style:{width:"1%"}},l.a.createElement(C.a,{onClick:()=>t(e),"aria-label":"delete"},l.a.createElement(Fo.a,null))),l.a.createElement(rn.a,{align:"left"},e.name||"-"),l.a.createElement(rn.a,{align:"center"},e.users||"-"),l.a.createElement(rn.a,{align:"center"},e.connections||"-"),l.a.createElement(rn.a,{align:"center"},e.queues||"-"),l.a.createElement(rn.a,{align:"center"},e.value.toLocaleString("pt-br",{style:"currency",currency:"BRL"})||"-"))))))}function Ic(){const e=kc(),{list:a,save:t,update:r,remove:o}=fo(),[c,i]=Object(n.useState)(!1),[s,m]=Object(n.useState)(!1),[d,u]=Object(n.useState)([]),[p,g]=Object(n.useState)({name:"",users:0,connections:0,queues:0,value:0});Object(n.useEffect)(()=>{!async function(){await E()}()},[]);const E=async()=>{m(!0);try{const e=await a();u(e)}catch(e){b.b.error("N\xe3o foi poss\xedvel carregar a lista de registros")}m(!1)},h=()=>{g({name:"",users:0,connections:0,queues:0,value:0})};return l.a.createElement(lt.a,{className:e.mainPaper,elevation:0},l.a.createElement(kt.a,{spacing:2,container:!0},l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(wc,{initialValue:p,onDelete:()=>{i(!0)},onSubmit:async e=>{const a={id:e.id,connections:e.connections,name:e.name,queues:e.queues,users:e.users,value:e.value.replace(",",".")};m(!0);try{void 0!==e.id?await r(a):await t(a),await E(),h(),b.b.success("Opera\xe7\xe3o realizada com sucesso!")}catch(n){b.b.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o. Verifique se j\xe1 existe uma plano com o mesmo nome ou se os campos foram preenchidos corretamente")}m(!1)},onCancel:h,loading:s})),l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(Tc,{records:d,onSelect:e=>{g({id:e.id,name:e.name||"",users:e.users||0,connections:e.connections||0,queues:e.queues||0,value:e.value.toLocaleString("pt-br",{minimumFractionDigits:2})||0})}}))),l.a.createElement(ol,{title:"Exclus\xe3o de Registro",open:c,onClose:()=>i(!1),onConfirm:()=>(async()=>{m(!0);try{await o(p.id),await E(),h(),b.b.success("Opera\xe7\xe3o realizada com sucesso!")}catch(e){b.b.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o")}m(!1)})()},"Deseja realmente excluir esse registro?"))}var Ac=()=>({findAll:async e=>{const{data:a}=await Be.request({url:"/helps",method:"GET",params:e});return a},list:async e=>{const{data:a}=await Be.request({url:"/helps/list",method:"GET",params:e});return a},save:async e=>{const{data:a}=await Be.request({url:"/helps",method:"POST",data:e});return a},update:async e=>{const{data:a}=await Be.request({url:"/helps/".concat(e.id),method:"PUT",data:e});return a},remove:async e=>{const{data:a}=await Be.request({url:"/helps/".concat(e),method:"DELETE"});return a}});const Nc=Object(y.a)(e=>({root:{width:"100%"},mainPaper:{width:"100%",flex:1,padding:e.spacing(2)},fullWidth:{width:"100%"},tableContainer:Object(h.a)({width:"100%",overflowX:"scroll"},e.scrollbarStyles),textfield:{width:"100%"},textRight:{textAlign:"right"},row:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},control:{paddingRight:e.spacing(1),paddingLeft:e.spacing(1)},buttonContainer:{textAlign:"right",padding:e.spacing(1)}}));function Mc(e){const{onSubmit:a,onDelete:t,onCancel:r,initialValue:o,loading:c}=e,i=Nc(),[s,m]=Object(n.useState)(o);Object(n.useEffect)(()=>{m(o)},[o]);return l.a.createElement(Pa.e,{enableReinitialize:!0,className:i.fullWidth,initialValues:s,onSubmit:(e,t)=>{let{resetForm:n}=t;return setTimeout(()=>{(async e=>{a(e)})(e),n()},500)}},e=>l.a.createElement(Pa.d,{className:i.fullWidth},l.a.createElement(kt.a,{spacing:2,justifyContent:"flex-end",container:!0},l.a.createElement(kt.a,{xs:12,sm:6,md:3,item:!0},l.a.createElement(Pa.b,{as:Wa.a,label:"T\xedtulo",name:"title",variant:"outlined",className:i.fullWidth,margin:"dense"})),l.a.createElement(kt.a,{xs:12,sm:6,md:3,item:!0},l.a.createElement(Pa.b,{as:Wa.a,label:"C\xf3digo do V\xeddeo",name:"video",variant:"outlined",className:i.fullWidth,margin:"dense"})),l.a.createElement(kt.a,{xs:12,sm:12,md:6,item:!0},l.a.createElement(Pa.b,{as:Wa.a,label:"Descri\xe7\xe3o",name:"description",variant:"outlined",className:i.fullWidth,margin:"dense"})),l.a.createElement(kt.a,{sm:3,md:1,item:!0},l.a.createElement(va,{className:i.fullWidth,loading:c,onClick:()=>r(),variant:"contained"},"Limpar")),void 0!==s.id?l.a.createElement(kt.a,{sm:3,md:1,item:!0},l.a.createElement(va,{className:i.fullWidth,loading:c,onClick:()=>t(s),variant:"contained",color:"secondary"},"Excluir")):null,l.a.createElement(kt.a,{sm:3,md:1,item:!0},l.a.createElement(va,{className:i.fullWidth,loading:c,type:"submit",variant:"contained",color:"primary"},"Salvar")))))}function Rc(e){const{records:a,onSelect:t}=e,n=Nc();return l.a.createElement(lt.a,{className:n.tableContainer},l.a.createElement(nn.a,{className:n.fullWidth,size:"small","aria-label":"a dense table"},l.a.createElement(cn.a,null,l.a.createElement(sn.a,null,l.a.createElement(rn.a,{align:"center",style:{width:"1%"}},"#"),l.a.createElement(rn.a,{align:"left"},"T\xedtulo"),l.a.createElement(rn.a,{align:"left"},"Descri\xe7\xe3o"),l.a.createElement(rn.a,{align:"left"},"V\xeddeo"))),l.a.createElement(ln.a,null,a.map(e=>l.a.createElement(sn.a,{key:e.id},l.a.createElement(rn.a,{align:"center",style:{width:"1%"}},l.a.createElement(C.a,{onClick:()=>t(e),"aria-label":"delete"},l.a.createElement(Fo.a,null))),l.a.createElement(rn.a,{align:"left"},e.title||"-"),l.a.createElement(rn.a,{align:"left"},e.description||"-"),l.a.createElement(rn.a,{align:"left"},e.video||"-"))))))}function Dc(){const e=Nc(),{list:a,save:t,update:r,remove:o}=Ac(),[c,i]=Object(n.useState)(!1),[s,m]=Object(n.useState)(!1),[d,u]=Object(n.useState)([]),[p,g]=Object(n.useState)({title:"",description:"",video:""});Object(n.useEffect)(()=>{!async function(){await E()}()},[]);const E=async()=>{m(!0);try{const e=await a();u(e)}catch(e){b.b.error("N\xe3o foi poss\xedvel carregar a lista de registros")}m(!1)},h=()=>{g({title:"",description:"",video:""})};return l.a.createElement(lt.a,{className:e.mainPaper,elevation:0},l.a.createElement(kt.a,{spacing:2,container:!0},l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(Mc,{initialValue:p,onDelete:()=>{i(!0)},onSubmit:async e=>{m(!0);try{void 0!==e.id?await r(e):await t(e),await E(),h(),b.b.success("Opera\xe7\xe3o realizada com sucesso!")}catch(a){b.b.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o. Verifique se j\xe1 existe uma helpo com o mesmo nome ou se os campos foram preenchidos corretamente")}m(!1)},onCancel:h,loading:s})),l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(Rc,{records:d,onSelect:e=>{g({id:e.id,title:e.title||"",description:e.description||"",video:e.video||""})}}))),l.a.createElement(ol,{title:"Exclus\xe3o de Registro",open:c,onClose:()=>i(!1),onConfirm:()=>(async()=>{m(!0);try{await o(p.id),await E(),h(),b.b.success("Opera\xe7\xe3o realizada com sucesso!")}catch(e){b.b.error("N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o")}m(!1)})()},"Deseja realmente excluir esse registro?"))}var Lc=()=>({getAll:async e=>{const{data:a}=await Be.request({url:"/settings",method:"GET",params:e});return a},update:async e=>{const{data:a}=await Be.request({url:"/settings/".concat(e.key),method:"PUT",data:e});return a}});const Pc=Object(y.a)(e=>({container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},fixedHeightPaper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:240},tab:{backgroundColor:"light"===e.mode?"#f2f2f2":"#7f7f7f",borderRadius:4,width:"100%","& .MuiTabs-flexContainer":{justifyContent:"center"}},paper:{padding:e.spacing(2),display:"flex",alignItems:"center",marginBottom:12,width:"100%"},cardAvatar:{fontSize:"55px",color:zt.a[500],backgroundColor:"#ffffff",width:e.spacing(7),height:e.spacing(7)},cardTitle:{fontSize:"18px",color:Bt.a[700]},cardSubtitle:{color:zt.a[600],fontSize:"14px"},alignRight:{textAlign:"right"},fullWidth:{width:"100%"},selectContainer:{width:"100%",textAlign:"left"}}));function Wc(e){const{settings:a,scheduleTypeChanged:t}=e,r=Pc(),[o,c]=Object(n.useState)("disabled"),[i,s]=Object(n.useState)("disabled"),[m,d]=Object(n.useState)("enabled"),[u,p]=Object(n.useState)(""),[g,E]=Object(n.useState)("enabled"),[h,f]=Object(n.useState)("disabled"),[y,v]=Object(n.useState)(!1),[O,C]=Object(n.useState)(!1),[x,S]=Object(n.useState)(!1),[j,k]=Object(n.useState)(!1),[w,T]=Object(n.useState)(!1),[A,N]=Object(n.useState)(!1),[M,R]=Object(n.useState)(!1),[D,L]=Object(n.useState)(""),[P,W]=Object(n.useState)(!1),[q,F]=Object(n.useState)(""),[z,B]=Object(n.useState)(!1),[U,V]=Object(n.useState)(""),[H,Y]=Object(n.useState)(!1),[G,_]=Object(n.useState)(""),[Q,K]=Object(n.useState)(!1),[Z,J]=Object(n.useState)(""),[X,$]=Object(n.useState)(!1),[ee,ae]=Object(n.useState)(""),[te,ne]=Object(n.useState)(!1),{update:le}=Lc();return Object(n.useEffect)(()=>{if(Array.isArray(a)&&a.length){const e=a.find(e=>"userRating"===e.key);e&&c(e.value);const t=a.find(e=>"scheduleType"===e.key);t&&s(t.value);const n=a.find(e=>"call"===e.key);n&&d(n.value);const l=a.find(e=>"CheckMsgIsGroup"===e.key);l&&E(l.value);const r=a.find(e=>"chatBotType"===e.key);r&&p(r.value);const o=a.find(e=>"ipixc"===e.key);o&&L(o.value);const i=a.find(e=>"tokenixc"===e.key);i&&F(i.value);const m=a.find(e=>"ipmkauth"===e.key);m&&V(m.value);const u=a.find(e=>"clientidmkauth"===e.key);u&&_(u.value);const g=a.find(e=>"clientsecretmkauth"===e.key);g&&J(g.value);const b=a.find(e=>"asaas"===e.key);b&&ae(b.value);const h=a.find(e=>"outsidemessage"===e.key);h&&f(h.value)}},[a]),l.a.createElement(l.a.Fragment,null,l.a.createElement(kt.a,{spacing:3,container:!0},l.a.createElement(kt.a,{xs:12,sm:6,md:4,item:!0},l.a.createElement(Ha.a,{className:r.selectContainer},l.a.createElement(Va.a,{id:"ratings-label"},"Avalia\xe7\xf5es"),l.a.createElement(Ua.a,{labelId:"ratings-label",value:o,onChange:async e=>{!async function(e){c(e),v(!0),await le({key:"userRating",value:e}),b.b.success("Opera\xe7\xe3o atualizada com sucesso."),v(!1)}(e.target.value)}},l.a.createElement(I.a,{value:"disabled"},"Desabilitadas"),l.a.createElement(I.a,{value:"enabled"},"Habilitadas")),l.a.createElement(wt.a,null,y&&"Atualizando..."))),l.a.createElement(kt.a,{xs:12,sm:6,md:4,item:!0},l.a.createElement(Ha.a,{className:r.selectContainer},l.a.createElement(Va.a,{id:"schedule-type-label"},"Gerenciamento de Expediente"),l.a.createElement(Ua.a,{labelId:"schedule-type-label",value:i,onChange:async e=>{!async function(e){s(e),C(!0),await le({key:"scheduleType",value:e}),b.b.success("Opera\xe7\xe3o atualizada com sucesso.",{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,theme:"light"}),C(!1),"function"===typeof t&&t(e)}(e.target.value)}},l.a.createElement(I.a,{value:"disabled"},"Desabilitado"),l.a.createElement(I.a,{value:"queue"},"Gerenciamento Por Fila"),l.a.createElement(I.a,{value:"company"},"Gerenciamento Por Empresa")),l.a.createElement(wt.a,null,O&&"Atualizando..."))),l.a.createElement(kt.a,{xs:12,sm:6,md:4,item:!0},l.a.createElement(Ha.a,{className:r.selectContainer},l.a.createElement(Va.a,{id:"group-type-label"},"Ignorar Mensagens de Grupos"),l.a.createElement(Ua.a,{labelId:"group-type-label",value:g,onChange:async e=>{!async function(e){E(e),T(!0),await le({key:"CheckMsgIsGroup",value:e}),b.b.success("Opera\xe7\xe3o atualizada com sucesso."),T(!1)}(e.target.value)}},l.a.createElement(I.a,{value:"disabled"},"Desativado"),l.a.createElement(I.a,{value:"enabled"},"Ativado")),l.a.createElement(wt.a,null,O&&"Atualizando..."))),l.a.createElement(kt.a,{xs:12,sm:6,md:4,item:!0},l.a.createElement(Ha.a,{className:r.selectContainer},l.a.createElement(Va.a,{id:"call-type-label"},"Aceitar Chamada"),l.a.createElement(Ua.a,{labelId:"call-type-label",value:m,onChange:async e=>{!async function(e){d(e),S(!0),await le({key:"call",value:e}),b.b.success("Opera\xe7\xe3o atualizada com sucesso."),S(!1)}(e.target.value)}},l.a.createElement(I.a,{value:"disabled"},"N\xe3o Aceitar"),l.a.createElement(I.a,{value:"enabled"},"Aceitar")),l.a.createElement(wt.a,null,x&&"Atualizando..."))),l.a.createElement(kt.a,{xs:12,sm:6,md:4,item:!0},l.a.createElement(Ha.a,{className:r.selectContainer},l.a.createElement(Va.a,{id:"chatbot-type-label"},"Tipo Chatbot"),l.a.createElement(Ua.a,{labelId:"chatbot-type-label",value:u,onChange:async e=>{!async function(e){p(e),k(!0),await le({key:"chatBotType",value:e}),b.b.success("Opera\xe7\xe3o atualizada com sucesso."),k(!1)}(e.target.value)}},l.a.createElement(I.a,{value:"text"},"Texto")),l.a.createElement(wt.a,null,j&&"Atualizando..."))),l.a.createElement(kt.a,{xs:12,sm:6,md:4,item:!0},l.a.createElement(Ha.a,{className:r.selectContainer},l.a.createElement(Va.a,{id:"outsidemessage-type-label"},"Abrir Tickets Fora do Expediente?"),l.a.createElement(Ua.a,{labelId:"outsidemessage-type-label",value:h,onChange:async e=>{!async function(e){f(e),N(!0),await le({key:"outsidemessage",value:e}),b.b.success("Opera\xe7\xe3o atualizada com sucesso."),N(!1)}(e.target.value)}},l.a.createElement(I.a,{value:"disabled"},"N\xe3o"),l.a.createElement(I.a,{value:"enabled"},"Sim")),l.a.createElement(wt.a,null,A&&"Atualizando...")))),l.a.createElement(kt.a,{spacing:3,container:!0},l.a.createElement(jn.a,{indicatorColor:"primary",textColor:"primary",scrollButtons:"on",variant:"scrollable",className:r.tab,style:{marginBottom:20,marginTop:20}},l.a.createElement(kn.a,{label:"INTEGRA\xc7\xd5ES"}))),l.a.createElement(kt.a,{spacing:3,container:!0,style:{marginBottom:10}},l.a.createElement(jn.a,{indicatorColor:"primary",textColor:"primary",scrollButtons:"on",variant:"scrollable",className:r.tab},l.a.createElement(kn.a,{label:"IXC"})),l.a.createElement(kt.a,{xs:12,sm:6,md:6,item:!0},l.a.createElement(Ha.a,{className:r.selectContainer},l.a.createElement(Wa.a,{id:"ipixc",name:"ipixc",margin:"dense",label:"IP do IXC",variant:"outlined",value:D,onChange:async e=>{!async function(e){L(e),W(!0),await le({key:"ipixc",value:e}),b.b.success("Opera\xe7\xe3o atualizada com sucesso."),W(!1)}(e.target.value)}}),l.a.createElement(wt.a,null,P&&"Atualizando..."))),l.a.createElement(kt.a,{xs:12,sm:6,md:6,item:!0},l.a.createElement(Ha.a,{className:r.selectContainer},l.a.createElement(Wa.a,{id:"tokenixc",name:"tokenixc",margin:"dense",label:"Token do IXC",variant:"outlined",value:q,onChange:async e=>{!async function(e){F(e),B(!0),await le({key:"tokenixc",value:e}),b.b.success("Opera\xe7\xe3o atualizada com sucesso."),B(!1)}(e.target.value)}}),l.a.createElement(wt.a,null,z&&"Atualizando...")))),l.a.createElement(kt.a,{spacing:3,container:!0,style:{marginBottom:10}},l.a.createElement(jn.a,{indicatorColor:"primary",textColor:"primary",scrollButtons:"on",variant:"scrollable",className:r.tab},l.a.createElement(kn.a,{label:"MK-AUTH"})),l.a.createElement(kt.a,{xs:12,sm:12,md:4,item:!0},l.a.createElement(Ha.a,{className:r.selectContainer},l.a.createElement(Wa.a,{id:"ipmkauth",name:"ipmkauth",margin:"dense",label:"Ip Mk-Auth",variant:"outlined",value:U,onChange:async e=>{!async function(e){V(e),Y(!0),await le({key:"ipmkauth",value:e}),b.b.success("Opera\xe7\xe3o atualizada com sucesso."),Y(!1)}(e.target.value)}}),l.a.createElement(wt.a,null,H&&"Atualizando..."))),l.a.createElement(kt.a,{xs:12,sm:12,md:4,item:!0},l.a.createElement(Ha.a,{className:r.selectContainer},l.a.createElement(Wa.a,{id:"clientidmkauth",name:"clientidmkauth",margin:"dense",label:"Client Id",variant:"outlined",value:G,onChange:async e=>{!async function(e){_(e),K(!0),await le({key:"clientidmkauth",value:e}),b.b.success("Opera\xe7\xe3o atualizada com sucesso."),K(!1)}(e.target.value)}}),l.a.createElement(wt.a,null,Q&&"Atualizando..."))),l.a.createElement(kt.a,{xs:12,sm:12,md:4,item:!0},l.a.createElement(Ha.a,{className:r.selectContainer},l.a.createElement(Wa.a,{id:"clientsecretmkauth",name:"clientsecretmkauth",margin:"dense",label:"Client Secret",variant:"outlined",value:Z,onChange:async e=>{!async function(e){J(e),$(!0),await le({key:"clientsecretmkauth",value:e}),b.b.success("Opera\xe7\xe3o atualizada com sucesso."),$(!1)}(e.target.value)}}),l.a.createElement(wt.a,null,X&&"Atualizando...")))),l.a.createElement(kt.a,{spacing:3,container:!0,style:{marginBottom:10}},l.a.createElement(jn.a,{indicatorColor:"primary",textColor:"primary",scrollButtons:"on",variant:"scrollable",className:r.tab},l.a.createElement(kn.a,{label:"ASAAS"})),l.a.createElement(kt.a,{xs:12,sm:12,md:12,item:!0},l.a.createElement(Ha.a,{className:r.selectContainer},l.a.createElement(Wa.a,{id:"asaas",name:"asaas",margin:"dense",label:"Token Asaas",variant:"outlined",value:ee,onChange:async e=>{!async function(e){ae(e),ne(!0),await le({key:"asaas",value:e}),b.b.success("Opera\xe7\xe3o atualizada com sucesso."),ne(!1)}(e.target.value)}}),l.a.createElement(wt.a,null,te&&"Atualizando...")))))}const qc=e=>{let{user:a,yes:t,no:n}=e;return a.super?t():n()};qc.defaultProps={user:{},yes:()=>null,no:()=>null};var Fc=qc;const zc=Object(y.a)(e=>({root:{flex:1,backgroundColor:e.palette.background.paper},mainPaper:Object(h.a)(Object(h.a)({},e.scrollbarStyles),{},{overflowY:"scroll",flex:1}),tab:{backgroundColor:"light"===e.mode?"#f2f2f2":"#7f7f7f",borderRadius:4},paper:Object(h.a)(Object(h.a)({},e.scrollbarStyles),{},{overflowY:"scroll",padding:e.spacing(2),display:"flex",alignItems:"center",width:"100%"}),container:{width:"100%",maxHeight:"100%"},control:{padding:e.spacing(1)},textfield:{width:"100%"}}));var Bc=()=>{const e=zc(),[a,t]=Object(n.useState)("options"),[r,o]=Object(n.useState)([]),[c,i]=Object(n.useState)({}),[s,m]=Object(n.useState)(!1),[d,u]=Object(n.useState)({}),[p,g]=Object(n.useState)({}),[E,h]=Object(n.useState)(!1),{getCurrentUserInfo:f}=Je(),{find:y,updateSchedules:v}=fn(),{getAll:O}=Lc();Object(n.useEffect)(()=>{!async function(){m(!0);try{const e=localStorage.getItem("companyId"),a=await y(e),t=await O();if(i(a),o(a.schedules),g(t),Array.isArray(t)){const e=t.find(e=>"scheduleType"===e.key);e&&h("company"===e.value)}const n=await f();u(n)}catch(e){b.b.error(e)}m(!1)}()},[]);const C=()=>d.super;return l.a.createElement(Ho,{className:e.root},l.a.createElement(Go,null,l.a.createElement(Ko,null,Me.a.t("settings.title"))),l.a.createElement(lt.a,{className:e.mainPaper,elevation:1},l.a.createElement(jn.a,{value:a,indicatorColor:"primary",textColor:"primary",scrollButtons:"on",variant:"scrollable",onChange:(e,a)=>{!async function(){m(!0);try{const e=localStorage.getItem("companyId"),a=await y(e),t=await O();if(i(a),o(a.schedules),g(t),Array.isArray(t)){const e=t.find(e=>"scheduleType"===e.key);e&&h("company"===e.value)}const n=await f();u(n)}catch(e){b.b.error(e)}m(!1)}(),t(a)},className:e.tab},l.a.createElement(kn.a,{label:"Op\xe7\xf5es",value:"options"}),E&&l.a.createElement(kn.a,{label:"Hor\xe1rios",value:"schedules"}),C()?l.a.createElement(kn.a,{label:"Empresas",value:"companies"}):null,C()?l.a.createElement(kn.a,{label:"Planos",value:"plans"}):null,C()?l.a.createElement(kn.a,{label:"Ajuda",value:"helps"}):null),l.a.createElement(lt.a,{className:e.paper,elevation:0},l.a.createElement(Rl,{className:e.container,value:a,name:"schedules"},l.a.createElement(sc,{loading:s,onSubmit:async e=>{m(!0);try{o(e),await v({id:c.id,schedules:e}),b.b.success("Hor\xe1rios atualizados com sucesso.")}catch(a){b.b.error(a)}m(!1)},initialValues:r})),l.a.createElement(Fc,{user:d,yes:()=>l.a.createElement(Rl,{className:e.container,value:a,name:"companies"},l.a.createElement(fc,null))}),l.a.createElement(Fc,{user:d,yes:()=>l.a.createElement(Rl,{className:e.container,value:a,name:"plans"},l.a.createElement(Ic,null))}),l.a.createElement(Fc,{user:d,yes:()=>l.a.createElement(Rl,{className:e.container,value:a,name:"helps"},l.a.createElement(Dc,null))}),l.a.createElement(Rl,{className:e.container,value:a,name:"options"},l.a.createElement(Wc,{settings:p,scheduleTypeChanged:e=>h("company"===e)})))))},Uc=t(1263),Vc=t(1246),Hc=t(1258);const Yc=["errorText"];function Gc(e){const{errorText:a}=e,t=Object(Ea.a)(e,Yc),[n,r]=Object(Pa.f)(e);return l.a.createElement(Wa.a,Object.assign({type:"text",error:r.touched&&r.error&&!0,helperText:function(){const[e,a]=Object(Le.at)(r,"touched","error");if(e&&a)return a}()},n,t))}const _c=["label","data"];function Qc(e){const{label:a,data:t}=e,n=Object(Ea.a)(e,_c),[r,o]=Object(Pa.f)(e),{value:c}=r,[i,s]=Object(Le.at)(o,"touched","error"),m=i&&s&&!0;return l.a.createElement(Ha.a,Object.assign({},n,{error:m}),l.a.createElement(Va.a,null,a),l.a.createElement(Ua.a,Object.assign({},r,{value:c||""}),t.map((e,a)=>l.a.createElement(I.a,{key:a,value:e.value},e.label))),function(){if(m)return l.a.createElement(wt.a,null,s)}())}Qc.defaultProps={data:[]};var Kc=Qc;t(90),t(1252),t(701);const Zc=[{value:"BR",label:"Brasil"},{value:"usa",label:"United States"}];function Jc(e){const{user:a}=Object(n.useContext)(Xe),[t,r]=Object(n.useState)(a.company.billingName),[o,c]=Object(n.useState)(a.company.addressZipCode),[i,s]=Object(n.useState)(a.company.addressStreet),[m,d]=Object(n.useState)(a.company.addressState),[u,p]=Object(n.useState)(a.company.addressCity),[g,E]=Object(n.useState)(a.company.addressDistrict),{formField:{firstName:b,address1:h,city:f,state:y,zipcode:v,country:O},setFieldValue:C}=e;return Object(n.useEffect)(()=>{C("firstName",t),C("zipcode",o),C("address2",i),C("state",m),C("city",u),C("country",g)},[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{variant:"h6",gutterBottom:!0},"Vamos precisar de algumas informa\xe7\xf5es"),l.a.createElement(kt.a,{container:!0,spacing:3},l.a.createElement(kt.a,{item:!0,xs:6,sm:6},l.a.createElement(Gc,{name:b.name,label:b.label,fullWidth:!0,value:t,onChange:e=>{r(e.target.value),C("firstName",e.target.value)}})),l.a.createElement(kt.a,{item:!0,xs:6,sm:6},l.a.createElement(Kc,{name:O.name,label:O.label,data:Zc,fullWidth:!0,value:g,onChange:e=>{E(e.target.value),C("country",e.target.value)}})),l.a.createElement(kt.a,{item:!0,xs:4},l.a.createElement(Gc,{name:v.name,label:v.label,fullWidth:!0,value:o,onChange:e=>{c(e.target.value),C("zipcode",e.target.value)}})),l.a.createElement(kt.a,{item:!0,xs:8},l.a.createElement(Gc,{name:h.name,label:h.label,fullWidth:!0,value:i,onChange:e=>{s(e.target.value),C("address2",e.target.value)}})),l.a.createElement(kt.a,{item:!0,xs:4},l.a.createElement(Gc,{name:y.name,label:y.label,fullWidth:!0,value:m,onChange:e=>{d(e.target.value),C("state",e.target.value)}})),l.a.createElement(kt.a,{item:!0,xs:8},l.a.createElement(Gc,{name:f.name,label:f.label,fullWidth:!0,value:u,onChange:e=>{p(e.target.value),C("city",e.target.value)}}))))}var Xc=t(1245),$c=t(1244),ei=t(679),ai=t.n(ei);const ti=Object(y.a)(e=>({"@global":{ul:{margin:0,padding:0,listStyle:"none"}},margin:{margin:e.spacing(1)},cardHeader:{backgroundColor:"light"===e.palette.type?e.palette.grey[200]:e.palette.grey[700]},cardPricing:{display:"flex",justifyContent:"center",alignItems:"baseline",marginBottom:e.spacing(2)},footer:{borderTop:"1px solid ".concat(e.palette.divider),marginTop:e.spacing(8),paddingTop:e.spacing(3),paddingBottom:e.spacing(3),[e.breakpoints.up("sm")]:{paddingTop:e.spacing(6),paddingBottom:e.spacing(6)}},customCard:{display:"flex",marginTop:"16px",alignItems:"center",flexDirection:"column"},custom:{display:"flex",alignItems:"center",justifyContent:"space-between"}}));function ni(e){const{setFieldValue:a,setActiveStep:t,activeStep:r}=e,{list:o,finder:c}=fo(),{find:i}=fn(),s=ti(),[m,d]=l.a.useState(3),[u,p]=Object(n.useState)(0),[g,E]=l.a.useState(3),[b,h]=l.a.useState([]),[f,y]=l.a.useState(49),[v,O]=l.a.useState(!1),C=localStorage.getItem("companyId");Object(n.useEffect)(()=>{!async function(){await x()}()},[]);const x=async()=>{O(!0);try{const e=await i(C);p(e.planId),await S(e.planId)}catch(e){console.log(e)}O(!1)},S=async e=>{O(!0);try{const a=await c(e),t=[];t.push({title:a.name,planId:a.id,price:a.value,description:["".concat(a.users," Usu\xe1rios"),"".concat(a.connections," Conex\xe3o"),"".concat(a.queues," Filas")],users:a.users,connections:a.connections,queues:a.queues,buttonText:"SELECIONAR",buttonVariant:"outlined"}),h(t)}catch(a){console.log(a)}O(!1)},j=b;return l.a.createElement(l.a.Fragment,null,l.a.createElement(kt.a,{container:!0,spacing:3},j.map(e=>l.a.createElement(kt.a,{item:!0,key:e.title,xs:12,sm:(e.title,12),md:12},l.a.createElement(Xt.a,null,l.a.createElement($t.a,{title:e.title,subheader:e.subheader,titleTypographyProps:{align:"center"},subheaderTypographyProps:{align:"center"},action:"Pro"===e.title?l.a.createElement(ai.a,null):null,className:s.cardHeader}),l.a.createElement($c.a,null,l.a.createElement("div",{className:s.cardPricing},l.a.createElement(w.a,{component:"h2",variant:"h3",color:"textPrimary"},l.a.createElement(l.a.Fragment,null,"R$",e.price.toLocaleString("pt-br",{minimumFractionDigits:2}))),l.a.createElement(w.a,{variant:"h6",color:"textSecondary"},"/m\xeas")),l.a.createElement("ul",null,e.description.map(e=>l.a.createElement(w.a,{component:"li",variant:"subtitle1",align:"center",key:e},e)))),l.a.createElement(Xc.a,null,l.a.createElement(ba.a,{fullWidth:!0,variant:e.buttonVariant,color:"primary",onClick:()=>{e.custom?a("plan",JSON.stringify({users:m,connections:g,price:f})):a("plan",JSON.stringify(e)),t(r+1)}},e.buttonText)))))))}var li=Object(y.a)(e=>({listItem:{padding:e.spacing(1,0)},total:{fontWeight:"700"},title:{marginTop:e.spacing(2)}}));var ri=function(e){const{formValues:a}=e,t=li(),{plan:n}=a,r=JSON.parse(n),{users:o,connections:c,price:i}=r;return l.a.createElement(kt.a,{item:!0,xs:12,sm:12},l.a.createElement(w.a,{variant:"h6",gutterBottom:!0,className:t.title},"Detalhes do plano"),l.a.createElement(w.a,{gutterBottom:!0},"Usu\xe1rios: ",o),l.a.createElement(w.a,{gutterBottom:!0},"Whatsapps: ",c),l.a.createElement(w.a,{gutterBottom:!0},"Cobran\xe7a: Mensal"),l.a.createElement(w.a,{gutterBottom:!0},"Total: R$",i.toLocaleString("pt-br",{minimumFractionDigits:2})))};var oi,ci,ii,si,mi=function(){const{values:e}=Object(Pa.g)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{variant:"h6",gutterBottom:!0},"Resumo da assinatura"),l.a.createElement(kt.a,{container:!0,spacing:2},l.a.createElement(ri,{formValues:e})))},di=t(680),ui=t.n(di),pi=t(276),gi=t(160);gi.default.div(oi||(oi=Object(pi.a)(["\n  footer {\n    margin-top: 30px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n\n    @media (max-width: 768px) {\n      flex-direction: column;\n      .checkout-buttons {\n        display: flex;\n        flex-direction: column-reverse;\n        width: 100%;\n\n        button {\n          width: 100%;\n          margin-top: 16px;\n          margin-left: 0;\n        }\n      }\n    }\n\n    button {\n      margin-left: 16px;\n    }\n  }\n"])));const Ei=gi.default.div(ci||(ci=Object(pi.a)(["\n  display: flex;\n  align-items: baseline;\n\n  span {\n    color: #333;\n    font-weight: bold;\n  }\n\n  strong {\n    color: #333;\n    font-size: 28px;\n    margin-left: 5px;\n  }\n\n  @media (max-width: 768px) {\n    min-width: 100%;\n    justify-content: space-between;\n  }\n"]))),bi=gi.default.div(ii||(ii=Object(pi.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  > h2 {\n    text-align: center;\n  }\n\n  > svg {\n    margin-top: 16px;\n  }\n\n  > span {\n    margin-top: 24px;\n    text-align: center;\n  }\n\n  > p,\n  strong {\n    margin-top: 8px;\n    font-size: 9px;\n    color: #999;\n  }\n\n  .copy-button {\n    font-size: 14px;\n    cursor: pointer;\n    text-align: center;\n    user-select: none;\n    min-height: 56px;\n    display: inline-flex;\n    -webkit-box-pack: center;\n    justify-content: center;\n    -webkit-box-align: center;\n    align-items: center;\n    background-color: #f9f9f9;\n    color: #000;\n    -webkit-appearance: none !important;\n    outline: none;\n    margin-top: 16px;\n    width: 256px;\n    font-weight: 600;\n    text-transform: uppercase;\n    border: none;\n\n    > span {\n      margin-right: 8px;\n    }\n  }\n"])));gi.default.div(si||(si=Object(pi.a)(["\n  width: 100%;\n  margin: 0 auto 0;\n  max-width: 1110px;\n  display: flex;\n  flex-direction: column;\n  -webkit-box-align: center;\n  align-items: center;\n  padding: 50px 95px;\n  background: #fff;\n  @media (max-width: 768px) {\n    padding: 16px 24px;\n"])));var hi=t(684),fi=t(453);var yi=function(e){const{pix:a}=e,[t]=Object(n.useState)(a.qrcode.qrcode),[r,o]=Object(n.useState)(!1),c=Object(E.g)(),{dateToClient:i}=et();return Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId");He({companyId:e}).on("company-".concat(e,"-payment"),e=>{"CONCLUIDA"===e.action&&(b.b.success("Sua licen\xe7a foi renovada at\xe9 ".concat(i(e.company.dueDate),"!")),setTimeout(()=>{c.push("/")},4e3))})},[c,i]),l.a.createElement(l.a.Fragment,null,l.a.createElement(Ei,null,l.a.createElement("span",null,"TOTAL"),l.a.createElement("strong",null,"R$",a.valor.original.toLocaleString("pt-br",{minimumFractionDigits:2}))),l.a.createElement(bi,null,l.a.createElement(ui.a,{value:t}),l.a.createElement(hi.CopyToClipboard,{text:t,onCopy:()=>{setTimeout(()=>{o(!1)},1e3),o(!0)}},l.a.createElement("button",{className:"copy-button",type:"button"},r?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,"Copiado"),l.a.createElement(fi.a,{size:18})):l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,"Copiar c\xf3digo QR"),l.a.createElement(fi.b,{size:18})))),l.a.createElement("span",null,"Para finalizar, basta realizar o pagamento escaneando ou colando o c\xf3digo Pix acima :)")))},vi={formId:"checkoutForm",formField:{firstName:{name:"firstName",label:"Nome completo*",requiredErrorMsg:"O nome completo \xe9 obrigat\xf3rio"},lastName:{name:"lastName",label:"Last name*",requiredErrorMsg:"Last name is required"},address1:{name:"address2",label:"Endere\xe7o*",requiredErrorMsg:"O Endere\xe7o \xe9 obrigat\xf3rio"},city:{name:"city",label:"Cidade*",requiredErrorMsg:"Cidade \xe9 obrigat\xf3ria"},state:{name:"state",label:"Estado*",requiredErrorMsg:"Cidade \xe9 obrigat\xf3ria"},zipcode:{name:"zipcode",label:"CEP*",requiredErrorMsg:"CEP \xe9 obrigat\xf3rio",invalidErrorMsg:"Formato de CEP inv\xe1lido"},country:{name:"country",label:"Pa\xeds*",requiredErrorMsg:"Pa\xeds \xe9 obrigat\xf3rio"},useAddressForPaymentDetails:{name:"useAddressForPaymentDetails",label:"Use this address for payment details"},invoiceId:{name:"invoiceId",label:"Use this invoiceId"},nameOnCard:{name:"nameOnCard",label:"Name on card*",requiredErrorMsg:"Name on card is required"},cardNumber:{name:"cardNumber",label:"Card number*",requiredErrorMsg:"Card number is required",invalidErrorMsg:"Card number is not valid (e.g. 4111111111111)"},expiryDate:{name:"expiryDate",label:"Expiry date*",requiredErrorMsg:"Expiry date is required",invalidErrorMsg:"Expiry date is not valid"},cvv:{name:"cvv",label:"CVV*",requiredErrorMsg:"CVV is required",invalidErrorMsg:"CVV is invalid (e.g. 357)"}}};const{formField:{firstName:Oi,address1:Ci,city:xi,zipcode:Si,country:ji}}=vi;var ki=[La.b().shape({[Oi.name]:La.c().required("".concat(Oi.requiredErrorMsg)),[Ci.name]:La.c().required("".concat(Ci.requiredErrorMsg)),[xi.name]:La.c().nullable().required("".concat(xi.requiredErrorMsg)),[Si.name]:La.c().required("".concat(Si.requiredErrorMsg)),[ji.name]:La.c().nullable().required("".concat(ji.requiredErrorMsg))})];const{formField:{firstName:wi,lastName:Ti,address1:Ii,city:Ai,state:Ni,zipcode:Mi,country:Ri,useAddressForPaymentDetails:Di,nameOnCard:Li,cardNumber:Pi,invoiceId:Wi,cvv:qi}}=vi;var Fi={[wi.name]:"",[Ti.name]:"",[Ii.name]:"",[Ai.name]:"",[Ni.name]:"",[Mi.name]:"",[Ri.name]:"",[Di.name]:!1,[Li.name]:"",[Pi.name]:"",[Wi.name]:"",[qi.name]:""},zi=Object(y.a)(e=>({stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},wrapper:{margin:e.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%"}}));var Bi=function(e){const a=["Dados","Personalizar","Revisar"],{formId:t,formField:r}=vi,o=zi(),[c,i]=Object(n.useState)(1),[s,m]=Object(n.useState)(null),[d]=Object(n.useState)(e.Invoice.id),u=ki[c],p=c===a.length-1,{user:g}=Object(n.useContext)(Xe);function E(){i(c-1)}return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{component:"h1",variant:"h4",align:"center"},"Falta pouco!"),l.a.createElement(Uc.a,{activeStep:c,className:o.stepper},a.map(e=>l.a.createElement(Vc.a,{key:e},l.a.createElement(Hc.a,null,e)))),l.a.createElement(l.a.Fragment,null,c===a.length?l.a.createElement(yi,{pix:s}):l.a.createElement(Pa.e,{initialValues:Object(h.a)(Object(h.a)({},g),Fi),validationSchema:u,onSubmit:function(e,a){p?async function(e,a){try{const t=JSON.parse(e.plan),n={firstName:e.firstName,lastName:e.lastName,address2:e.address2,city:e.city,state:e.state,zipcode:e.zipcode,country:e.country,useAddressForPaymentDetails:e.useAddressForPaymentDetails,nameOnCard:e.nameOnCard,cardNumber:e.cardNumber,cvv:e.cvv,plan:e.plan,price:t.price,users:t.users,connections:t.connections,invoiceId:d},{data:l}=await Be.post("/subscription",n);m(l),a.setSubmitting(!0),i(c+1),b.b.success("Assinatura realizada com sucesso!, aguardando a realiza\xe7\xe3o do pagamento")}catch(t){a.setSubmitting(!1),Pe(t)}}(e,a):(i(c+1),a.setTouched({}),a.setSubmitting(!1))}},e=>{let{isSubmitting:a,setFieldValue:n,values:s}=e;return l.a.createElement(Pa.d,{id:t},function(e,a,t,n){switch(e){case 0:return l.a.createElement(Jc,{formField:r,values:n,setFieldValue:a});case 1:return l.a.createElement(ni,{formField:r,setFieldValue:a,setActiveStep:t,activeStep:e,invoiceId:d,values:n});case 2:return l.a.createElement(mi,null);default:return l.a.createElement("div",null,"Not Found")}}(c,n,i,s),l.a.createElement("div",{className:o.buttons},1!==c&&l.a.createElement(ba.a,{onClick:E,className:o.button},"VOLTAR"),l.a.createElement("div",{className:o.wrapper},1!==c&&l.a.createElement(ba.a,{disabled:a,type:"submit",variant:"contained",color:"primary",className:o.button},p?"PAGAR":"PR\xd3XIMO"),a&&l.a.createElement(ha.a,{size:24,className:o.buttonProgress}))))})))};const Ui=Object(y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:ua.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}));var Vi=e=>{let{open:a,onClose:t,Invoice:r,contactId:o,initialValues:c,onSave:i}=e;const s=Ui(),m=Object(n.useRef)(!0);Object(n.useEffect)(()=>()=>{m.current=!1},[]);return l.a.createElement("div",{className:s.root},l.a.createElement(qa.a,{open:a,onClose:()=>{t()},maxWidth:"md",scroll:"paper"},l.a.createElement(za.a,{dividers:!0},l.a.createElement(Bi,{Invoice:r}))))};const Hi=(e,a)=>{if("LOAD_INVOICES"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_USERS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_USER"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},Yi=Object(y.a)(e=>({mainPaper:Object(h.a)({flex:1,padding:e.spacing(1),overflowY:"scroll"},e.scrollbarStyles)}));var Gi=()=>{const e=Yi(),[a,t]=Object(n.useState)(!1),[r,o]=Object(n.useState)(1),[c,i]=Object(n.useState)(!1),[s]=Object(n.useState)(""),[m,d]=Object(n.useReducer)(Hi,[]),[u,p]=l.a.useState([]),[g,E]=Object(n.useState)(null),[b,h]=Object(n.useState)(!1);Object(n.useEffect)(()=>{d({type:"RESET"}),o(1)},[s]),Object(n.useEffect)(()=>{t(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await Be.get("/invoices/all",{params:{searchParam:s,pageNumber:r}});d({type:"LOAD_INVOICES",payload:e}),i(e.hasMore),t(!1)}catch(e){Pe(e)}})()},500);return()=>clearTimeout(e)},[s,r]);const f=e=>{const a=Ze()(Ze()()).format("DD/MM/yyyy"),t=Ze()(e.dueDate).format("DD/MM/yyyy");var n=Ze()(t,"DD/MM/yyyy").diff(Ze()(a,"DD/MM/yyyy"));if(Ze.a.duration(n).asDays()<0&&"paid"!==e.status)return{backgroundColor:"#ffbcbc9c"}},y=e=>{const a=Ze()(Ze()()).format("DD/MM/yyyy"),t=Ze()(e.dueDate).format("DD/MM/yyyy");var n=Ze()(t,"DD/MM/yyyy").diff(Ze()(a,"DD/MM/yyyy")),l=Ze.a.duration(n).asDays();return"paid"===e.status?"Pago":l<0?"Vencido":"Em Aberto"};return l.a.createElement(Ho,null,l.a.createElement(Vi,{open:b,onClose:()=>{E(null),h(!1)},"aria-labelledby":"form-dialog-title",Invoice:u,contactId:g}),l.a.createElement(Go,null,l.a.createElement(Ko,null,"Faturas")),l.a.createElement(lt.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!c||a)return;const{scrollTop:t,scrollHeight:n,clientHeight:l}=e.currentTarget;n-(t+100)<l&&o(e=>e+1)}},l.a.createElement(nn.a,{size:"small"},l.a.createElement(cn.a,null,l.a.createElement(sn.a,null,l.a.createElement(rn.a,{align:"center"},"Id"),l.a.createElement(rn.a,{align:"center"},"Detalhes"),l.a.createElement(rn.a,{align:"center"},"Valor"),l.a.createElement(rn.a,{align:"center"},"Data Venc."),l.a.createElement(rn.a,{align:"center"},"Status"),l.a.createElement(rn.a,{align:"center"},"A\xe7\xe3o"))),l.a.createElement(ln.a,null,l.a.createElement(l.a.Fragment,null,m.map(e=>l.a.createElement(sn.a,{style:f(e),key:e.id},l.a.createElement(rn.a,{align:"center"},e.id),l.a.createElement(rn.a,{align:"center"},e.detail),l.a.createElement(rn.a,{style:{fontWeight:"bold"},align:"center"},e.value.toLocaleString("pt-br",{style:"currency",currency:"BRL"})),l.a.createElement(rn.a,{align:"center"},Ze()(e.dueDate).format("DD/MM/YYYY")),l.a.createElement(rn.a,{style:{fontWeight:"bold"},align:"center"},y(e)),l.a.createElement(rn.a,{align:"center"},"Pago"!==y(e)?l.a.createElement(ba.a,{size:"small",variant:"outlined",color:"secondary",onClick:()=>(e=>{p(e),E(null),h(!0)})(e)},"PAGAR"):l.a.createElement(ba.a,{size:"small",variant:"outlined"},"PAGO")))),a&&l.a.createElement(Jo,{columns:4}))))))},_i=t(60),Qi=t.n(_i);const Ki=(e,a)=>{if("LOAD_USERS"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_USERS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_USER"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},Zi=Object(y.a)(e=>({mainPaper:Object(h.a)({flex:1,padding:e.spacing(1),overflowY:"scroll"},e.scrollbarStyles)}));var Ji=()=>{const e=Zi(),[a,t]=Object(n.useState)(!1),[r,o]=Object(n.useState)(1),[c,i]=Object(n.useState)(!1),[s,m]=Object(n.useState)(null),[d,u]=Object(n.useState)(null),[p,g]=Object(n.useState)(!1),[E,h]=Object(n.useState)(!1),[f,y]=Object(n.useState)(""),[v,O]=Object(n.useReducer)(Ki,[]);Object(n.useEffect)(()=>{O({type:"RESET"}),o(1)},[f]),Object(n.useEffect)(()=>{t(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await Be.get("/users/",{params:{searchParam:f,pageNumber:r}});O({type:"LOAD_USERS",payload:e.users}),i(e.hasMore),t(!1)}catch(e){Pe(e)}})()},500);return()=>clearTimeout(e)},[f,r]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=He({companyId:e});return a.on("company-".concat(e,"-user"),e=>{"update"!==e.action&&"create"!==e.action||O({type:"UPDATE_USERS",payload:e.user}),"delete"===e.action&&O({type:"DELETE_USER",payload:+e.userId})}),()=>{a.disconnect()}},[]);return l.a.createElement(Ho,null,l.a.createElement(ol,{title:d&&"".concat(Me.a.t("users.confirmationModal.deleteTitle")," ").concat(d.name,"?"),open:E,onClose:h,onConfirm:()=>(async e=>{try{await Be.delete("/users/".concat(e)),b.b.success(Me.a.t("users.toasts.deleted"))}catch(a){Pe(a)}u(null),y(""),o(1)})(d.id)},Me.a.t("users.confirmationModal.deleteMessage")),l.a.createElement(Za,{open:p,onClose:()=>{m(null),g(!1)},"aria-labelledby":"form-dialog-title",userId:s&&s.id}),l.a.createElement(Go,null,l.a.createElement(Ko,null,Me.a.t("users.title")),l.a.createElement(Qo,null,l.a.createElement(Wa.a,{placeholder:Me.a.t("contacts.searchPlaceholder"),type:"search",value:f,onChange:e=>{y(e.target.value.toLowerCase())},InputProps:{startAdornment:l.a.createElement(So.a,{position:"start"},l.a.createElement(xn.a,{style:{color:"gray"}}))}}),l.a.createElement(ba.a,{variant:"contained",color:"primary",onClick:()=>{m(null),g(!0)}},Me.a.t("users.buttons.add")))),l.a.createElement(lt.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!c||a)return;const{scrollTop:t,scrollHeight:n,clientHeight:l}=e.currentTarget;n-(t+100)<l&&o(e=>e+1)}},l.a.createElement(nn.a,{size:"small"},l.a.createElement(cn.a,null,l.a.createElement(sn.a,null,l.a.createElement(rn.a,{align:"center"},Me.a.t("users.table.name")),l.a.createElement(rn.a,{align:"center"},Me.a.t("users.table.email")),l.a.createElement(rn.a,{align:"center"},Me.a.t("users.table.profile")),l.a.createElement(rn.a,{align:"center"},Me.a.t("users.table.actions")))),l.a.createElement(ln.a,null,l.a.createElement(l.a.Fragment,null,v.map(e=>l.a.createElement(sn.a,{key:e.id},l.a.createElement(rn.a,{align:"center"},e.name),l.a.createElement(rn.a,{align:"center"},e.email),l.a.createElement(rn.a,{align:"center"},e.profile),l.a.createElement(rn.a,{align:"center"},l.a.createElement(C.a,{size:"small",onClick:()=>(e=>{m(e),g(!0)})(e)},l.a.createElement(Qi.a,null)),l.a.createElement(C.a,{size:"small",onClick:a=>{h(!0),u(e)}},l.a.createElement(Pn.a,null))))),a&&l.a.createElement(Jo,{columns:4}))))))},Xi=t(685);const $i=(e,a)=>{if("LOAD_CONTACTS"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_CONTACTS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_CONTACT"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},es=Object(y.a)(e=>({mainPaper:Object(h.a)({flex:1,padding:e.spacing(1),overflowY:"scroll"},e.scrollbarStyles)}));var as=()=>{const e=es(),a=Object(E.g)(),{user:t}=Object(n.useContext)(Xe),[r,o]=Object(n.useState)(!1),[c,i]=Object(n.useState)(1),[s,m]=Object(n.useState)(""),[d,u]=Object(n.useReducer)($i,[]),[p,g]=Object(n.useState)(null),[h,f]=Object(n.useState)(!1),[y,v]=Object(n.useState)(!1),[O,x]=Object(n.useState)({}),[S,j]=Object(n.useState)(null),[k,w]=Object(n.useState)(!1),[T,I]=Object(n.useState)(!1);Object(n.useEffect)(()=>{u({type:"RESET"}),i(1)},[s]),Object(n.useEffect)(()=>{o(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await Be.get("/contacts/",{params:{searchParam:s,pageNumber:c}});u({type:"LOAD_CONTACTS",payload:e.contacts}),I(e.hasMore),o(!1)}catch(e){Pe(e)}})()},500);return()=>clearTimeout(e)},[s,c]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=He({companyId:e});return a.on("company-".concat(e,"-contact"),e=>{"update"!==e.action&&"create"!==e.action||u({type:"UPDATE_CONTACTS",payload:e.contact}),"delete"===e.action&&u({type:"DELETE_CONTACT",payload:+e.contactId})}),()=>{a.disconnect()}},[]);return l.a.createElement(Ho,{className:e.mainContainer},l.a.createElement(Bn,{modalOpen:y,initialContact:O,onClose:e=>{(e=>{v(!1),void 0!==e&&void 0!==e.uuid&&a.push("/tickets/".concat(e.uuid))})(e)}}),l.a.createElement(Fn,{open:h,onClose:()=>{g(null),f(!1)},"aria-labelledby":"form-dialog-title",contactId:p}),l.a.createElement(ol,{title:S?"".concat(Me.a.t("contacts.confirmationModal.deleteTitle")," ").concat(S.name,"?"):"".concat(Me.a.t("contacts.confirmationModal.importTitlte")),open:k,onClose:w,onConfirm:e=>S?(async e=>{try{await Be.delete("/contacts/".concat(e)),b.b.success(Me.a.t("contacts.toasts.deleted"))}catch(a){Pe(a)}j(null),m(""),i(1)})(S.id):(async()=>{try{await Be.post("/contacts/import"),a.go(0)}catch(e){Pe(e)}})()},"".concat(S?Me.a.t("contacts.confirmationModal.deleteMessage"):Me.a.t("contacts.confirmationModal.importMessage"))),l.a.createElement(Go,null,l.a.createElement(Ko,null,Me.a.t("contacts.title")),l.a.createElement(Qo,null,l.a.createElement(Wa.a,{placeholder:Me.a.t("contacts.searchPlaceholder"),type:"search",value:s,onChange:e=>{m(e.target.value.toLowerCase())},InputProps:{startAdornment:l.a.createElement(So.a,{position:"start"},l.a.createElement(xn.a,{style:{color:"gray"}}))}}),l.a.createElement(ba.a,{variant:"contained",color:"primary",onClick:e=>w(!0)},Me.a.t("contacts.buttons.import")),l.a.createElement(ba.a,{variant:"contained",color:"primary",onClick:()=>{g(null),f(!0)}},Me.a.t("contacts.buttons.add")),l.a.createElement(Xi.CSVLink,{style:{textDecoration:"none"},separator:";",filename:"contatos_chatbot.csv",data:d.map(e=>({name:e.name,number:e.number,email:e.email}))},l.a.createElement(ba.a,{variant:"contained",color:"primary"},"EXPORTAR CONTATOS")))),l.a.createElement(lt.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!T||r)return;const{scrollTop:a,scrollHeight:t,clientHeight:n}=e.currentTarget;t-(a+100)<n&&i(e=>e+1)}},l.a.createElement(nn.a,{size:"small"},l.a.createElement(cn.a,null,l.a.createElement(sn.a,null,l.a.createElement(rn.a,{padding:"checkbox"}),l.a.createElement(rn.a,null,Me.a.t("contacts.table.name")),l.a.createElement(rn.a,{align:"center"},Me.a.t("contacts.table.whatsapp")),l.a.createElement(rn.a,{align:"center"},Me.a.t("contacts.table.email")),l.a.createElement(rn.a,{align:"center"},Me.a.t("contacts.table.actions")))),l.a.createElement(ln.a,null,l.a.createElement(l.a.Fragment,null,d.map(e=>l.a.createElement(sn.a,{key:e.id},l.a.createElement(rn.a,{style:{paddingRight:0}},l.a.createElement(ga.a,{src:e.profilePicUrl})),l.a.createElement(rn.a,null,e.name),l.a.createElement(rn.a,{align:"center"},e.number),l.a.createElement(rn.a,{align:"center"},e.email),l.a.createElement(rn.a,{align:"center"},l.a.createElement(C.a,{size:"small",onClick:()=>{x(e),v(!0)}},l.a.createElement(V.a,null)),l.a.createElement(C.a,{size:"small",onClick:()=>{return a=e.id,g(a),void f(!0);var a}},l.a.createElement(Qi.a,null)),l.a.createElement(aa,{role:t.profile,perform:"contacts-page:deleteContact",yes:()=>l.a.createElement(C.a,{size:"small",onClick:a=>{w(!0),j(e)}},l.a.createElement(Pn.a,null))})))),r&&l.a.createElement(Jo,{avatar:!0,columns:3}))))))},ts=t(700);var ns=e=>{let{onChange:a,currentColor:t,handleClose:r,open:o}=e;const[c,i]=Object(n.useState)(t);return l.a.createElement(qa.a,{onClose:r,"aria-labelledby":"simple-dialog-title",open:o},l.a.createElement(ts.a,{width:"100%",triangle:"hide",color:c,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB","#4D4D4D","#999999","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],onChange:e=>{i(e.hex),r()},onChangeComplete:e=>a(e.hex)}))},ls=t(1248),rs=t(1247),os=t(350),cs=t.n(os),is=t(688),ss=t.n(is);const ms=Object(y.a)(e=>({root:{width:"100%",[e.breakpoints.down("sm")]:{maxHeight:"20vh"}},button:{marginRight:e.spacing(1)},input:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},addButton:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}}));function ds(e){let{queueId:a,options:t,updateOptions:r}=e;const o=ms(),[c,i]=Object(n.useState)(-1),s=e=>async()=>{i(e);const n=t[e];if(void 0!==n&&void 0!==n.id)try{const{data:e}=await Be.request({url:"/queue-options",method:"GET",params:{queueId:a,parentId:n.id}}),t=e.map(e=>Object(h.a)(Object(h.a)({},e),{},{children:[],edition:!1}));n.children=t,r()}catch(l){Pe(l)}},m=async e=>{try{if(e.id)await Be.request({url:"/queue-options/".concat(e.id),method:"PUT",data:e});else{const{data:a}=await Be.request({url:"/queue-options",method:"POST",data:e});e.id=a.id}e.edition=!1,r()}catch(a){Pe(a)}},d=e=>{t[e].edition=!t[e].edition,r()},u=e=>{const a=t[e];return a.edition?l.a.createElement(l.a.Fragment,null,l.a.createElement(Wa.a,{value:a.title,onChange:a=>((e,a)=>{t[a].title=e.target.value,r()})(a,e),size:"small",className:o.input,placeholder:"T\xedtulo da op\xe7\xe3o"}),a.edition&&l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{color:"primary",variant:"outlined",size:"small",className:o.button,onClick:()=>m(a)},l.a.createElement(ss.a,null)),l.a.createElement(C.a,{variant:"outlined",color:"secondary",size:"small",className:o.button,onClick:()=>(async e=>{const a=t[e];if(void 0!==a&&void 0!==a.id)try{await Be.request({url:"/queue-options/".concat(a.id),method:"DELETE"})}catch(n){Pe(n)}t.splice(e,1),t.forEach(async(e,a)=>{e.option=a+1,await m(e)}),r()})(e)},l.a.createElement(Pn.a,null)))):l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,null,""!==a.title?a.title:"T\xedtulo n\xe3o definido",l.a.createElement(C.a,{variant:"outlined",size:"small",className:o.button,onClick:()=>d(e)},l.a.createElement(Qi.a,null))))},p=e=>{const a=t[e];return a.edition?l.a.createElement(l.a.Fragment,null,l.a.createElement(Wa.a,{style:{width:"100%"},multiline:!0,value:a.message,onChange:a=>((e,a)=>{t[a].message=e.target.value,r()})(a,e),size:"small",className:o.input,placeholder:"Digite o texto da op\xe7\xe3o"})):l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{onClick:()=>d(e)},a.message))},g=(e,n)=>l.a.createElement(Vc.a,{key:n},l.a.createElement(Hc.a,{style:{cursor:"pointer"},onClick:s(n)},u(n)),l.a.createElement(rs.a,null,p(n),void 0!==e.id&&l.a.createElement(l.a.Fragment,null,l.a.createElement(ba.a,{color:"primary",size:"small",onClick:()=>(e=>{const n=t[e].children.length+1;t[e].children.push({title:"",message:"",edition:!1,option:n,queueId:a,parentId:t[e].id,children:[]}),r()})(n),startIcon:l.a.createElement(cs.a,null),variant:"outlined",className:o.addButton},"Adicionar")),l.a.createElement(ds,{queueId:a,options:e.children,updateOptions:r})));return l.a.createElement(Uc.a,{style:{marginBottom:0,paddingBottom:0},nonLinear:!0,activeStep:c,orientation:"vertical"},t.map((e,a)=>g(e,a)))}function us(e){let{queueId:a}=e;const t=ms(),[r,o]=Object(n.useState)([]);Object(n.useEffect)(()=>{if(a){(async()=>{try{const{data:e}=await Be.request({url:"/queue-options",method:"GET",params:{queueId:a,parentId:-1}}),t=e.map(e=>Object(h.a)(Object(h.a)({},e),{},{children:[],edition:!1}));o(t)}catch(e){Pe(e)}})()}},[]);const c=()=>{o([...r])};return l.a.createElement("div",{className:t.root},l.a.createElement("br",null),l.a.createElement(w.a,null,"Op\xe7\xf5es",l.a.createElement(ba.a,{color:"primary",size:"small",onClick:()=>{const e={title:"",message:"",edition:!1,option:r.length+1,queueId:a,parentId:null,children:[]};o([...r,e])},startIcon:l.a.createElement(cs.a,null),style:{marginLeft:10},variant:"outlined"},"Adicionar")),(()=>{if(r.length>0)return l.a.createElement(ds,{queueId:a,updateOptions:c,options:r})})())}const ps=Object(y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},btnWrapper:{position:"relative"},buttonProgress:{color:ua.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120},colorAdorment:{width:20,height:20}})),gs=La.b().shape({name:La.c().min(2,"Too Short!").max(50,"Too Long!").required("Required"),color:La.c().min(3,"Too Short!").max(9,"Too Long!").required(),greetingMessage:La.c()});var Es=e=>{let{open:a,onClose:t,queueId:r}=e;const o=ps(),c={name:"",color:"",greetingMessage:"",outOfHoursMessage:""},[i,s]=Object(n.useState)(!1),[m,d]=Object(n.useState)(c),[u,p]=Object(n.useState)(0),[g,E]=Object(n.useState)(!1),f=Object(n.useRef)(),[y,v]=Object(n.useState)([{weekday:"Segunda-feira",weekdayEn:"monday",startTime:"08:00",endTime:"18:00"},{weekday:"Ter\xe7a-feira",weekdayEn:"tuesday",startTime:"08:00",endTime:"18:00"},{weekday:"Quarta-feira",weekdayEn:"wednesday",startTime:"08:00",endTime:"18:00"},{weekday:"Quinta-feira",weekdayEn:"thursday",startTime:"08:00",endTime:"18:00"},{weekday:"Sexta-feira",weekdayEn:"friday",startTime:"08:00",endTime:"18:00"},{weekday:"S\xe1bado",weekdayEn:"saturday",startTime:"08:00",endTime:"12:00"},{weekday:"Domingo",weekdayEn:"sunday",startTime:"00:00",endTime:"00:00"}]);Object(n.useEffect)(()=>{Be.get("/settings").then(e=>{let{data:a}=e;if(Array.isArray(a)){const e=a.find(e=>"scheduleType"===e.key);e&&E("queue"===e.value)}})},[]),Object(n.useEffect)(()=>((async()=>{if(r)try{const{data:e}=await Be.get("/queue/".concat(r));d(a=>Object(h.a)(Object(h.a)({},a),e)),v(e.schedules)}catch(e){Pe(e)}})(),()=>{d({name:"",color:"",greetingMessage:""})}),[r,a]);const O=()=>{t(),d(c)};return l.a.createElement("div",{className:o.root},l.a.createElement(qa.a,{maxWidth:"md",fullWidth:!0,open:a,onClose:O,scroll:"paper"},l.a.createElement(Ba.a,null,"".concat(r?Me.a.t("queueModal.title.edit"):Me.a.t("queueModal.title.add"))),l.a.createElement(jn.a,{value:u,indicatorColor:"primary",textColor:"primary",onChange:(e,a)=>p(a),"aria-label":"disabled tabs example"},l.a.createElement(kn.a,{label:"Dados da Fila"}),g&&l.a.createElement(kn.a,{label:"Hor\xe1rios de Atendimento"})),0===u&&l.a.createElement(lt.a,null,l.a.createElement(Pa.e,{initialValues:m,enableReinitialize:!0,validationSchema:gs,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{try{r?await Be.put("/queue/".concat(r),Object(h.a)(Object(h.a)({},e),{},{schedules:y})):await Be.post("/queue",Object(h.a)(Object(h.a)({},e),{},{schedules:y})),b.b.success("Queue saved successfully"),O()}catch(a){Pe(a)}})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:c}=e;return l.a.createElement(Pa.d,null,l.a.createElement(za.a,{dividers:!0},l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("queueModal.form.name"),autoFocus:!0,name:"name",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:"outlined",margin:"dense",className:o.textField}),l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("queueModal.form.color"),name:"color",id:"color",onFocus:()=>{s(!0),f.current.focus()},error:a.color&&Boolean(t.color),helperText:a.color&&t.color,InputProps:{startAdornment:l.a.createElement(So.a,{position:"start"},l.a.createElement("div",{style:{backgroundColor:c.color},className:o.colorAdorment})),endAdornment:l.a.createElement(C.a,{size:"small",color:"default",onClick:()=>s(!0)},l.a.createElement(ls.a,null))},variant:"outlined",margin:"dense",className:o.textField}),l.a.createElement(ns,{open:i,handleClose:()=>s(!1),onChange:e=>{c.color=e,d(()=>Object(h.a)(Object(h.a)({},c),{},{color:e}))}}),l.a.createElement("div",{style:{marginTop:5}},l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("queueModal.form.greetingMessage"),type:"greetingMessage",multiline:!0,inputRef:f,rows:5,fullWidth:!0,name:"greetingMessage",error:a.greetingMessage&&Boolean(t.greetingMessage),helperText:a.greetingMessage&&t.greetingMessage,variant:"outlined",margin:"dense"}),g&&l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("queueModal.form.outOfHoursMessage"),type:"outOfHoursMessage",multiline:!0,rows:5,fullWidth:!0,name:"outOfHoursMessage",error:a.outOfHoursMessage&&Boolean(t.outOfHoursMessage),helperText:a.outOfHoursMessage&&t.outOfHoursMessage,variant:"outlined",margin:"dense"})),l.a.createElement(us,{queueId:r})),l.a.createElement(Fa.a,null,l.a.createElement(ba.a,{onClick:O,color:"secondary",disabled:n,variant:"outlined"},Me.a.t("queueModal.buttons.cancel")),l.a.createElement(ba.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:o.btnWrapper},"".concat(r?Me.a.t("queueModal.buttons.okEdit"):Me.a.t("queueModal.buttons.okAdd")),n&&l.a.createElement(ha.a,{size:24,className:o.buttonProgress}))))})),1===u&&l.a.createElement(lt.a,{style:{padding:20}},l.a.createElement(sc,{loading:!1,onSubmit:async e=>{b.b.success("Clique em salvar para registar as altera\xe7\xf5es"),v(e),p(0)},initialValues:y,labelSaveButton:"Adicionar"}))))};const bs=Object(y.a)(e=>({mainPaper:Object(h.a)({flex:1,padding:e.spacing(1),overflowY:"scroll"},e.scrollbarStyles),customTableCell:{display:"flex",alignItems:"center",justifyContent:"center"}})),hs=(e,a)=>{if("LOAD_QUEUES"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_QUEUES"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_QUEUE"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]};var fs=()=>{const e=bs(),[a,t]=Object(n.useReducer)(hs,[]),[r,o]=Object(n.useState)(!1),[c,i]=Object(n.useState)(!1),[s,m]=Object(n.useState)(null),[d,u]=Object(n.useState)(!1);Object(n.useEffect)(()=>{(async()=>{o(!0);try{const{data:e}=await Be.get("/queue");t({type:"LOAD_QUEUES",payload:e}),o(!1)}catch(e){Pe(e),o(!1)}})()},[]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=He({companyId:e});return a.on("company-".concat(e,"-queue"),e=>{"update"!==e.action&&"create"!==e.action||t({type:"UPDATE_QUEUES",payload:e.queue}),"delete"===e.action&&t({type:"DELETE_QUEUE",payload:e.queueId})}),()=>{a.disconnect()}},[]);return l.a.createElement(Ho,null,l.a.createElement(ol,{title:s&&"".concat(Me.a.t("queues.confirmationModal.deleteTitle")," ").concat(s.name,"?"),open:d,onClose:()=>{u(!1),m(null)},onConfirm:()=>(async e=>{try{await Be.delete("/queue/".concat(e)),b.b.success(Me.a.t("Queue deleted successfully!"))}catch(a){Pe(a)}m(null)})(s.id)},Me.a.t("queues.confirmationModal.deleteMessage")),l.a.createElement(Es,{open:c,onClose:()=>{i(!1),m(null)},queueId:null===s||void 0===s?void 0:s.id}),l.a.createElement(Go,null,l.a.createElement(Ko,null,Me.a.t("queues.title")),l.a.createElement(Qo,null,l.a.createElement(ba.a,{variant:"contained",color:"primary",onClick:()=>{i(!0),m(null)}},Me.a.t("queues.buttons.add")))),l.a.createElement(lt.a,{className:e.mainPaper,variant:"outlined"},l.a.createElement(nn.a,{size:"small"},l.a.createElement(cn.a,null,l.a.createElement(sn.a,null,l.a.createElement(rn.a,{align:"center"},Me.a.t("queues.table.name")),l.a.createElement(rn.a,{align:"center"},Me.a.t("queues.table.color")),l.a.createElement(rn.a,{align:"center"},Me.a.t("queues.table.greeting")),l.a.createElement(rn.a,{align:"center"},Me.a.t("queues.table.actions")))),l.a.createElement(ln.a,null,l.a.createElement(l.a.Fragment,null,a.map(a=>l.a.createElement(sn.a,{key:a.id},l.a.createElement(rn.a,{align:"center"},a.name),l.a.createElement(rn.a,{align:"center"},l.a.createElement("div",{className:e.customTableCell},l.a.createElement("span",{style:{backgroundColor:a.color,width:60,height:20,alignSelf:"center"}}))),l.a.createElement(rn.a,{align:"center"},l.a.createElement("div",{className:e.customTableCell},l.a.createElement(w.a,{style:{width:300,align:"center"},noWrap:!0,variant:"body2"},a.greetingMessage))),l.a.createElement(rn.a,{align:"center"},l.a.createElement(C.a,{size:"small",onClick:()=>(e=>{m(e),i(!0)})(a)},l.a.createElement(Fo.a,null)),l.a.createElement(C.a,{size:"small",onClick:()=>{m(a),u(!0)}},l.a.createElement(zo.a,null))))),r&&l.a.createElement(Jo,{columns:4}))))))},ys=t(706);const vs=Object(y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:ua.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120},colorAdorment:{width:20,height:20}})),Os=La.b().shape({name:La.c().min(3,"Mensagem muito curta").required("Obrigat\xf3rio")});var Cs=e=>{let{open:a,onClose:t,tagId:r,reload:o,kanban:c}=e;const i=vs(),{user:s}=Object(n.useContext)(Xe),[m,d]=Object(n.useState)(!1),u={name:"",color:"",kanban:c},[p,g]=Object(n.useState)(u);Object(n.useEffect)(()=>{try{(async()=>{if(!r)return;const{data:e}=await Be.get("/tags/".concat(r));g(a=>Object(h.a)(Object(h.a)({},a),e))})()}catch(e){Pe(e)}},[r,a]);const E=()=>{g(u),d(!1),t()};return l.a.createElement("div",{className:i.root},l.a.createElement(qa.a,{open:a,onClose:E,maxWidth:"xs",fullWidth:!0,scroll:"paper"},l.a.createElement(Ba.a,{id:"form-dialog-title"},"".concat(r?0===c?Me.a.t("tagModal.title.edit"):Me.a.t("tagModal.title.editKanban"):0===c?Me.a.t("tagModal.title.add"):Me.a.t("tagModal.title.addKanban"))),l.a.createElement(Pa.e,{initialValues:p,enableReinitialize:!0,validationSchema:Os,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a=Object(h.a)(Object(h.a)({},e),{},{userId:s.id,kanban:c});try{r?await Be.put("/tags/".concat(r),a):await Be.post("/tags",a),b.b.success("".concat(0===c?Me.a.t("tagModal.success"):Me.a.t("tagModal.successKanban"))),"function"==typeof o&&o()}catch(t){Pe(t)}E()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:o}=e;return l.a.createElement(Pa.d,null,l.a.createElement(za.a,{dividers:!0},l.a.createElement("div",{className:i.multFieldLine},l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("tagModal.form.name"),name:"name",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:"outlined",margin:"dense",onChange:e=>g(a=>Object(h.a)(Object(h.a)({},a),{},{name:e.target.value})),fullWidth:!0})),l.a.createElement("br",null),l.a.createElement("div",{className:i.multFieldLine},l.a.createElement(Pa.b,{as:Wa.a,fullWidth:!0,label:Me.a.t("tagModal.form.color"),name:"color",id:"color",error:a.color&&Boolean(t.color),helperText:a.color&&t.color,InputProps:{startAdornment:l.a.createElement(So.a,{position:"start"},l.a.createElement("div",{style:{backgroundColor:o.color},className:i.colorAdorment})),endAdornment:l.a.createElement(C.a,{size:"small",color:"default",onClick:()=>d(!m)},l.a.createElement(ls.a,null))},variant:"outlined",margin:"dense"})),m&&l.a.createElement("div",null,l.a.createElement(ys.a,{disableAlpha:!0,hslGradient:!1,style:{margin:"20px auto 0"},value:p.color,onChange:e=>{g(a=>Object(h.a)(Object(h.a)({},a),{},{color:"#".concat(e.hex)}))}}))),l.a.createElement(Fa.a,null,l.a.createElement(ba.a,{onClick:E,color:"secondary",disabled:n,variant:"outlined"},Me.a.t("tagModal.buttons.cancel")),l.a.createElement(ba.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:i.btnWrapper},"".concat(r?Me.a.t("tagModal.buttons.okEdit"):Me.a.t("tagModal.buttons.okAdd")),n&&l.a.createElement(ha.a,{size:24,className:i.buttonProgress}))))})))};const xs=(e,a)=>{if("LOAD_TAGS"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_TAGS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_TAG"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},Ss=Object(y.a)(e=>({mainPaper:Object(h.a)({flex:1,padding:e.spacing(1),overflowY:"scroll"},e.scrollbarStyles)}));var js=()=>{const e=Ss(),{user:a}=Object(n.useContext)(Xe),[t,r]=Object(n.useState)(!1),[o,c]=Object(n.useState)(1),[i,s]=Object(n.useState)(!1),[m,d]=Object(n.useState)(null),[u,p]=Object(n.useState)(null),[g,E]=Object(n.useState)(!1),[h,f]=Object(n.useState)(""),[y,v]=Object(n.useReducer)(xs,[]),[O,x]=Object(n.useState)(!1),S=Object(n.useCallback)(async()=>{try{const{data:e}=await Be.get("/tags/",{params:{searchParam:h,pageNumber:o,kanban:0}});v({type:"LOAD_TAGS",payload:e.tags}),s(e.hasMore),r(!1)}catch(e){Pe(e)}},[h,o]);Object(n.useEffect)(()=>{v({type:"RESET"}),c(1)},[h]),Object(n.useEffect)(()=>{r(!0);const e=setTimeout(()=>{S()},500);return()=>clearTimeout(e)},[h,o,S]),Object(n.useEffect)(()=>{const e=He({companyId:a.companyId});return e.on("user",e=>{"update"!==e.action&&"create"!==e.action||v({type:"UPDATE_TAGS",payload:e.tags}),"delete"===e.action&&v({type:"DELETE_TAGS",payload:+e.tagId})}),()=>{e.disconnect()}},[a]);return l.a.createElement(Ho,null,l.a.createElement(ol,{title:u&&"".concat(Me.a.t("tags.confirmationModal.deleteTitle")),open:g,onClose:E,onConfirm:()=>(async e=>{try{await Be.delete("/tags/".concat(e)),b.b.success(Me.a.t("tags.toasts.deleted"))}catch(a){Pe(a)}p(null),f(""),c(1),v({type:"RESET"}),c(1),await S()})(u.id)},Me.a.t("tags.confirmationModal.deleteMessage")),l.a.createElement(Cs,{open:O,onClose:()=>{d(null),x(!1)},reload:S,"aria-labelledby":"form-dialog-title",tagId:m&&m.id,kanban:0}),l.a.createElement(Go,null,l.a.createElement(Ko,null,Me.a.t("tags.title")," (",y.length,")"),l.a.createElement(Qo,null,l.a.createElement(Wa.a,{placeholder:Me.a.t("contacts.searchPlaceholder"),type:"search",value:h,onChange:e=>{f(e.target.value.toLowerCase())},InputProps:{startAdornment:l.a.createElement(So.a,{position:"start"},l.a.createElement(xn.a,{style:{color:"gray"}}))}}),l.a.createElement(ba.a,{variant:"contained",color:"primary",onClick:()=>{d(null),x(!0)}},Me.a.t("tags.buttons.add")))),l.a.createElement(lt.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!i||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:l}=e.currentTarget;n-(a+100)<l&&c(e=>e+1)}},l.a.createElement(nn.a,{size:"small"},l.a.createElement(cn.a,null,l.a.createElement(sn.a,null,l.a.createElement(rn.a,{align:"center"},Me.a.t("tags.table.name")),l.a.createElement(rn.a,{align:"center"},Me.a.t("tags.table.tickets")),l.a.createElement(rn.a,{align:"center"},Me.a.t("tags.table.actions")))),l.a.createElement(ln.a,null,l.a.createElement(l.a.Fragment,null,y.map(e=>l.a.createElement(sn.a,{key:e.id},l.a.createElement(rn.a,{align:"center"},l.a.createElement(Ya.a,{variant:"outlined",style:{backgroundColor:e.color,textShadow:"1px 1px 1px #000",color:"white"},label:e.name,size:"small"})),l.a.createElement(rn.a,{align:"center"},e.ticketsCount),l.a.createElement(rn.a,{align:"center"},l.a.createElement(C.a,{size:"small",onClick:()=>(e=>{d(e),x(!0)})(e)},l.a.createElement(Qi.a,null)),l.a.createElement(C.a,{size:"small",onClick:a=>{E(!0),p(e)}},l.a.createElement(Pn.a,null))))),t&&l.a.createElement(Jo,{columns:4}))))))};const ks=Object(y.a)(e=>({mainPaper:{flex:1,padding:e.spacing(2),paddingBottom:100},mainHeader:{marginTop:e.spacing(1)},elementMargin:{marginTop:e.spacing(2)},formContainer:{maxWidth:500},textRight:{textAlign:"right"}}));var ws=()=>{const e=ks(),[a]=Object(n.useState)({token:"",number:"",body:""}),[t]=Object(n.useState)({token:"",number:"",medias:""}),[r,o]=Object(n.useState)({});return l.a.createElement(lt.a,{className:e.mainPaper,variant:"outlined"},l.a.createElement(w.a,{variant:"h5"},"Documenta\xe7\xe3o para envio de mensagens"),l.a.createElement(w.a,{variant:"h6",color:"primary",className:e.elementMargin},"M\xe9todos de Envio"),l.a.createElement(w.a,{component:"div"},l.a.createElement("ol",null,l.a.createElement("li",null,"Mensagens de Texto"),l.a.createElement("li",null,"Mensagens de Media"))),l.a.createElement(w.a,{variant:"h6",color:"primary",className:e.elementMargin},"Instru\xe7\xf5es"),l.a.createElement(w.a,{className:e.elementMargin,component:"div"},l.a.createElement("b",null,"Observa\xe7\xf5es importantes"),l.a.createElement("br",null),l.a.createElement("ul",null,l.a.createElement("li",null,"Antes de enviar mensagens, \xe9 necess\xe1rio o cadastro do token vinculado \xe0 conex\xe3o que enviar\xe1 as mensagens. ",l.a.createElement("br",null),'Para realizar o cadastro acesse o menu "Conex\xf5es", clique no bot\xe3o editar da conex\xe3o e insira o token no devido campo.'),l.a.createElement("li",null,"O n\xfamero para envio n\xe3o deve ter mascara ou caracteres especiais e deve ser composto por:",l.a.createElement("ul",null,l.a.createElement("li",null,"C\xf3digo do pa\xeds"),l.a.createElement("li",null,"DDD"),l.a.createElement("li",null,"N\xfamero"))))),l.a.createElement(w.a,{variant:"h6",color:"primary",className:e.elementMargin},"1. Mensagens de Texto"),l.a.createElement(kt.a,{container:!0},l.a.createElement(kt.a,{item:!0,xs:12,sm:6},l.a.createElement(w.a,{className:e.elementMargin,component:"div"},l.a.createElement("p",null,"Seguem abaixo a lista de informa\xe7\xf5es necess\xe1rias para envio das mensagens de texto:"),l.a.createElement("b",null,"Endpoint: ")," ","https://api-whaticket.easypanel.osuporte.site/api/messages/send"," ",l.a.createElement("br",null),l.a.createElement("b",null,"M\xe9todo: ")," POST ",l.a.createElement("br",null),l.a.createElement("b",null,"Headers: ")," X_TOKEN (token cadastrado) e Content-Type (application/json) ",l.a.createElement("br",null),l.a.createElement("b",null,"Body: ")," ",'{ "number": "558599999999", "body": "Sua mensagem" }')),l.a.createElement(kt.a,{item:!0,xs:12,sm:6},l.a.createElement(w.a,{className:e.elementMargin},l.a.createElement("b",null,"Teste de Envio")),l.a.createElement(Pa.e,{initialValues:a,enableReinitialize:!0,onSubmit:(e,a)=>{setTimeout(async()=>{await(async e=>{const{number:a,body:t}=e,n={number:a,body:t};var l={method:"POST",url:"".concat("https://api-whaticket.easypanel.osuporte.site","/api/messages/send"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.token)},data:n};qe.a.request(l).then((function(e){b.b.success("Mensagem enviada com sucesso")})).catch((function(e){Pe(e)}))})(e),a.setSubmitting(!1),a.resetForm()},400)},className:e.elementMargin},a=>{let{isSubmitting:t}=a;return l.a.createElement(Pa.d,{className:e.formContainer},l.a.createElement(kt.a,{container:!0,spacing:2},l.a.createElement(kt.a,{item:!0,xs:12,md:6},l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("messagesAPI.textMessage.token"),name:"token",autoFocus:!0,variant:"outlined",margin:"dense",fullWidth:!0,className:e.textField,required:!0})),l.a.createElement(kt.a,{item:!0,xs:12,md:6},l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("messagesAPI.textMessage.number"),name:"number",autoFocus:!0,variant:"outlined",margin:"dense",fullWidth:!0,className:e.textField,required:!0})),l.a.createElement(kt.a,{item:!0,xs:12},l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("messagesAPI.textMessage.body"),name:"body",autoFocus:!0,variant:"outlined",margin:"dense",fullWidth:!0,className:e.textField,required:!0})),l.a.createElement(kt.a,{item:!0,xs:12,className:e.textRight},l.a.createElement(ba.a,{type:"submit",color:"primary",variant:"contained",className:e.btnWrapper},t?l.a.createElement(ha.a,{size:24,className:e.buttonProgress}):"Enviar"))))}))),l.a.createElement(w.a,{variant:"h6",color:"primary",className:e.elementMargin},"2. Mensagens de Media"),l.a.createElement(kt.a,{container:!0},l.a.createElement(kt.a,{item:!0,xs:12,sm:6},l.a.createElement(w.a,{className:e.elementMargin,component:"div"},l.a.createElement("p",null,"Seguem abaixo a lista de informa\xe7\xf5es necess\xe1rias para envio das mensagens de texto:"),l.a.createElement("b",null,"Endpoint: ")," ","https://api-whaticket.easypanel.osuporte.site/api/messages/send"," ",l.a.createElement("br",null),l.a.createElement("b",null,"M\xe9todo: ")," POST ",l.a.createElement("br",null),l.a.createElement("b",null,"Headers: ")," X_TOKEN (token cadastrado) e Content-Type (multipart/form-data) ",l.a.createElement("br",null),l.a.createElement("b",null,"FormData: ")," ",l.a.createElement("br",null),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("b",null,"number: ")," 558599999999"),l.a.createElement("li",null,l.a.createElement("b",null,"medias: ")," arquivo")))),l.a.createElement(kt.a,{item:!0,xs:12,sm:6},l.a.createElement(w.a,{className:e.elementMargin},l.a.createElement("b",null,"Teste de Envio")),l.a.createElement(Pa.e,{initialValues:t,enableReinitialize:!0,onSubmit:(e,a)=>{setTimeout(async()=>{console.log(e,r),await(async e=>{try{const t=r[0],n=new FormData;n.append("number",e.number),n.append("body",t.name),n.append("medias",t);var a={method:"POST",url:"".concat("https://api-whaticket.easypanel.osuporte.site","/api/messages/send"),headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(e.token)},data:n};qe.a.request(a).then((function(e){b.b.success("Mensagem enviada com sucesso")})).catch((function(e){Pe(e)}))}catch(t){Pe(t)}})(e),a.setSubmitting(!1),a.resetForm(),document.getElementById("medias").files=null,document.getElementById("medias").value=null},400)},className:e.elementMargin},a=>{let{isSubmitting:t}=a;return l.a.createElement(Pa.d,{className:e.formContainer},l.a.createElement(kt.a,{container:!0,spacing:2},l.a.createElement(kt.a,{item:!0,xs:12,md:6},l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("messagesAPI.mediaMessage.token"),name:"token",autoFocus:!0,variant:"outlined",margin:"dense",fullWidth:!0,className:e.textField,required:!0})),l.a.createElement(kt.a,{item:!0,xs:12,md:6},l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("messagesAPI.mediaMessage.number"),name:"number",autoFocus:!0,variant:"outlined",margin:"dense",fullWidth:!0,className:e.textField,required:!0})),l.a.createElement(kt.a,{item:!0,xs:12},l.a.createElement("input",{type:"file",name:"medias",id:"medias",required:!0,onChange:e=>o(e.target.files)})),l.a.createElement(kt.a,{item:!0,xs:12,className:e.textRight},l.a.createElement(ba.a,{type:"submit",color:"primary",variant:"contained",className:e.btnWrapper},t?l.a.createElement(ha.a,{size:24,className:e.buttonProgress}):"Enviar"))))}))))},Ts=t(1264),Is=t(1249),As=t(1250);const Ns=Object(y.a)(e=>({mainPaper:Object(h.a)({width:"100%",minHeight:"200px",overflowY:"scroll"},e.scrollbarStyles),heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary}}));var Ms=()=>{const e=Ns(),[a,t]=Object(n.useState)([]),{list:r}=Ac();Object(n.useEffect)(()=>{!async function(){const e=await r();t(e)}()},[]);return l.a.createElement(Ho,null,l.a.createElement(Go,null,l.a.createElement(Ko,null,Me.a.t("helps.title")),l.a.createElement(Qo,null)),l.a.createElement(lt.a,{className:e.mainPaper,variant:"outlined"},l.a.createElement(l.a.Fragment,null,a.length?a.map((a,t)=>l.a.createElement(Ts.a,{key:t},l.a.createElement(Is.a,{expandIcon:l.a.createElement(ne.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement(w.a,{className:e.heading},a.title),l.a.createElement(w.a,{className:e.secondaryHeading},a.description)),l.a.createElement(As.a,null,l.a.createElement(w.a,null,(e=>{const a="https://www.youtube.com/embed/".concat(e.video);return l.a.createElement("iframe",{style:{width:700,height:500},src:a,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})(a))))):null)))},Rs=t(689),Ds=t.n(Rs);const Ls=Object(y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:ua.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120}})),Ps=La.b().shape({name:La.c().min(2,"Too Short!").max(50,"Too Long!").required("Required")});var Ws=e=>{let{open:a,onClose:t,contactListId:r}=e;const o=Ls(),c={name:""},[i,s]=Object(n.useState)(c);Object(n.useEffect)(()=>{(async()=>{if(r)try{const{data:e}=await Be.get("/contact-lists/".concat(r));s(a=>Object(h.a)(Object(h.a)({},a),e))}catch(e){Pe(e)}})()},[r,a]);const m=()=>{t(),s(c)};return l.a.createElement("div",{className:o.root},l.a.createElement(qa.a,{open:a,onClose:m,maxWidth:"xs",fullWidth:!0,scroll:"paper"},l.a.createElement(Ba.a,{id:"form-dialog-title"},"".concat(r?Me.a.t("contactLists.dialog.edit"):Me.a.t("contactLists.dialog.add"))),l.a.createElement(Pa.e,{initialValues:i,enableReinitialize:!0,validationSchema:Ps,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a=Object(h.a)({},e);try{r?await Be.put("/contact-lists/".concat(r),a):await Be.post("/contact-lists",a),b.b.success(Me.a.t("contactList.dialog"))}catch(t){Pe(t)}m()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n}=e;return l.a.createElement(Pa.d,null,l.a.createElement(za.a,{dividers:!0},l.a.createElement("div",{className:o.multFieldLine},l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("contactLists.dialog.name"),autoFocus:!0,name:"name",error:a.name&&Boolean(t.name),helperText:a.name&&t.name,variant:"outlined",margin:"dense",fullWidth:!0}))),l.a.createElement(Fa.a,null,l.a.createElement(ba.a,{onClick:m,color:"secondary",disabled:n,variant:"outlined"},Me.a.t("contactLists.dialog.cancel")),l.a.createElement(ba.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:o.btnWrapper},"".concat(r?Me.a.t("contactLists.dialog.okEdit"):Me.a.t("contactLists.dialog.okAdd")),n&&l.a.createElement(ha.a,{size:24,className:o.buttonProgress}))))})))},qs=t(352),Fs=t.n(qs);const zs=(e,a)=>{if("LOAD_CONTACTLISTS"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_CONTACTLIST"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_CONTACTLIST"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},Bs=Object(y.a)(e=>({mainPaper:Object(h.a)({flex:1,padding:e.spacing(1),overflowY:"scroll"},e.scrollbarStyles)}));var Us=()=>{const e=Bs(),a=Object(E.g)(),[t,r]=Object(n.useState)(!1),[o,c]=Object(n.useState)(1),[i,s]=Object(n.useState)(!1),[m,d]=Object(n.useState)(null),[u,p]=Object(n.useState)(null),[g,h]=Object(n.useState)(!1),[f,y]=Object(n.useState)(!1),[v,O]=Object(n.useState)(""),[x,S]=Object(n.useReducer)(zs,[]);Object(n.useEffect)(()=>{S({type:"RESET"}),c(1)},[v]),Object(n.useEffect)(()=>{r(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await Be.get("/contact-lists/",{params:{searchParam:v,pageNumber:o}});S({type:"LOAD_CONTACTLISTS",payload:e.records}),s(e.hasMore),r(!1)}catch(e){Pe(e)}})()},500);return()=>clearTimeout(e)},[v,o]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=He({companyId:e});return a.on("company-".concat(e,"-ContactList"),e=>{"update"!==e.action&&"create"!==e.action||S({type:"UPDATE_CONTACTLIST",payload:e.record}),"delete"===e.action&&S({type:"DELETE_CONTACTLIST",payload:+e.id})}),()=>{a.disconnect()}},[]);return l.a.createElement(Ho,null,l.a.createElement(ol,{title:u&&"".concat(Me.a.t("contactLists.confirmationModal.deleteTitle")," ").concat(u.name,"?"),open:f,onClose:y,onConfirm:()=>(async e=>{try{await Be.delete("/contact-lists/".concat(e)),b.b.success(Me.a.t("contactLists.toasts.deleted"))}catch(a){Pe(a)}p(null),O(""),c(1)})(u.id)},Me.a.t("contactLists.confirmationModal.deleteMessage")),l.a.createElement(Ws,{open:g,onClose:()=>{d(null),h(!1)},"aria-labelledby":"form-dialog-title",contactListId:m&&m.id}),l.a.createElement(Go,null,l.a.createElement(kt.a,{style:{width:"99.6%"},container:!0},l.a.createElement(kt.a,{xs:12,sm:8,item:!0},l.a.createElement(Ko,null,Me.a.t("contactLists.title"))),l.a.createElement(kt.a,{xs:12,sm:4,item:!0},l.a.createElement(kt.a,{spacing:2,container:!0},l.a.createElement(kt.a,{xs:7,sm:6,item:!0},l.a.createElement(Wa.a,{fullWidth:!0,placeholder:Me.a.t("contacts.searchPlaceholder"),type:"search",value:v,onChange:e=>{O(e.target.value.toLowerCase())},InputProps:{startAdornment:l.a.createElement(So.a,{position:"start"},l.a.createElement(xn.a,{style:{color:"gray"}}))}})),l.a.createElement(kt.a,{xs:5,sm:6,item:!0},l.a.createElement(ba.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:()=>{d(null),h(!0)}},Me.a.t("contactLists.buttons.add"))))))),l.a.createElement(lt.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!i||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:l}=e.currentTarget;n-(a+100)<l&&c(e=>e+1)}},l.a.createElement(nn.a,{size:"small"},l.a.createElement(cn.a,null,l.a.createElement(sn.a,null,l.a.createElement(rn.a,{align:"center"},Me.a.t("contactLists.table.name")),l.a.createElement(rn.a,{align:"center"},Me.a.t("contactLists.table.contacts")),l.a.createElement(rn.a,{align:"center"},Me.a.t("contactLists.table.actions")))),l.a.createElement(ln.a,null,l.a.createElement(l.a.Fragment,null,x.map(e=>l.a.createElement(sn.a,{key:e.id},l.a.createElement(rn.a,{align:"center"},e.name),l.a.createElement(rn.a,{align:"center"},e.contactsCount||0),l.a.createElement(rn.a,{align:"center"},l.a.createElement("a",{href:Fs.a,download:"planilha.xlsx"},l.a.createElement(C.a,{size:"small",title:"Baixar Planilha Exemplo"},l.a.createElement(Ds.a,null))),l.a.createElement(C.a,{size:"small",onClick:()=>{return t=e.id,void a.push("/contact-lists/".concat(t,"/contacts"));var t}},l.a.createElement(re.a,null)),l.a.createElement(C.a,{size:"small",onClick:()=>(e=>{d(e),h(!0)})(e)},l.a.createElement(Qi.a,null)),l.a.createElement(C.a,{size:"small",onClick:a=>{y(!0),p(e)}},l.a.createElement(Pn.a,null))))),t&&l.a.createElement(Jo,{columns:3}))))))},Vs=t(690),Hs=t.n(Vs);const Ys=Object(y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:ua.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}})),Gs=La.b().shape({name:La.c().min(2,"Too Short!").max(50,"Too Long!").required("Required"),number:La.c().min(8,"Too Short!").max(50,"Too Long!"),email:La.c().email("Invalid email")});var _s=e=>{let{open:a,onClose:t,contactId:r,initialValues:o,onSave:c}=e;const i=Ys(),s=Object(n.useRef)(!0),{user:{companyId:m}}=Object(n.useContext)(Xe),{contactListId:d}=Object(E.h)(),u={name:"",number:"",email:""},[p,g]=Object(n.useState)(u);Object(n.useEffect)(()=>()=>{s.current=!1},[]),Object(n.useEffect)(()=>{(async()=>{if(o&&g(e=>Object(h.a)(Object(h.a)({},e),o)),r)try{const{data:e}=await Be.get("/contact-list-items/".concat(r));s.current&&g(e)}catch(e){Pe(e)}})()},[r,a,o]);const f=()=>{t(),g(u)};return l.a.createElement("div",{className:i.root},l.a.createElement(qa.a,{open:a,onClose:f,maxWidth:"lg",scroll:"paper"},l.a.createElement(Ba.a,{id:"form-dialog-title"},"".concat(r?Me.a.t("contactModal.title.edit"):Me.a.t("contactModal.title.add"))),l.a.createElement(Pa.e,{initialValues:p,enableReinitialize:!0,validationSchema:Gs,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{try{if(r)await Be.put("/contact-list-items/".concat(r),Object(h.a)(Object(h.a)({},e),{},{companyId:m,contactListId:d})),f();else{const{data:a}=await Be.post("/contact-list-items",Object(h.a)(Object(h.a)({},e),{},{companyId:m,contactListId:d}));c&&c(a),f()}b.b.success(Me.a.t("contactModal.success"))}catch(a){Pe(a)}})(e),a.setSubmitting(!1)},400)}},e=>{let{values:a,errors:t,touched:n,isSubmitting:o}=e;return l.a.createElement(Pa.d,null,l.a.createElement(za.a,{dividers:!0},l.a.createElement(w.a,{variant:"subtitle1",gutterBottom:!0},Me.a.t("contactModal.form.mainInfo")),l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("contactModal.form.name"),name:"name",autoFocus:!0,error:n.name&&Boolean(t.name),helperText:n.name&&t.name,variant:"outlined",margin:"dense",className:i.textField}),l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("contactModal.form.number"),name:"number",error:n.number&&Boolean(t.number),helperText:n.number&&t.number,placeholder:"5513912344321",variant:"outlined",margin:"dense"}),l.a.createElement("div",null,l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("contactModal.form.email"),name:"email",error:n.email&&Boolean(t.email),helperText:n.email&&t.email,placeholder:"Email address",fullWidth:!0,margin:"dense",variant:"outlined"}))),l.a.createElement(Fa.a,null,l.a.createElement(ba.a,{onClick:f,color:"secondary",disabled:o,variant:"outlined"},Me.a.t("contactModal.buttons.cancel")),l.a.createElement(ba.a,{type:"submit",color:"primary",disabled:o,variant:"contained",className:i.btnWrapper},"".concat(r?Me.a.t("contactModal.buttons.okEdit"):Me.a.t("contactModal.buttons.okAdd")),o&&l.a.createElement(ha.a,{size:24,className:i.buttonProgress}))))})))};var Qs=()=>({findById:async e=>{const{data:a}=await Be.request({url:"/contact-lists/".concat(e),method:"GET"});return a},save:async e=>{const{data:a}=await Be.request({url:"/contact-lists",method:"POST",data:e});return a},update:async e=>{const{data:a}=await Be.request({url:"/contact-lists/".concat(e.id),method:"PUT",data:e});return a},deleteRecord:async e=>{const{data:a}=await Be.request({url:"/contact-lists/".concat(e),method:"DELETE"});return a},list:async e=>{const{data:a}=await Be.request({url:"/contact-lists/list",method:"GET",params:e});return a}});const Ks=(e,a)=>{if("LOAD_CONTACTS"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_CONTACTS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_CONTACT"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},Zs=Object(y.a)(e=>({mainPaper:Object(h.a)({flex:1,padding:e.spacing(1),overflowY:"scroll"},e.scrollbarStyles)}));var Js=()=>{const e=Zs(),{user:a}=Object(n.useContext)(Xe),{contactListId:t}=Object(E.h)(),r=Object(E.g)(),[o,c]=Object(n.useState)(!1),[i,s]=Object(n.useState)(1),[m,d]=Object(n.useState)(""),[u,p]=Object(n.useReducer)(Ks,[]),[g,h]=Object(n.useState)(null),[f,y]=Object(n.useState)(!1),[v,O]=Object(n.useState)(null),[x,S]=Object(n.useState)(!1),[j,k]=Object(n.useState)(!1),[w,T]=Object(n.useState)({}),I=Object(n.useRef)(null),{findById:A}=Qs();Object(n.useEffect)(()=>{A(t).then(e=>{T(e)})},[t]),Object(n.useEffect)(()=>{p({type:"RESET"}),s(1)},[m]),Object(n.useEffect)(()=>{c(!0);const e=setTimeout(()=>{(async()=>{try{const{data:e}=await Be.get("contact-list-items",{params:{searchParam:m,pageNumber:i,contactListId:t}});p({type:"LOAD_CONTACTS",payload:e.contacts}),k(e.hasMore),c(!1)}catch(e){Pe(e)}})()},500);return()=>clearTimeout(e)},[m,i,t]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=He({companyId:e});return a.on("company-".concat(e,"-ContactListItem"),e=>{"update"!==e.action&&"create"!==e.action||p({type:"UPDATE_CONTACTS",payload:e.record}),"delete"===e.action&&p({type:"DELETE_CONTACT",payload:+e.id}),"reload"===e.action&&p({type:"LOAD_CONTACTS",payload:e.records})}),a.on("company-".concat(e,"-ContactListItem-").concat(t),e=>{"reload"===e.action&&p({type:"LOAD_CONTACTS",payload:e.records})}),()=>{a.disconnect()}},[t]);return l.a.createElement(Ho,{className:e.mainContainer},l.a.createElement(_s,{open:f,onClose:()=>{h(null),y(!1)},"aria-labelledby":"form-dialog-title",contactId:g}),l.a.createElement(ol,{title:v?"".concat(Me.a.t("contactListItems.confirmationModal.deleteTitle")," ").concat(v.name,"?"):"".concat(Me.a.t("contactListItems.confirmationModal.importTitlte")),open:x,onClose:S,onConfirm:()=>v?(async e=>{try{await Be.delete("/contact-list-items/".concat(e)),b.b.success(Me.a.t("contacts.toasts.deleted"))}catch(a){Pe(a)}O(null),d(""),s(1)})(v.id):(async()=>{try{const e=new FormData;e.append("file",I.current.files[0]),await Be.request({url:"contact-lists/".concat(t,"/upload"),method:"POST",data:e})}catch(e){Pe(e)}})()},v?"".concat(Me.a.t("contactListItems.confirmationModal.deleteMessage")):l.a.createElement(l.a.Fragment,null,Me.a.t("contactListItems.confirmationModal.importMessage"),l.a.createElement("a",{href:Fs.a,download:"planilha.xlsx"},"Clique aqui para baixar planilha exemplo."))),l.a.createElement(Go,null,l.a.createElement(kt.a,{style:{width:"99.6%"},container:!0},l.a.createElement(kt.a,{xs:12,sm:5,item:!0},l.a.createElement(Ko,null,w.name)),l.a.createElement(kt.a,{xs:12,sm:7,item:!0},l.a.createElement(kt.a,{spacing:2,container:!0},l.a.createElement(kt.a,{xs:12,sm:6,item:!0},l.a.createElement(Wa.a,{fullWidth:!0,placeholder:Me.a.t("contactListItems.searchPlaceholder"),type:"search",value:m,onChange:e=>{d(e.target.value.toLowerCase())},InputProps:{startAdornment:l.a.createElement(So.a,{position:"start"},l.a.createElement(xn.a,{style:{color:"gray"}}))}})),l.a.createElement(kt.a,{xs:4,sm:2,item:!0},l.a.createElement(ba.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:()=>{r.push("/contact-lists")}},Me.a.t("contactListItems.buttons.lists"))),l.a.createElement(kt.a,{xs:4,sm:2,item:!0},l.a.createElement(ba.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:()=>{I.current.value=null,I.current.click()}},Me.a.t("contactListItems.buttons.import"))),l.a.createElement(kt.a,{xs:4,sm:2,item:!0},l.a.createElement(ba.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:()=>{h(null),y(!0)}},Me.a.t("contactListItems.buttons.add"))))))),l.a.createElement(lt.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!j||o)return;const{scrollTop:a,scrollHeight:t,clientHeight:n}=e.currentTarget;t-(a+100)<n&&s(e=>e+1)}},l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{style:{display:"none"},id:"upload",name:"file",type:"file",accept:".xls,.xlsx",onChange:()=>{S(!0)},ref:I})),l.a.createElement(nn.a,{size:"small"},l.a.createElement(cn.a,null,l.a.createElement(sn.a,null,l.a.createElement(rn.a,{align:"center",style:{width:"0%"}},"#"),l.a.createElement(rn.a,null,Me.a.t("contactListItems.table.name")),l.a.createElement(rn.a,{align:"center"},Me.a.t("contactListItems.table.number")),l.a.createElement(rn.a,{align:"center"},Me.a.t("contactListItems.table.email")),l.a.createElement(rn.a,{align:"center"},Me.a.t("contactListItems.table.actions")))),l.a.createElement(ln.a,null,l.a.createElement(l.a.Fragment,null,u.map(e=>l.a.createElement(sn.a,{key:e.id},l.a.createElement(rn.a,{align:"center",style:{width:"0%"}},l.a.createElement(C.a,null,e.isWhatsappValid?l.a.createElement(Lt.a,{titleAccess:"Whatsapp V\xe1lido",htmlColor:"green"}):l.a.createElement(Hs.a,{titleAccess:"Whatsapp Inv\xe1lido",htmlColor:"grey"}))),l.a.createElement(rn.a,null,e.name),l.a.createElement(rn.a,{align:"center"},e.number),l.a.createElement(rn.a,{align:"center"},e.email),l.a.createElement(rn.a,{align:"center"},l.a.createElement(C.a,{size:"small",onClick:()=>{return a=e.id,h(a),void y(!0);var a}},l.a.createElement(Qi.a,null)),l.a.createElement(aa,{role:a.profile,perform:"contacts-page:deleteContact",yes:()=>l.a.createElement(C.a,{size:"small",onClick:()=>{S(!0),O(e)}},l.a.createElement(Pn.a,null))})))),o&&l.a.createElement(Jo,{columns:4}))))))};var Xs=function(e){const{messages:a,showLoading:t,editMessage:r,deleteMessage:o,readOnly:c}=e,[i,s]=Object(n.useState)(!0),[m,d]=Object(n.useState)([]);return Object(n.useEffect)(()=>{Array.isArray(a)&&d(a),void 0!==t&&s(t)},[a,t]),l.a.createElement(nn.a,{size:"small"},l.a.createElement(cn.a,null,l.a.createElement(sn.a,null,l.a.createElement(rn.a,{align:"center"},"Atalho"),l.a.createElement(rn.a,{align:"left"},"Mensagem"),c?null:l.a.createElement(rn.a,{align:"center"},"A\xe7\xf5es"))),l.a.createElement(ln.a,null,i?l.a.createElement(Jo,{columns:c?2:3}):m.map(e=>l.a.createElement(sn.a,{key:e.id},l.a.createElement(rn.a,{align:"center"},e.shortcode),l.a.createElement(rn.a,{align:"left"},e.message),c?null:l.a.createElement(rn.a,{align:"center"},l.a.createElement(C.a,{size:"small",onClick:()=>(e=>{r(e)})(e)},l.a.createElement(Fo.a,null)),l.a.createElement(C.a,{size:"small",onClick:()=>(e=>{o(e)})(e)},l.a.createElement(zo.a,null)))))))},$s=t(2),em=t.n($s);var am=function(e){let{title:a,modalOpen:t,onClose:r,children:o}=e;const[c,i]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{i(t)},[t]),l.a.createElement(l.a.Fragment,null,l.a.createElement(qa.a,{open:c,onClose:()=>{i(!1),r()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(Ba.a,{id:"alert-dialog-title"},a),o))};const tm=La.b().shape({shortcode:La.c().min(3,"Too Short!").max(50,"Too Long!").required("Required"),message:La.c().min(3,"Too Short!").max(500,"Too Long!").required("Required")}),nm=Object(y.a)(e=>({root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"350px"}},list:{width:"100%",maxWidth:"350px",maxHeight:"200px",backgroundColor:e.palette.background.paper},inline:{width:"100%"}}));function lm(e){const a=nm(),t={id:null,shortcode:"",message:""},{modalOpen:r,saveMessage:o,editMessage:c,onClose:i,messageSelected:s}=e,[m,d]=Object(n.useState)(!1),[u,p]=Object(n.useState)(t),[g,E]=Object(n.useState)(!1),{user:b}=Object(n.useContext)(Xe);Object(n.useEffect)(()=>{y(),d(r)},[r]),Object(n.useEffect)(()=>{y()},[s]);const f=()=>Object(Le.isObject)(s)&&Object(Le.has)(s,"id")&&!Object(Le.isNil)(Object(Le.get)(s,"id")),y=()=>{if(f()){const{id:e,message:a,shortcode:t}=s;p({id:e,message:a,shortcode:t})}else p(t)},v=()=>{i(),E(!1)};return l.a.createElement(am,{title:"Mensagem R\xe1pida",modalOpen:m,onClose:v},l.a.createElement(Pa.e,{initialValues:u,enableReinitialize:!0,validationSchema:tm,onSubmit:(e,a)=>{E(!0),setTimeout(()=>{(async e=>{f()?c(Object(h.a)(Object(h.a)(Object(h.a)({},s),e),{},{userId:b.id})):o(Object(h.a)(Object(h.a)({},e),{},{userId:b.id})),v()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:t,errors:n}=e;return l.a.createElement(Pa.d,null,l.a.createElement(za.a,{className:a.root,dividers:!0},l.a.createElement(kt.a,{direction:"column",container:!0},l.a.createElement(kt.a,{item:!0},l.a.createElement(Pa.b,{as:Wa.a,name:"shortcode",label:Me.a.t("quickMessages.dialog.shortcode"),error:t.shortcode&&Boolean(n.shortcode),helperText:t.shortcode&&n.shortcode,variant:"outlined"})),l.a.createElement(kt.a,{item:!0},l.a.createElement(Pa.b,{as:Wa.a,name:"message",rows:6,label:Me.a.t("quickMessages.dialog.message"),multiline:!0,error:t.message&&Boolean(n.message),helperText:t.message&&n.message,variant:"outlined"})))),l.a.createElement(Fa.a,null,l.a.createElement(ba.a,{onClick:v,color:"primary"},"Cancelar"),l.a.createElement(va,{loading:g,color:"primary",type:"submit",variant:"contained",autoFocus:!0},"Salvar")))}))}lm.propType={modalOpen:em.a.bool,onClose:em.a.func};var rm=lm;const om=Object(y.a)(e=>({mainPaper:Object(h.a)({flex:1,padding:e.spacing(1),overflowY:"scroll"},e.scrollbarStyles)}));var cm=function(e){const a=om(),[t,r]=Object(n.useState)([]),[o,c]=Object(n.useState)(!1),[i,s]=Object(n.useState)(!1),[m,d]=Object(n.useState)({}),[u,p]=Object(n.useState)(!1),{list:g,save:E,update:h,deleteRecord:f}=kr(),{user:y}=Object(n.useContext)(Xe);Object(n.useEffect)(()=>{(async()=>{await v()})()},[]);const v=async()=>{c(!0);try{const e=localStorage.getItem("companyId"),a=await g({companyId:e,userId:y.id});r(a)}catch(e){b.b.error(e)}c(!1)},O=()=>{s(!1),d({id:null,message:"",shortcode:""})};return l.a.createElement(Ho,null,l.a.createElement(Go,null,l.a.createElement(Ko,null,Me.a.t("quickMessages.title")),l.a.createElement(Qo,null,l.a.createElement(ba.a,{variant:"contained",color:"primary",onClick:()=>{s(!0)}},Me.a.t("quickMessages.buttons.add")))),l.a.createElement(lt.a,{className:a.mainPaper,variant:"outlined"},l.a.createElement(Xs,{readOnly:!1,messages:t,showLoading:o,editMessage:e=>{d(e),s(!0)},deleteMessage:e=>{d(e),p(!0)}})),l.a.createElement(rm,{messageSelected:m,modalOpen:i,onClose:O,editMessage:async e=>{O();try{await h(e),await v(),b.b.success("Messagem atualizada com sucesso.")}catch(a){b.b.error(a)}},saveMessage:async e=>{O();try{await E(e),await v(),b.b.success("Messagem adicionada com sucesso.")}catch(a){b.b.error(a)}}}),l.a.createElement(ol,{title:"Excluir Registro",open:u,onClose:p,onConfirm:async()=>{await(async e=>{O();try{await f(e.id),await v(),b.b.success("Messagem exclu\xedda com sucesso.")}catch(a){b.b.error(a)}})(m)}},"Deseja realmente excluir este registro?"))};const im=["component","isPrivate"];var sm=e=>{let{component:a,isPrivate:t=!1}=e,r=Object(Ea.a)(e,im);const{isAuth:o,loading:c}=Object(n.useContext)(Xe);return!o&&t?l.a.createElement(l.a.Fragment,null,c&&l.a.createElement($a,null),l.a.createElement(E.a,{to:{pathname:"/login",state:{from:r.location}}})):o&&!t?l.a.createElement(l.a.Fragment,null,c&&l.a.createElement($a,null),l.a.createElement(E.a,{to:{pathname:"/",state:{from:r.location}}}),";"):l.a.createElement(l.a.Fragment,null,c&&l.a.createElement($a,null),l.a.createElement(E.b,Object.assign({},r,{component:a})))};const mm=(e,a)=>{if("LOAD_SCHEDULES"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_SCHEDULES"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_SCHEDULE"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},dm=Object(y.a)(e=>({mainPaper:Object(h.a)({flex:1,padding:e.spacing(1),overflowY:"scroll"},e.scrollbarStyles)}));var um=()=>{const e=dm(),{user:a}=Object(n.useContext)(Xe),[t,r]=Object(n.useState)(!1),[o,c]=Object(n.useState)(1),[i,s]=Object(n.useState)(!1),[m,d]=Object(n.useState)(null),[u,p]=Object(n.useState)(null),[g,E]=Object(n.useState)(!1),[h,f]=Object(n.useState)(""),[y,v]=Object(n.useReducer)(mm,[]),[O,x]=Object(n.useState)(!1),[S,j]=Object(n.useState)((k="contactId",+new URLSearchParams(window.location.search).get(k)));var k;const w=Object(n.useCallback)(async()=>{try{const{data:e}=await Be.get("/schedules/",{params:{searchParam:h,pageNumber:o}});v({type:"LOAD_SCHEDULES",payload:e.schedules}),s(e.hasMore),r(!1)}catch(e){Pe(e)}},[h,o]),T=Object(n.useCallback)(()=>{S&&I()},[S]);Object(n.useEffect)(()=>{v({type:"RESET"}),c(1)},[h]),Object(n.useEffect)(()=>{r(!0);const e=setTimeout(()=>{w()},500);return()=>clearTimeout(e)},[h,o,S,w,T]),Object(n.useEffect)(()=>{T();const e=He({companyId:a.companyId});return e.on("user",e=>{"update"!==e.action&&"create"!==e.action||v({type:"UPDATE_SCHEDULES",payload:e.schedules}),"delete"===e.action&&v({type:"DELETE_USER",payload:+e.scheduleId})}),()=>{e.disconnect()}},[T,a]);const I=()=>{d(null),x(!0)};return l.a.createElement(Ho,null,l.a.createElement(ol,{title:u&&"".concat(Me.a.t("schedules.confirmationModal.deleteTitle")),open:g,onClose:E,onConfirm:()=>(async e=>{try{await Be.delete("/schedules/".concat(e)),b.b.success(Me.a.t("schedules.toasts.deleted"))}catch(a){Pe(a)}p(null),f(""),c(1),v({type:"RESET"}),c(1),await w()})(u.id)},Me.a.t("schedules.confirmationModal.deleteMessage")),l.a.createElement(Kr,{open:O,onClose:()=>{d(null),x(!1)},reload:w,"aria-labelledby":"form-dialog-title",scheduleId:m&&m.id,contactId:S,cleanContact:()=>{j("")}}),l.a.createElement(Go,null,l.a.createElement(Ko,null,Me.a.t("schedules.title")),l.a.createElement(Qo,null,l.a.createElement(Wa.a,{placeholder:Me.a.t("contacts.searchPlaceholder"),type:"search",value:h,onChange:e=>{f(e.target.value.toLowerCase())},InputProps:{startAdornment:l.a.createElement(So.a,{position:"start"},l.a.createElement(xn.a,{style:{color:"gray"}}))}}),l.a.createElement(ba.a,{variant:"contained",color:"primary",onClick:I},Me.a.t("schedules.buttons.add")))),l.a.createElement(lt.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!i||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:l}=e.currentTarget;n-(a+100)<l&&c(e=>e+1)}},l.a.createElement(nn.a,{size:"small"},l.a.createElement(cn.a,null,l.a.createElement(sn.a,null,l.a.createElement(rn.a,{align:"center"},Me.a.t("schedules.table.contact")),l.a.createElement(rn.a,{align:"center"},Me.a.t("schedules.table.body")),l.a.createElement(rn.a,{align:"center"},Me.a.t("schedules.table.sendAt")),l.a.createElement(rn.a,{align:"center"},Me.a.t("schedules.table.status")),l.a.createElement(rn.a,{align:"center"},Me.a.t("schedules.table.actions")))),l.a.createElement(ln.a,null,l.a.createElement(l.a.Fragment,null,y.map(e=>{return l.a.createElement(sn.a,{key:e.id},l.a.createElement(rn.a,{align:"center"},e.contact.name),l.a.createElement(rn.a,{align:"center",title:e.body},(a=e.body,t=25,a.length>t?a.substring(0,t)+"...":a)),l.a.createElement(rn.a,{align:"center"},Ze()(e.sendAt).format("DD/MM/YYYY HH:mm:ss")),l.a.createElement(rn.a,{align:"center"},Object(Le.capitalize)(e.status)),l.a.createElement(rn.a,{align:"center"},l.a.createElement(C.a,{size:"small",onClick:()=>(e=>{d(e),x(!0)})(e)},l.a.createElement(Qi.a,null)),l.a.createElement(C.a,{size:"small",onClick:a=>{E(!0),p(e)}},l.a.createElement(Pn.a,null))));var a,t}),t&&l.a.createElement(Jo,{columns:4}))))))},pm=t(693),gm=t.n(pm),Em=t(692),bm=t.n(Em),hm=t(691),fm=t.n(hm);const ym=Object(y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},textField:{marginRight:e.spacing(1),flex:1},extraAttr:{display:"flex",justifyContent:"center",alignItems:"center"},btnWrapper:{position:"relative"},buttonProgress:{color:ua.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}})),vm=La.b().shape({name:La.c().min(2,"Too Short!").max(50,"Too Long!").required("Required")});var Om=e=>{let{open:a,onClose:t,campaignId:r,initialValues:o,onSave:c,resetPagination:i}=e;const s=ym(),m=Object(n.useRef)(!0),{user:d}=Object(n.useContext)(Xe),{companyId:u}=d,p={name:"",message1:"",message2:"",message3:"",message4:"",message5:"",confirmationMessage1:"",confirmationMessage2:"",confirmationMessage3:"",confirmationMessage4:"",confirmationMessage5:"",status:"INATIVA",confirmation:!1,scheduledAt:"",whatsappId:"",contactListId:"",companyId:u},[g,E]=Object(n.useState)(p),[f,y]=Object(n.useState)([]),[v,O]=Object(n.useState)([]),[x,S]=Object(n.useState)(0),[j,k]=Object(n.useState)(null),[w,T]=Object(n.useState)(!1),[A,N]=Object(n.useState)(!0),M=Object(n.useRef)(null);Object(n.useEffect)(()=>()=>{m.current=!1},[]),Object(n.useEffect)(()=>{if(m.current){if(o&&E(e=>Object(h.a)(Object(h.a)({},e),o)),Be.get("/contact-lists/list",{params:{companyId:u}}).then(e=>{let{data:a}=e;return O(a)}),Be.get("/whatsapp",{params:{companyId:u,session:0}}).then(e=>{let{data:a}=e;return y(a)}),!r)return;Be.get("/campaigns/".concat(r)).then(e=>{let{data:a}=e;E(e=>{let t=Object.assign({},e);return Object.entries(a).forEach(e=>{let[a,n]=e;t[a]="scheduledAt"===a&&""!==n&&null!==n?Ze()(n).format("YYYY-MM-DDTHH:mm"):null===n?"":n}),t})})}},[r,a,o,u]),Object(n.useEffect)(()=>{const e=Ze()(),a=Ze()(g.scheduledAt),t=!Number.isNaN(a.diff(e))&&a.diff(e,"hour")>1,n="INATIVA"===g.status||"PROGRAMADA"===g.status&&t;N(n)},[g.status,g.scheduledAt]);const R=()=>{t(),E(p)},D=e=>l.a.createElement(Pa.b,{as:Wa.a,id:e,name:e,fullWidth:!0,rows:5,label:Me.a.t("campaigns.dialog.form.".concat(e)),placeholder:Me.a.t("campaigns.dialog.form.messagePlaceholder"),multiline:!0,variant:"outlined",helperText:"Utilize vari\xe1veis como {nome}, {numero}, {email} ou defina vari\xe1veis personalziadas.",disabled:!A&&"CANCELADA"!==g.status}),L=e=>l.a.createElement(Pa.b,{as:Wa.a,id:e,name:e,fullWidth:!0,rows:5,label:Me.a.t("campaigns.dialog.form.".concat(e)),placeholder:Me.a.t("campaigns.dialog.form.messagePlaceholder"),multiline:!0,variant:"outlined",disabled:!A&&"CANCELADA"!==g.status});return l.a.createElement("div",{className:s.root},l.a.createElement(ol,{title:Me.a.t("campaigns.confirmationModal.deleteTitle"),open:w,onClose:()=>T(!1),onConfirm:async()=>{j&&(k(null),M.current.value=null),g.mediaPath&&(await Be.delete("/campaigns/".concat(g.id,"/media-upload")),E(e=>Object(h.a)(Object(h.a)({},e),{},{mediaPath:null,mediaName:null})),b.b.success(Me.a.t("campaigns.toasts.deleted")))}},Me.a.t("campaigns.confirmationModal.deleteMessage")),l.a.createElement(qa.a,{open:a,onClose:R,fullWidth:!0,maxWidth:"md",scroll:"paper"},l.a.createElement(Ba.a,{id:"form-dialog-title"},A?l.a.createElement(l.a.Fragment,null,"".concat(r?Me.a.t("campaigns.dialog.update"):Me.a.t("campaigns.dialog.new"))):l.a.createElement(l.a.Fragment,null,"".concat(Me.a.t("campaigns.dialog.readonly")))),l.a.createElement("div",{style:{display:"none"}},l.a.createElement("input",{type:"file",ref:M,onChange:e=>(e=>{const a=Object(Le.head)(e.target.files);a&&k(a)})(e)})),l.a.createElement(Pa.e,{initialValues:g,enableReinitialize:!0,validationSchema:vm,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{try{const a={};if(Object.entries(e).forEach(e=>{let[t,n]=e;a[t]="scheduledAt"===t&&""!==n&&null!==n?Ze()(n).format("YYYY-MM-DD HH:mm:ss"):""===n?null:n}),r){if(await Be.put("/campaigns/".concat(r),a),null!=j){const e=new FormData;e.append("file",j),await Be.post("/campaigns/".concat(r,"/media-upload"),e)}R()}else{const{data:e}=await Be.post("/campaigns",a);if(null!=j){const a=new FormData;a.append("file",j),await Be.post("/campaigns/".concat(e.id,"/media-upload"),a)}c&&c(e),R()}b.b.success(Me.a.t("campaigns.toasts.success"))}catch(a){console.log(a),Pe(a)}})(e),a.setSubmitting(!1)},400)}},e=>{let{values:a,errors:t,touched:n,isSubmitting:o}=e;return l.a.createElement(Pa.d,null,l.a.createElement(za.a,{dividers:!0},l.a.createElement(kt.a,{spacing:2,container:!0},l.a.createElement(kt.a,{xs:12,md:9,item:!0},l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("campaigns.dialog.form.name"),name:"name",error:n.name&&Boolean(t.name),helperText:n.name&&t.name,variant:"outlined",margin:"dense",fullWidth:!0,className:s.textField,disabled:!A})),l.a.createElement(kt.a,{xs:12,md:3,item:!0},l.a.createElement(Ha.a,{variant:"outlined",margin:"dense",fullWidth:!0,className:s.formControl},l.a.createElement(Va.a,{id:"confirmation-selection-label"},Me.a.t("campaigns.dialog.form.confirmation")),l.a.createElement(Pa.b,{as:Ua.a,label:Me.a.t("campaigns.dialog.form.confirmation"),placeholder:Me.a.t("campaigns.dialog.form.confirmation"),labelId:"confirmation-selection-label",id:"confirmation",name:"confirmation",error:n.confirmation&&Boolean(t.confirmation),disabled:!A},l.a.createElement(I.a,{value:!1},"Desabilitada"),l.a.createElement(I.a,{value:!0},"Habilitada")))),l.a.createElement(kt.a,{xs:12,md:4,item:!0},l.a.createElement(Ha.a,{variant:"outlined",margin:"dense",fullWidth:!0,className:s.formControl},l.a.createElement(Va.a,{id:"contactList-selection-label"},Me.a.t("campaigns.dialog.form.contactList")),l.a.createElement(Pa.b,{as:Ua.a,label:Me.a.t("campaigns.dialog.form.contactList"),placeholder:Me.a.t("campaigns.dialog.form.contactList"),labelId:"contactList-selection-label",id:"contactListId",name:"contactListId",error:n.contactListId&&Boolean(t.contactListId),disabled:!A},l.a.createElement(I.a,{value:""},"Nenhuma"),v&&v.map(e=>l.a.createElement(I.a,{key:e.id,value:e.id},e.name))))),l.a.createElement(kt.a,{xs:12,md:4,item:!0},l.a.createElement(Ha.a,{variant:"outlined",margin:"dense",fullWidth:!0,className:s.formControl},l.a.createElement(Va.a,{id:"whatsapp-selection-label"},Me.a.t("campaigns.dialog.form.whatsapp")),l.a.createElement(Pa.b,{as:Ua.a,label:Me.a.t("campaigns.dialog.form.whatsapp"),placeholder:Me.a.t("campaigns.dialog.form.whatsapp"),labelId:"whatsapp-selection-label",id:"whatsappId",name:"whatsappId",error:n.whatsappId&&Boolean(t.whatsappId),disabled:!A},l.a.createElement(I.a,{value:""},"Nenhuma"),f&&f.map(e=>l.a.createElement(I.a,{key:e.id,value:e.id},e.name))))),l.a.createElement(kt.a,{xs:12,md:4,item:!0},l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("campaigns.dialog.form.scheduledAt"),name:"scheduledAt",error:n.scheduledAt&&Boolean(t.scheduledAt),helperText:n.scheduledAt&&t.scheduledAt,variant:"outlined",margin:"dense",type:"datetime-local",InputLabelProps:{shrink:!0},fullWidth:!0,className:s.textField,disabled:!A})),l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(jn.a,{value:x,indicatorColor:"primary",textColor:"primary",onChange:(e,a)=>S(a),variant:"fullWidth",centered:!0,style:{background:"#f2f2f2",border:"1px solid #e6e6e6",borderRadius:2}},l.a.createElement(kn.a,{label:"Msg. 1",index:0}),l.a.createElement(kn.a,{label:"Msg. 2",index:1}),l.a.createElement(kn.a,{label:"Msg. 3",index:2}),l.a.createElement(kn.a,{label:"Msg. 4",index:3}),l.a.createElement(kn.a,{label:"Msg. 5",index:4})),l.a.createElement(Vn.a,{style:{paddingTop:20,border:"none"}},0===x&&l.a.createElement(l.a.Fragment,null,a.confirmation?l.a.createElement(kt.a,{spacing:2,container:!0},l.a.createElement(kt.a,{xs:12,md:8,item:!0},l.a.createElement(l.a.Fragment,null,D("message1"))),l.a.createElement(kt.a,{xs:12,md:4,item:!0},l.a.createElement(l.a.Fragment,null,L("confirmationMessage1")))):l.a.createElement(l.a.Fragment,null,D("message1"))),1===x&&l.a.createElement(l.a.Fragment,null,a.confirmation?l.a.createElement(kt.a,{spacing:2,container:!0},l.a.createElement(kt.a,{xs:12,md:8,item:!0},l.a.createElement(l.a.Fragment,null,D("message2"))),l.a.createElement(kt.a,{xs:12,md:4,item:!0},l.a.createElement(l.a.Fragment,null,L("confirmationMessage2")))):l.a.createElement(l.a.Fragment,null,D("message2"))),2===x&&l.a.createElement(l.a.Fragment,null,a.confirmation?l.a.createElement(kt.a,{spacing:2,container:!0},l.a.createElement(kt.a,{xs:12,md:8,item:!0},l.a.createElement(l.a.Fragment,null,D("message3"))),l.a.createElement(kt.a,{xs:12,md:4,item:!0},l.a.createElement(l.a.Fragment,null,L("confirmationMessage3")))):l.a.createElement(l.a.Fragment,null,D("message3"))),3===x&&l.a.createElement(l.a.Fragment,null,a.confirmation?l.a.createElement(kt.a,{spacing:2,container:!0},l.a.createElement(kt.a,{xs:12,md:8,item:!0},l.a.createElement(l.a.Fragment,null,D("message4"))),l.a.createElement(kt.a,{xs:12,md:4,item:!0},l.a.createElement(l.a.Fragment,null,L("confirmationMessage4")))):l.a.createElement(l.a.Fragment,null,D("message4"))),4===x&&l.a.createElement(l.a.Fragment,null,a.confirmation?l.a.createElement(kt.a,{spacing:2,container:!0},l.a.createElement(kt.a,{xs:12,md:8,item:!0},l.a.createElement(l.a.Fragment,null,D("message5"))),l.a.createElement(kt.a,{xs:12,md:4,item:!0},l.a.createElement(l.a.Fragment,null,L("confirmationMessage5")))):l.a.createElement(l.a.Fragment,null,D("message5"))))),(g.mediaPath||j)&&l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(ba.a,{startIcon:l.a.createElement(sr.a,null)},null!=j?j.name:g.mediaName),A&&l.a.createElement(C.a,{onClick:()=>T(!0),color:"secondary"},l.a.createElement(Pn.a,null))))),l.a.createElement(Fa.a,null,"CANCELADA"===g.status&&l.a.createElement(ba.a,{color:"primary",onClick:()=>(async()=>{try{await Be.post("/campaigns/".concat(g.id,"/restart")),b.b.success(Me.a.t("campaigns.toasts.restart")),E(e=>Object(h.a)(Object(h.a)({},e),{},{status:"EM_ANDAMENTO"})),i()}catch(e){b.b.error(e.message)}})(),variant:"outlined"},Me.a.t("campaigns.dialog.buttons.restart")),"EM_ANDAMENTO"===g.status&&l.a.createElement(ba.a,{color:"primary",onClick:()=>(async()=>{try{await Be.post("/campaigns/".concat(g.id,"/cancel")),b.b.success(Me.a.t("campaigns.toasts.cancel")),E(e=>Object(h.a)(Object(h.a)({},e),{},{status:"CANCELADA"})),i()}catch(e){b.b.error(e.message)}})(),variant:"outlined"},Me.a.t("campaigns.dialog.buttons.cancel")),!j&&!g.mediaPath&&A&&l.a.createElement(ba.a,{color:"primary",onClick:()=>M.current.click(),disabled:o,variant:"outlined"},Me.a.t("campaigns.dialog.buttons.attach")),l.a.createElement(ba.a,{onClick:R,color:"secondary",disabled:o,variant:"outlined"},Me.a.t("campaigns.dialog.buttons.close")),(A||"CANCELADA"===g.status)&&l.a.createElement(ba.a,{type:"submit",color:"primary",disabled:o,variant:"contained",className:s.btnWrapper},"".concat(r?Me.a.t("campaigns.dialog.buttons.edit"):Me.a.t("campaigns.dialog.buttons.add")),o&&l.a.createElement(ha.a,{size:24,className:s.buttonProgress}))))})))};const Cm=(e,a)=>{if("LOAD_CAMPAIGNS"===a.type){const t=a.payload,n=[];return Object(Le.isArray)(t)&&t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_CAMPAIGNS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_CAMPAIGN"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},xm=Object(y.a)(e=>({mainPaper:Object(h.a)({flex:1,padding:e.spacing(1),overflowY:"scroll"},e.scrollbarStyles)}));var Sm=()=>{const e=xm(),a=Object(E.g)(),[t,r]=Object(n.useState)(!1),[o,c]=Object(n.useState)(1),[i,s]=Object(n.useState)(!1),[m,d]=Object(n.useState)(null),[u,p]=Object(n.useState)(null),[g,h]=Object(n.useState)(!1),[f,y]=Object(n.useState)(!1),[v,O]=Object(n.useState)(""),[x,S]=Object(n.useReducer)(Cm,[]),{datetimeToClient:j}=et();Object(n.useEffect)(()=>{S({type:"RESET"}),c(1)},[v]),Object(n.useEffect)(()=>{r(!0);const e=setTimeout(()=>{k()},500);return()=>clearTimeout(e)},[v,o]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=He({companyId:e});return a.on("company-".concat(e,"-campaign"),e=>{"update"!==e.action&&"create"!==e.action||S({type:"UPDATE_CAMPAIGNS",payload:e.record}),"delete"===e.action&&S({type:"DELETE_CAMPAIGN",payload:+e.id})}),()=>{a.disconnect()}},[]);const k=async()=>{try{const{data:e}=await Be.get("/campaigns/",{params:{searchParam:v,pageNumber:o}});S({type:"LOAD_CAMPAIGNS",payload:e.records}),s(e.hasMore),r(!1)}catch(e){Pe(e)}};return l.a.createElement(Ho,null,l.a.createElement(ol,{title:u&&"".concat(Me.a.t("campaigns.confirmationModal.deleteTitle")," ").concat(u.name,"?"),open:f,onClose:y,onConfirm:()=>(async e=>{try{await Be.delete("/campaigns/".concat(e)),b.b.success(Me.a.t("campaigns.toasts.deleted"))}catch(a){Pe(a)}p(null),O(""),c(1)})(u.id)},Me.a.t("campaigns.confirmationModal.deleteMessage")),l.a.createElement(Om,{resetPagination:()=>{c(1),k()},open:g,onClose:()=>{d(null),h(!1)},"aria-labelledby":"form-dialog-title",campaignId:m&&m.id}),l.a.createElement(Go,null,l.a.createElement(kt.a,{style:{width:"99.6%"},container:!0},l.a.createElement(kt.a,{xs:12,sm:8,item:!0},l.a.createElement(Ko,null,Me.a.t("campaigns.title"))),l.a.createElement(kt.a,{xs:12,sm:4,item:!0},l.a.createElement(kt.a,{spacing:2,container:!0},l.a.createElement(kt.a,{xs:6,sm:6,item:!0},l.a.createElement(Wa.a,{fullWidth:!0,placeholder:Me.a.t("campaigns.searchPlaceholder"),type:"search",value:v,onChange:e=>{O(e.target.value.toLowerCase())},InputProps:{startAdornment:l.a.createElement(So.a,{position:"start"},l.a.createElement(xn.a,{style:{color:"gray"}}))}})),l.a.createElement(kt.a,{xs:6,sm:6,item:!0},l.a.createElement(ba.a,{fullWidth:!0,variant:"contained",onClick:()=>{d(null),h(!0)},color:"primary"},Me.a.t("campaigns.buttons.add"))))))),l.a.createElement(lt.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!i||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:l}=e.currentTarget;n-(a+100)<l&&c(e=>e+1)}},l.a.createElement(nn.a,{size:"small"},l.a.createElement(cn.a,null,l.a.createElement(sn.a,null,l.a.createElement(rn.a,{align:"center"},Me.a.t("campaigns.table.name")),l.a.createElement(rn.a,{align:"center"},Me.a.t("campaigns.table.status")),l.a.createElement(rn.a,{align:"center"},Me.a.t("campaigns.table.contactList")),l.a.createElement(rn.a,{align:"center"},Me.a.t("campaigns.table.whatsapp")),l.a.createElement(rn.a,{align:"center"},Me.a.t("campaigns.table.scheduledAt")),l.a.createElement(rn.a,{align:"center"},Me.a.t("campaigns.table.completedAt")),l.a.createElement(rn.a,{align:"center"},Me.a.t("campaigns.table.confirmation")),l.a.createElement(rn.a,{align:"center"},Me.a.t("campaigns.table.actions")))),l.a.createElement(ln.a,null,l.a.createElement(l.a.Fragment,null,x.map(e=>l.a.createElement(sn.a,{key:e.id},l.a.createElement(rn.a,{align:"center"},e.name),l.a.createElement(rn.a,{align:"center"},(e=>{switch(e){case"INATIVA":return"Inativa";case"PROGRAMADA":return"Programada";case"EM_ANDAMENTO":return"Em Andamento";case"CANCELADA":return"Cancelada";case"FINALIZADA":return"Finalizada";default:return e}})(e.status)),l.a.createElement(rn.a,{align:"center"},e.contactListId?e.contactList.name:"N\xe3o definida"),l.a.createElement(rn.a,{align:"center"},e.whatsappId?e.whatsapp.name:"N\xe3o definido"),l.a.createElement(rn.a,{align:"center"},e.scheduledAt?j(e.scheduledAt):"Sem agendamento"),l.a.createElement(rn.a,{align:"center"},e.completedAt?j(e.completedAt):"N\xe3o conclu\xedda"),l.a.createElement(rn.a,{align:"center"},e.confirmation?"Habilitada":"Desabilitada"),l.a.createElement(rn.a,{align:"center"},"EM_ANDAMENTO"===e.status&&l.a.createElement(C.a,{onClick:()=>(async e=>{try{await Be.post("/campaigns/".concat(e.id,"/cancel")),b.b.success(Me.a.t("campaigns.toasts.cancel")),c(1),k()}catch(a){b.b.error(a.message)}})(e),title:"Parar Campanha",size:"small"},l.a.createElement(fm.a,null)),"CANCELADA"===e.status&&l.a.createElement(C.a,{onClick:()=>(async e=>{try{await Be.post("/campaigns/".concat(e.id,"/restart")),b.b.success(Me.a.t("campaigns.toasts.restart")),c(1),k()}catch(a){b.b.error(a.message)}})(e),title:"Parar Campanha",size:"small"},l.a.createElement(bm.a,null)),l.a.createElement(C.a,{onClick:()=>a.push("/campaign/".concat(e.id,"/report")),size:"small"},l.a.createElement(gm.a,null)),l.a.createElement(C.a,{size:"small",onClick:()=>(e=>{d(e),h(!0)})(e)},l.a.createElement(Qi.a,null)),l.a.createElement(C.a,{size:"small",onClick:a=>{y(!0),p(e)}},l.a.createElement(Pn.a,null))))),t&&l.a.createElement(Jo,{columns:8}))))))};const jm=Object(y.a)(e=>({mainPaper:Object(h.a)({flex:1,padding:e.spacing(1),overflowY:"scroll"},e.scrollbarStyles),textRight:{textAlign:"right"},tabPanelsContainer:{padding:e.spacing(2)}})),km={messageInterval:60,longerIntervalAfter:60,greaterInterval:120,variables:[]};var wm=()=>{const e=jm(),[a,t]=Object(n.useState)(km),[r,o]=Object(n.useState)(!1),[c,i]=Object(n.useState)(!1),[s,m]=Object(n.useState)(null),[d,u]=Object(n.useState)({key:"",value:""});Object(n.useEffect)(()=>{Be.get("/campaign-settings").then(e=>{let{data:a}=e;const n=[];Array.isArray(a)&&a.length>0&&(a.forEach(e=>{n.push([e.key,JSON.parse(e.value)])}),t(Object.fromEntries(n)))})},[]);const p=e=>{if(null!==e.target.value){const a={};a[e.target.name]=e.target.value,u(e=>Object(h.a)(Object(h.a)({},e),a))}},g=e=>{const a={};a[e.target.name]=e.target.value,t(e=>Object(h.a)(Object(h.a)({},e),a))};return l.a.createElement(Ho,null,l.a.createElement(ol,{title:Me.a.t("campaigns.confirmationModal.deleteTitle"),open:c,onClose:()=>i(!1),onConfirm:()=>{const e=a.variables.filter(e=>e.key!==s);t(a=>Object(h.a)(Object(h.a)({},a),{},{variables:e})),m(null)}},Me.a.t("campaigns.confirmationModal.deleteMessage")),l.a.createElement(Go,null,l.a.createElement(kt.a,{style:{width:"99.6%"},container:!0},l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(Ko,null,Me.a.t("campaignsConfig.title"))))),l.a.createElement(lt.a,{className:e.mainPaper,variant:"outlined"},l.a.createElement(Vn.a,{className:e.tabPanelsContainer},l.a.createElement(kt.a,{spacing:2,container:!0},l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(w.a,{component:"h3"},"Intervalos")),l.a.createElement(kt.a,{xs:12,md:4,item:!0},l.a.createElement(Ha.a,{variant:"outlined",className:e.formControl,fullWidth:!0},l.a.createElement(Va.a,{id:"messageInterval-label"},"Intervalo Rand\xf4mico de Disparo"),l.a.createElement(Ua.a,{name:"messageInterval",id:"messageInterval",labelId:"messageInterval-label",label:"Intervalo Rand\xf4mico de Disparo",value:a.messageInterval,onChange:e=>g(e)},l.a.createElement(I.a,{value:0},"Sem Intervalo"),l.a.createElement(I.a,{value:5},"5 segundos"),l.a.createElement(I.a,{value:10},"10 segundos"),l.a.createElement(I.a,{value:15},"15 segundos"),l.a.createElement(I.a,{value:20},"20 segundos")))),l.a.createElement(kt.a,{xs:12,md:4,item:!0},l.a.createElement(Ha.a,{variant:"outlined",className:e.formControl,fullWidth:!0},l.a.createElement(Va.a,{id:"longerIntervalAfter-label"},"Intervalo Maior Ap\xf3s"),l.a.createElement(Ua.a,{name:"longerIntervalAfter",id:"longerIntervalAfter",labelId:"longerIntervalAfter-label",label:"Intervalo Maior Ap\xf3s",value:a.longerIntervalAfter,onChange:e=>g(e)},l.a.createElement(I.a,{value:0},"N\xe3o definido"),l.a.createElement(I.a,{value:5},"5 mensagens"),l.a.createElement(I.a,{value:10},"10 mensagens"),l.a.createElement(I.a,{value:15},"15 mensagens"),l.a.createElement(I.a,{value:20},"20 mensagens")))),l.a.createElement(kt.a,{xs:12,md:4,item:!0},l.a.createElement(Ha.a,{variant:"outlined",className:e.formControl,fullWidth:!0},l.a.createElement(Va.a,{id:"greaterInterval-label"},"Intervalo de Disparo Maior"),l.a.createElement(Ua.a,{name:"greaterInterval",id:"greaterInterval",labelId:"greaterInterval-label",label:"Intervalo de Disparo Maior",value:a.greaterInterval,onChange:e=>g(e)},l.a.createElement(I.a,{value:0},"Sem Intervalo"),l.a.createElement(I.a,{value:20},"20 segundos"),l.a.createElement(I.a,{value:30},"30 segundos"),l.a.createElement(I.a,{value:40},"40 segundos"),l.a.createElement(I.a,{value:50},"50 segundos"),l.a.createElement(I.a,{value:60},"60 segundos")))),l.a.createElement(kt.a,{xs:12,className:e.textRight,item:!0},l.a.createElement(ba.a,{onClick:()=>o(!r),color:"primary",style:{marginRight:10}},"Adicionar Vari\xe1vel"),l.a.createElement(ba.a,{onClick:async()=>{await Be.post("/campaign-settings",{settings:a}),b.b.success("Configura\xe7\xf5es salvas")},color:"primary",variant:"contained"},"Salvar Configura\xe7\xf5es")),r&&l.a.createElement(l.a.Fragment,null,l.a.createElement(kt.a,{xs:12,md:6,item:!0},l.a.createElement(Wa.a,{label:"Atalho",variant:"outlined",value:d.key,name:"key",onChange:p,fullWidth:!0})),l.a.createElement(kt.a,{xs:12,md:6,item:!0},l.a.createElement(Wa.a,{label:"Conte\xfado",variant:"outlined",value:d.value,name:"value",onChange:p,fullWidth:!0})),l.a.createElement(kt.a,{xs:12,className:e.textRight,item:!0},l.a.createElement(ba.a,{onClick:()=>o(!r),color:"primary",style:{marginRight:10}},"Fechar"),l.a.createElement(ba.a,{onClick:()=>{t(e=>{const t=a.variables.filter(e=>e.key===d.key),n=e.variables;return 0===t.length&&(n.push(Object.assign({},d)),u({key:"",value:""})),Object(h.a)(Object(h.a)({},e),{},{variables:n})})},color:"primary",variant:"contained"},"Adicionar"))),a.variables.length>0&&l.a.createElement(kt.a,{xs:12,className:e.textRight,item:!0},l.a.createElement(nn.a,{size:"small"},l.a.createElement(cn.a,null,l.a.createElement(sn.a,null,l.a.createElement(rn.a,{style:{width:"1%"}}),l.a.createElement(rn.a,null,"Atalho"),l.a.createElement(rn.a,null,"Conte\xfado"))),l.a.createElement(ln.a,null,Array.isArray(a.variables)&&a.variables.map((e,a)=>l.a.createElement(sn.a,{key:a},l.a.createElement(rn.a,null,l.a.createElement(C.a,{size:"small",onClick:()=>{m(e.key),i(!0)}},l.a.createElement(Pn.a,null))),l.a.createElement(rn.a,null,"{"+e.key+"}"),l.a.createElement(rn.a,null,e.value))))))))))},Tm=t(437),Im=t.n(Tm),Am=t(695),Nm=t.n(Am),Mm=t(694),Rm=t.n(Mm);const Dm=Object(y.a)(e=>({mainPaper:Object(h.a)({flex:1,padding:e.spacing(2),overflowY:"scroll"},e.scrollbarStyles),textRight:{textAlign:"right"},tabPanelsContainer:{padding:e.spacing(2)}}));var Lm=()=>{const e=Dm(),{campaignId:a}=Object(E.h)(),[t,r]=Object(n.useState)({}),[o,c]=Object(n.useState)(0),[i,s]=Object(n.useState)(0),[m,d]=Object(n.useState)(0),[u,p]=Object(n.useState)(0),[g,b]=Object(n.useState)(0),[h,f]=Object(n.useState)(!1),y=Object(n.useRef)(!0),{datetimeToClient:v}=et();Object(n.useEffect)(()=>(y.current&&O(),()=>{y.current=!1}),[]),Object(n.useEffect)(()=>{if(y.current&&Object(Le.has)(t,"shipping")){if(Object(Le.has)(t,"contactList")){const e=Object(Le.get)(t,"contactList").contacts.filter(e=>e.isWhatsappValid);c(e.length)}if(Object(Le.has)(t,"shipping")){const e=Object(Le.get)(t,"shipping"),a=e.filter(e=>!Object(Le.isNull)(e.deliveredAt)),n=e.filter(e=>!Object(Le.isNull)(e.confirmationRequestedAt)),l=e.filter(e=>!Object(Le.isNull)(e.deliveredAt)&&!Object(Le.isNull)(e.confirmationRequestedAt));s(a.length),d(n.length),p(l.length),s(a.length)}}},[t]),Object(n.useEffect)(()=>{b(i/o*100)},[i,o]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),t=He({companyId:e});return t.on("company-".concat(e,"-campaign"),e=>{console.log(e),e.record.id===+a&&(r(e.record),"FINALIZADA"===e.record.status&&setTimeout(()=>{O()},5e3))}),()=>{t.disconnect()}},[a]);const O=async()=>{f(!0);const{data:e}=await Be.get("/campaigns/".concat(a));r(e),f(!1)};return l.a.createElement(Ho,null,l.a.createElement(Go,null,l.a.createElement(kt.a,{style:{width:"99.6%"},container:!0},l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(Ko,null,"Relat\xf3rio da ",t.name||"Campanha")))),l.a.createElement(lt.a,{className:e.mainPaper,variant:"outlined"},l.a.createElement(w.a,{variant:"h6",component:"h2"},"Status: ",(e=>{switch(e){case"INATIVA":return"Inativa";case"PROGRAMADA":return"Programada";case"EM_ANDAMENTO":return"Em Andamento";case"CANCELADA":return"Cancelada";case"FINALIZADA":return"Finalizada";default:return e}})(t.status)," ",i," de ",o),l.a.createElement(kt.a,{spacing:2,container:!0},l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(Ir.a,{variant:"determinate",style:{height:15,borderRadius:3,margin:"20px 0"},value:g})),l.a.createElement(kt.a,{xs:12,md:4,item:!0},l.a.createElement(tn,{icon:l.a.createElement(Im.a,{fontSize:"inherit"}),title:"Contatos V\xe1lidos",value:o,loading:h})),t.confirmation&&l.a.createElement(l.a.Fragment,null,l.a.createElement(kt.a,{xs:12,md:4,item:!0},l.a.createElement(tn,{icon:l.a.createElement(xl.a,{fontSize:"inherit"}),title:"Confirma\xe7\xf5es Solicitadas",value:m,loading:h})),l.a.createElement(kt.a,{xs:12,md:4,item:!0},l.a.createElement(tn,{icon:l.a.createElement(Rm.a,{fontSize:"inherit"}),title:"Confirma\xe7\xf5es",value:u,loading:h}))),l.a.createElement(kt.a,{xs:12,md:4,item:!0},l.a.createElement(tn,{icon:l.a.createElement(Lt.a,{fontSize:"inherit"}),title:"Entregues",value:i,loading:h})),t.whatsappId&&l.a.createElement(kt.a,{xs:12,md:4,item:!0},l.a.createElement(tn,{icon:l.a.createElement(V.a,{fontSize:"inherit"}),title:"Conex\xe3o",value:t.whatsapp.name,loading:h})),t.contactListId&&l.a.createElement(kt.a,{xs:12,md:4,item:!0},l.a.createElement(tn,{icon:l.a.createElement(ce.a,{fontSize:"inherit"}),title:"Lista de Contatos",value:t.contactList.name,loading:h})),l.a.createElement(kt.a,{xs:12,md:4,item:!0},l.a.createElement(tn,{icon:l.a.createElement(Nm.a,{fontSize:"inherit"}),title:"Agendamento",value:v(t.scheduledAt),loading:h})),l.a.createElement(kt.a,{xs:12,md:4,item:!0},l.a.createElement(tn,{icon:l.a.createElement($.a,{fontSize:"inherit"}),title:"Conclus\xe3o",value:v(t.completedAt),loading:h})))))};const Pm=Object(y.a)(e=>({root:{display:"flex",flexWrap:"wrap"},multFieldLine:{display:"flex","& > *:not(:last-child)":{marginRight:e.spacing(1)}},btnWrapper:{position:"relative"},buttonProgress:{color:ua.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),minWidth:120},colorAdorment:{width:20,height:20}})),Wm=La.b().shape({title:La.c().required("Obrigat\xf3rio"),text:La.c().required("Obrigat\xf3rio")});var qm=e=>{let{open:a,onClose:t,announcementId:r,reload:o}=e;const c=Pm(),i={title:"",text:"",priority:3,status:!0},[s,m]=Object(n.useState)(!1),[d,u]=Object(n.useState)(i),[p,g]=Object(n.useState)(null),E=Object(n.useRef)(null);Object(n.useEffect)(()=>{try{(async()=>{if(!r)return;const{data:e}=await Be.get("/announcements/".concat(r));u(a=>Object(h.a)(Object(h.a)({},a),e))})()}catch(e){Pe(e)}},[r,a]);const f=()=>{u(i),g(null),t()};return l.a.createElement("div",{className:c.root},l.a.createElement(ol,{title:Me.a.t("announcements.confirmationModal.deleteTitle"),open:s,onClose:()=>m(!1),onConfirm:async()=>{p&&(g(null),E.current.value=null),d.mediaPath&&(await Be.delete("/announcements/".concat(d.id,"/media-upload")),u(e=>Object(h.a)(Object(h.a)({},e),{},{mediaPath:null})),b.b.success(Me.a.t("announcements.toasts.deleted")),"function"==typeof o&&o())}},Me.a.t("announcements.confirmationModal.deleteMessage")),l.a.createElement(qa.a,{open:a,onClose:f,maxWidth:"xs",fullWidth:!0,scroll:"paper"},l.a.createElement(Ba.a,{id:"form-dialog-title"},"".concat(r?Me.a.t("announcements.dialog.edit"):Me.a.t("announcements.dialog.add"))),l.a.createElement("div",{style:{display:"none"}},l.a.createElement("input",{type:"file",accept:".png,.jpg,.jpeg",ref:E,onChange:e=>(e=>{const a=Object(Le.head)(e.target.files);a&&g(a)})(e)})),l.a.createElement(Pa.e,{initialValues:d,enableReinitialize:!0,validationSchema:Wm,onSubmit:(e,a)=>{setTimeout(()=>{(async e=>{const a=Object(h.a)({},e);try{if(r){if(await Be.put("/announcements/".concat(r),a),null!=p){const e=new FormData;e.append("file",p),await Be.post("/announcements/".concat(r,"/media-upload"),e)}}else{const{data:e}=await Be.post("/announcements",a);if(null!=p){const a=new FormData;a.append("file",p),await Be.post("/announcements/".concat(e.id,"/media-upload"),a)}}b.b.success(Me.a.t("announcements.toasts.success")),"function"==typeof o&&o()}catch(t){Pe(t)}f()})(e),a.setSubmitting(!1)},400)}},e=>{let{touched:a,errors:t,isSubmitting:n,values:o}=e;return l.a.createElement(Pa.d,null,l.a.createElement(za.a,{dividers:!0},l.a.createElement(kt.a,{spacing:2,container:!0},l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("announcements.dialog.form.title"),name:"title",error:a.title&&Boolean(t.title),helperText:a.title&&t.title,variant:"outlined",margin:"dense",fullWidth:!0})),l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(Pa.b,{as:Wa.a,label:Me.a.t("announcements.dialog.form.text"),name:"text",error:a.text&&Boolean(t.text),helperText:a.text&&t.text,variant:"outlined",margin:"dense",multiline:!0,rows:7,fullWidth:!0})),l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(Ha.a,{variant:"outlined",margin:"dense",fullWidth:!0},l.a.createElement(Va.a,{id:"status-selection-label"},Me.a.t("announcements.dialog.form.status")),l.a.createElement(Pa.b,{as:Ua.a,label:Me.a.t("announcements.dialog.form.status"),placeholder:Me.a.t("announcements.dialog.form.status"),labelId:"status-selection-label",id:"status",name:"status",error:a.status&&Boolean(t.status)},l.a.createElement(I.a,{value:!0},"Ativo"),l.a.createElement(I.a,{value:!1},"Inativo")))),l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(Ha.a,{variant:"outlined",margin:"dense",fullWidth:!0},l.a.createElement(Va.a,{id:"priority-selection-label"},Me.a.t("announcements.dialog.form.priority")),l.a.createElement(Pa.b,{as:Ua.a,label:Me.a.t("announcements.dialog.form.priority"),placeholder:Me.a.t("announcements.dialog.form.priority"),labelId:"priority-selection-label",id:"priority",name:"priority",error:a.priority&&Boolean(t.priority)},l.a.createElement(I.a,{value:1},"Alta"),l.a.createElement(I.a,{value:2},"M\xe9dia"),l.a.createElement(I.a,{value:3},"Baixa")))),(d.mediaPath||p)&&l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(ba.a,{startIcon:l.a.createElement(sr.a,null)},p?p.name:d.mediaName),l.a.createElement(C.a,{onClick:()=>m(!0),color:"secondary"},l.a.createElement(Pn.a,null))))),l.a.createElement(Fa.a,null,!p&&!d.mediaPath&&l.a.createElement(ba.a,{color:"primary",onClick:()=>E.current.click(),disabled:n,variant:"outlined"},Me.a.t("announcements.dialog.buttons.attach")),l.a.createElement(ba.a,{onClick:f,color:"secondary",disabled:n,variant:"outlined"},Me.a.t("announcements.dialog.buttons.cancel")),l.a.createElement(ba.a,{type:"submit",color:"primary",disabled:n,variant:"contained",className:c.btnWrapper},"".concat(r?Me.a.t("announcements.dialog.buttons.add"):Me.a.t("announcements.dialog.buttons.edit")),n&&l.a.createElement(ha.a,{size:24,className:c.buttonProgress}))))})))};const Fm=(e,a)=>{if("LOAD_ANNOUNCEMENTS"===a.type){const t=a.payload,n=[];return Object(Le.isArray)(t)&&t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_ANNOUNCEMENTS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_ANNOUNCEMENT"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},zm=Object(y.a)(e=>({mainPaper:Object(h.a)({flex:1,padding:e.spacing(1),overflowY:"scroll"},e.scrollbarStyles)}));var Bm=()=>{const e=zm(),[a,t]=Object(n.useState)(!1),[r,o]=Object(n.useState)(1),[c,i]=Object(n.useState)(!1),[s,m]=Object(n.useState)(null),[d,u]=Object(n.useState)(null),[p,g]=Object(n.useState)(!1),[E,h]=Object(n.useState)(!1),[f,y]=Object(n.useState)(""),[v,O]=Object(n.useReducer)(Fm,[]);Object(n.useEffect)(()=>{O({type:"RESET"}),o(1)},[f]),Object(n.useEffect)(()=>{t(!0);const e=setTimeout(()=>{x()},500);return()=>clearTimeout(e)},[f,r]),Object(n.useEffect)(()=>{const e=He({companyId:localStorage.getItem("companyId")});return e.on("company-announcement",e=>{"update"!==e.action&&"create"!==e.action||O({type:"UPDATE_ANNOUNCEMENTS",payload:e.record}),"delete"===e.action&&O({type:"DELETE_ANNOUNCEMENT",payload:+e.id})}),()=>{e.disconnect()}},[]);const x=async()=>{try{const{data:e}=await Be.get("/announcements/",{params:{searchParam:f,pageNumber:r}});O({type:"LOAD_ANNOUNCEMENTS",payload:e.records}),i(e.hasMore),t(!1)}catch(e){Pe(e)}};return l.a.createElement(Ho,null,l.a.createElement(ol,{title:d&&"".concat(Me.a.t("announcements.confirmationModal.deleteTitle")," ").concat(d.name,"?"),open:E,onClose:h,onConfirm:()=>(async e=>{try{await Be.delete("/announcements/".concat(e)),b.b.success(Me.a.t("announcements.toasts.deleted"))}catch(a){Pe(a)}u(null),y(""),o(1)})(d.id)},Me.a.t("announcements.confirmationModal.deleteMessage")),l.a.createElement(qm,{resetPagination:()=>{o(1),x()},open:p,onClose:()=>{m(null),g(!1)},"aria-labelledby":"form-dialog-title",announcementId:s&&s.id}),l.a.createElement(Go,null,l.a.createElement(kt.a,{style:{width:"99.6%"},container:!0},l.a.createElement(kt.a,{xs:12,sm:8,item:!0},l.a.createElement(Ko,null,Me.a.t("announcements.title"))),l.a.createElement(kt.a,{xs:12,sm:4,item:!0},l.a.createElement(kt.a,{spacing:2,container:!0},l.a.createElement(kt.a,{xs:6,sm:6,item:!0},l.a.createElement(Wa.a,{fullWidth:!0,placeholder:Me.a.t("announcements.searchPlaceholder"),type:"search",value:f,onChange:e=>{y(e.target.value.toLowerCase())},InputProps:{startAdornment:l.a.createElement(So.a,{position:"start"},l.a.createElement(xn.a,{style:{color:"gray"}}))}})),l.a.createElement(kt.a,{xs:6,sm:6,item:!0},l.a.createElement(ba.a,{fullWidth:!0,variant:"contained",onClick:()=>{m(null),g(!0)},color:"primary"},Me.a.t("announcements.buttons.add"))))))),l.a.createElement(lt.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!c||a)return;const{scrollTop:t,scrollHeight:n,clientHeight:l}=e.currentTarget;n-(t+100)<l&&o(e=>e+1)}},l.a.createElement(nn.a,{size:"small"},l.a.createElement(cn.a,null,l.a.createElement(sn.a,null,l.a.createElement(rn.a,{align:"center"},Me.a.t("announcements.table.title")),l.a.createElement(rn.a,{align:"center"},Me.a.t("announcements.table.priority")),l.a.createElement(rn.a,{align:"center"},Me.a.t("announcements.table.mediaName")),l.a.createElement(rn.a,{align:"center"},Me.a.t("announcements.table.status")),l.a.createElement(rn.a,{align:"center"},Me.a.t("announcements.table.actions")))),l.a.createElement(ln.a,null,l.a.createElement(l.a.Fragment,null,v.map(e=>{var a,t;return l.a.createElement(sn.a,{key:e.id},l.a.createElement(rn.a,{align:"center"},e.title),l.a.createElement(rn.a,{align:"center"},1===(t=e.priority)?"Alta":2===t?"M\xe9dia":3===t?"Baixa":void 0),l.a.createElement(rn.a,{align:"center"},null!==(a=e.mediaName)&&void 0!==a?a:"Sem anexo"),l.a.createElement(rn.a,{align:"center"},e.status?"ativo":"inativo"),l.a.createElement(rn.a,{align:"center"},l.a.createElement(C.a,{size:"small",onClick:()=>(e=>{m(e),g(!0)})(e)},l.a.createElement(Qi.a,null)),l.a.createElement(C.a,{size:"small",onClick:a=>{h(!0),u(e)}},l.a.createElement(Pn.a,null))))}),a&&l.a.createElement(Jo,{columns:5}))))))};const Um=Object(y.a)(e=>({mainContainer:{display:"flex",flexDirection:"column",position:"relative",flex:1,height:"calc(100% - 58px)",overflow:"hidden",borderRadius:0},chatList:Object(h.a)({display:"flex",flexDirection:"column",position:"relative",flex:1,overflowY:"scroll"},e.scrollbarStyles),listItem:{cursor:"pointer"},inline:{color:"white"}}));function Vm(e){let{chats:a,handleSelectChat:t,handleDeleteChat:r,handleEditChat:o,pageInfo:c,loading:i}=e;const s=Um(),m=Object(E.g)(),{user:d}=Object(n.useContext)(Xe),{datetimeToClient:u}=et(),[p,g]=Object(n.useState)(!1),[b,h]=Object(n.useState)({}),{id:f}=Object(E.h)(),y=async e=>{if(v(e)>0)try{await Be.post("/chats/".concat(e.id,"/read"),{userId:d.id})}catch(a){}f!==e.uuid&&(m.push("/chats/".concat(e.uuid)),t(e))},v=e=>e.users.find(e=>e.userId===d.id).unreads,O=e=>{const a=e.title,t=v(e);return l.a.createElement(l.a.Fragment,null,a,t>0&&l.a.createElement(Ya.a,{size:"small",style:{marginLeft:5},label:t,color:"secondary"}))},x=e=>""!==e.lastMessage?"".concat(u(e.updatedAt),": ").concat(e.lastMessage):"",j=e=>({borderLeft:e.uuid===f?"6px solid #007aff":null,backgroundColor:e.uuid===f?"#539cec":null});return l.a.createElement(l.a.Fragment,null,l.a.createElement(ol,{title:"Excluir Conversa",open:p,onClose:g,onConfirm:()=>{r(b)}},"Esta a\xe7\xe3o n\xe3o pode ser revertida, confirmar?"),l.a.createElement("div",{className:s.mainContainer},l.a.createElement("div",{className:s.chatList},l.a.createElement(S.a,null,Array.isArray(a)&&a.length>0&&a.map((e,a)=>l.a.createElement(P.a,{onClick:()=>y(e),key:a,className:s.listItem,style:j(e),button:!0},l.a.createElement(q.a,{primary:O(e),secondary:x(e)}),e.ownerId===d.id&&l.a.createElement(Un.a,null,l.a.createElement(C.a,{onClick:()=>{y(e).then(()=>{o(e)})},edge:"end","aria-label":"delete",size:"small",style:{marginRight:5}},l.a.createElement(Qi.a,null)),l.a.createElement(C.a,{onClick:()=>{h(e),g(!0)},edge:"end","aria-label":"delete",size:"small"},l.a.createElement(Zl.a,null)))))))))}var Hm=t(1105);const Ym=Object(y.a)(e=>({mainContainer:{display:"flex",flexDirection:"column",position:"relative",flex:1,overflow:"hidden",borderRadius:0,height:"100%",borderLeft:"1px solid rgba(0, 0, 0, 0.12)"},messageList:Object(h.a)(Object(h.a)({position:"relative",overflowY:"auto",height:"100%"},e.scrollbarStyles),{},{background:e.palette.total}),inputArea:{position:"relative",height:"auto"},input:{padding:"20px"},buttonSend:{margin:e.spacing(1)},boxLeft:{padding:"10px 10px 5px",margin:"10px",position:"relative",backgroundColor:"white",color:"#7f7f7f",maxWidth:300,borderRadius:10,borderBottomLeftRadius:0,border:"1px solid rgba(0, 0, 0, 0.12)"},boxRight:{padding:"10px 10px 5px",margin:"10px 10px 10px auto",position:"relative",backgroundColor:"#72A0C1",color:"#fafafa",textAlign:"right",maxWidth:300,borderRadius:10,borderBottomRightRadius:0,border:"1px solid rgba(0, 0, 0, 0.12)"}}));function Gm(e){let{chat:a,messages:t,handleSendMessage:r,handleLoadMore:o,scrollToBottomRef:c,pageInfo:i,loading:s}=e;const m=Ym(),{user:d}=Object(n.useContext)(Xe),{datetimeToClient:u}=et(),p=Object(n.useRef)(),[g,E]=Object(n.useState)(""),b=()=>{p.current&&p.current.scrollIntoView({})};Object(n.useEffect)(()=>{if((e=>{if(void 0!==e){return e.users.find(e=>e.userId===d.id).unreads>0}return 0})(a)>0)try{Be.post("/chats/".concat(a.id,"/read"),{userId:d.id})}catch(e){}c.current=b},[]);return l.a.createElement(lt.a,{className:m.mainContainer},l.a.createElement("div",{onScroll:e=>{const{scrollTop:a}=e.currentTarget;i.hasMore&&!s&&a<600&&o()},className:m.messageList},Array.isArray(t)&&t.map((e,a)=>e.senderId===d.id?l.a.createElement(Vn.a,{key:a,className:m.boxRight},l.a.createElement(w.a,{variant:"subtitle2"},e.sender.name),e.message,l.a.createElement(w.a,{variant:"caption",display:"block"},u(e.createdAt))):l.a.createElement(Vn.a,{key:a,className:m.boxLeft},l.a.createElement(w.a,{variant:"subtitle2"},e.sender.name),e.message,l.a.createElement(w.a,{variant:"caption",display:"block"},u(e.createdAt)))),l.a.createElement("div",{ref:p})),l.a.createElement("div",{className:m.inputArea},l.a.createElement(Ha.a,{variant:"outlined",fullWidth:!0},l.a.createElement(Hm.a,{multiline:!0,value:g,onKeyUp:e=>{"Enter"===e.key&&""!==g.trim()&&(r(g),E(""))},onChange:e=>E(e.target.value),className:m.input,endAdornment:l.a.createElement(So.a,{position:"end"},l.a.createElement(C.a,{onClick:()=>{""!==g.trim()&&(r(g),E(""))},className:m.buttonSend},l.a.createElement(pr.a,null)))}))))}const _m=Object(y.a)(e=>({mainContainer:{display:"flex",flexDirection:"column",position:"relative",flex:1,padding:e.spacing(2),height:"calc(100% - 48px)",overflowY:"hidden",border:"1px solid rgba(0, 0, 0, 0.12)"},gridContainer:{flex:1,height:"100%",border:"1px solid rgba(0, 0, 0, 0.12)",background:e.palette.total},gridItem:{height:"100%"},gridItemTab:{height:"92%",width:"100%"},btnContainer:{textAlign:"right",padding:10}}));function Qm(e){let{open:a,chat:t,type:r,handleClose:o,handleLoadNewChat:c}=e;const[i,s]=Object(n.useState)([]),[m,d]=Object(n.useState)("");Object(n.useEffect)(()=>{if(d(""),s([]),"edit"===r){const e=t.users.map(e=>({id:e.user.id,name:e.user.name}));s(e),d(t.title)}},[t,a,r]);return l.a.createElement(qa.a,{open:a,onClose:o,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(Ba.a,{id:"alert-dialog-title"},"Conversa"),l.a.createElement(za.a,null,l.a.createElement(kt.a,{spacing:2,container:!0},l.a.createElement(kt.a,{xs:12,style:{padding:18},item:!0},l.a.createElement(Wa.a,{label:"T\xedtulo",placeholder:"T\xedtulo",value:m,onChange:e=>d(e.target.value),variant:"outlined",size:"small",fullWidth:!0})),l.a.createElement(kt.a,{xs:12,item:!0},l.a.createElement(Wl,{onFiltered:e=>s(e),initialUsers:i})))),l.a.createElement(Fa.a,null,l.a.createElement(ba.a,{onClick:o,color:"primary"},"Fechar"),l.a.createElement(ba.a,{onClick:async()=>{try{if(!m)return void alert("Por favor, preencha o t\xedtulo da conversa.");if(!i||0===i.length)return void alert("Por favor, selecione pelo menos um usu\xe1rio.");if("edit"===r)await Be.put("/chats/".concat(t.id),{users:i,title:m});else{const{data:e}=await Be.post("/chats",{users:i,title:m});c(e)}o()}catch(e){}},color:"primary",variant:"contained"},"Salvar")))}var Km=Object(On.a)()((function(e){const a=_m(),{user:t}=Object(n.useContext)(Xe),r=Object(E.g)(),[o,c]=Object(n.useState)(!1),[i,s]=Object(n.useState)("new"),[m,d]=Object(n.useState)({}),[u,p]=Object(n.useState)([]),[g,b]=Object(n.useState)({hasMore:!1}),[f,y]=Object(n.useState)([]),[v,O]=Object(n.useState)({hasMore:!1}),[C,x]=Object(n.useState)(1),[S,j]=Object(n.useState)(!1),[k,w]=Object(n.useState)(0),T=Object(n.useRef)(!0),I=Object(n.useRef)(),{id:A}=Object(E.h)();Object(n.useEffect)(()=>()=>{T.current=!1},[]),Object(n.useEffect)(()=>{T.current&&P().then(e=>{const{records:a}=e;if(a.length>0&&(p(a),b(e),A&&a.length)){const e=a.find(e=>e.uuid===A);N(e)}})},[]),Object(n.useEffect)(()=>{Object(Le.isObject)(m)&&Object(Le.has)(m,"id")&&D(m.id).then(()=>{"function"===typeof I.current&&setTimeout(()=>{I.current()},300)})},[m]),Object(n.useEffect)(()=>{const e=localStorage.getItem("companyId"),a=He({companyId:e});return a.on("company-".concat(e,"-chat-user-").concat(t.id),e=>{if("create"===e.action&&p(a=>[e.record,...a]),"update"===e.action){const a=u.map(a=>a.id===e.record.id?(d(e.record),Object(h.a)({},e.record)):a);p(a)}}),a.on("company-".concat(e,"-chat"),e=>{if("delete"===e.action){const a=u.filter(a=>a.id!==+e.id);p(a),y([]),x(1),O({hasMore:!1}),d({}),r.push("/chats")}}),Object(Le.isObject)(m)&&Object(Le.has)(m,"id")&&a.on("company-".concat(e,"-chat-").concat(m.id),e=>{if("new-message"===e.action){y(a=>[...a,e.newMessage]);const a=u.map(a=>a.id===e.newMessage.chatId?Object(h.a)({},e.chat):a);p(a),I.current()}if("update"===e.action){const a=u.map(a=>a.id===e.chat.id?Object(h.a)({},e.chat):a);p(a),I.current()}}),()=>{a.disconnect()}},[m]);const N=e=>{try{y([]),x(1),d(e),w(1)}catch(a){}},M=async e=>{j(!0);try{await Be.post("/chats/".concat(m.id,"/messages"),{message:e})}catch(a){}j(!1)},R=async e=>{try{await Be.delete("/chats/".concat(e.id))}catch(a){}},D=async e=>{j(!0);try{const{data:a}=await Be.get("/chats/".concat(e,"/messages?pageNumber=").concat(C));x(e=>e+1),O(a),y(e=>[...a.records,...e])}catch(a){}j(!1)},L=async()=>{S||D(m.id)},P=async()=>{try{const{data:e}=await Be.get("/chats");return e}catch(e){console.log(e)}};return l.a.createElement(l.a.Fragment,null,l.a.createElement(Qm,{type:i,open:o,chat:m,handleLoadNewChat:e=>{y([]),x(1),d(e),w(1),r.push("/chats/".concat(e.uuid))},handleClose:()=>c(!1)}),l.a.createElement(lt.a,{className:a.mainContainer},Object(On.b)("md",e.width)?l.a.createElement(kt.a,{className:a.gridContainer,container:!0},l.a.createElement(kt.a,{className:a.gridItem,md:3,item:!0},"admin"===t.profile&&l.a.createElement("div",{className:a.btnContainer},l.a.createElement(ba.a,{onClick:()=>{s("new"),c(!0)},color:"primary",variant:"contained"},"Nova")),l.a.createElement(Vm,{chats:u,pageInfo:g,loading:S,handleSelectChat:e=>N(e),handleDeleteChat:e=>R(e),handleEditChat:()=>{s("edit"),c(!0)}})),l.a.createElement(kt.a,{className:a.gridItem,md:9,item:!0},Object(Le.isObject)(m)&&Object(Le.has)(m,"id")&&l.a.createElement(Gm,{chat:m,scrollToBottomRef:I,pageInfo:v,messages:f,loading:S,handleSendMessage:M,handleLoadMore:L}))):l.a.createElement(kt.a,{className:a.gridContainer,container:!0},l.a.createElement(kt.a,{md:12,item:!0},l.a.createElement(jn.a,{value:k,indicatorColor:"primary",textColor:"primary",onChange:(e,a)=>w(a),"aria-label":"disabled tabs example"},l.a.createElement(kn.a,{label:"Chats"}),l.a.createElement(kn.a,{label:"Mensagens"}))),0===k&&l.a.createElement(kt.a,{className:a.gridItemTab,md:12,item:!0},l.a.createElement("div",{className:a.btnContainer},l.a.createElement(ba.a,{onClick:()=>c(!0),color:"primary",variant:"contained"},"Novo")),l.a.createElement(Vm,{chats:u,pageInfo:g,loading:S,handleSelectChat:e=>N(e),handleDeleteChat:e=>R(e)})),1===k&&l.a.createElement(kt.a,{className:a.gridItemTab,md:12,item:!0},Object(Le.isObject)(m)&&Object(Le.has)(m,"id")&&l.a.createElement(Gm,{scrollToBottomRef:I,pageInfo:v,messages:f,loading:S,handleSendMessage:M,handleLoadMore:L})))))}));const Zm=Object(y.a)(e=>({mainPaper:Object(h.a)({flex:1,padding:e.spacing(1),overflowY:"scroll"},e.scrollbarStyles)})),Jm=e=>{const a=new Date,t=new Date(e),n=Math.abs(a.getTime()-t.getTime());return Math.ceil(n/864e5)};var Xm=()=>{var e,a;const t=Zm(),{user:r}=Object(n.useContext)(Xe),[o]=Object(n.useState)(!1),[,c]=Object(n.useState)(1),[i,s]=Object(n.useState)(null),[m,d]=Object(n.useState)(!1),[u]=Object(n.useState)(!1);return l.a.createElement(Ho,{className:t.mainContainer},l.a.createElement(Vi,{open:m,onClose:()=>{s(null),d(!1)},"aria-labelledby":"form-dialog-title",contactId:i}),l.a.createElement(Go,null,l.a.createElement(Ko,null,"Assinatura")),l.a.createElement(kt.a,{item:!0,xs:12,sm:4},l.a.createElement(lt.a,{className:t.mainPaper,variant:"outlined",onScroll:e=>{if(!u||o)return;const{scrollTop:a,scrollHeight:t,clientHeight:n}=e.currentTarget;t-(a+100)<n&&c(e=>e+1)}},l.a.createElement("div",null,l.a.createElement(Wa.a,{id:"outlined-full-width",label:"Per\xedodo de teste",defaultValue:"Seu per\xedodo de teste termina em ".concat(Jm(null===r||void 0===r||null===(e=r.company)||void 0===e?void 0:e.trialExpiration)," dias!"),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:"outlined"})),l.a.createElement("div",null,l.a.createElement(Wa.a,{id:"outlined-full-width",label:"Email de cobran\xe7a",defaultValue:null===r||void 0===r||null===(a=r.company)||void 0===a?void 0:a.email,fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:"outlined"})),l.a.createElement("div",null,l.a.createElement(ba.a,{variant:"contained",color:"primary",onClick:()=>{s(null),d(!0)},fullWidth:!0},"Assine Agora!")))))};const $m=Object(y.a)({root:{display:"flex",flexDirection:"column",alignItems:"center",margin:"2rem"},inputContainer:{display:"flex",width:"100%",marginBottom:"1rem"},input:{flexGrow:1,marginRight:"1rem"},listContainer:{width:"100%",height:"100%",marginTop:"1rem",backgroundColor:"#007aff",color:"#fafafa",borderRadius:"5px"},list:{marginBottom:"5px"}});var ed=()=>{const e=$m(),[a,t]=Object(n.useState)(""),[r,o]=Object(n.useState)([]),[c,i]=Object(n.useState)(-1);Object(n.useEffect)(()=>{const e=localStorage.getItem("tasks");e&&o(JSON.parse(e))},[]),Object(n.useEffect)(()=>{localStorage.setItem("tasks",JSON.stringify(r))},[r]);return l.a.createElement("div",{className:e.root},l.a.createElement("div",{className:e.inputContainer},l.a.createElement(Wa.a,{className:e.input,label:"Nova tarefa",value:a,onChange:e=>{t(e.target.value)},variant:"outlined"}),l.a.createElement(ba.a,{variant:"contained",color:"primary",onClick:()=>{if(!a.trim())return;const e=new Date;if(c>=0){const n=[...r];n[c]={text:a,updatedAt:e,createdAt:n[c].createdAt},o(n),t(""),i(-1)}else o([...r,{text:a,createdAt:e,updatedAt:e}]),t("")}},c>=0?"Salvar":"Adicionar")),l.a.createElement("div",{className:e.listContainer},l.a.createElement(S.a,null,r.map((a,n)=>l.a.createElement(P.a,{key:n,className:e.list},l.a.createElement(q.a,{primary:a.text,secondary:a.updatedAt.toLocaleString()}),l.a.createElement(Un.a,null,l.a.createElement(C.a,{onClick:()=>(e=>{t(r[e].text),i(e)})(n)},l.a.createElement(Qi.a,null)),l.a.createElement(C.a,{onClick:()=>(e=>{const a=[...r];a.splice(e,1),o(a)})(n)},l.a.createElement(Zl.a,null))))))))},ad=t(696),td=t.n(ad);const nd=Object(y.a)(e=>({root:{display:"flex",alignItems:"center",padding:e.spacing(1)},button:{background:"#10a110",border:"none",padding:"10px",color:"white",fontWeight:"bold",borderRadius:"5px"}}));var ld=()=>{const e=nd(),a=Object(E.g)(),[t,r]=Object(n.useState)([]),[o,c]=Object(n.useState)(!1),[i,s]=Object(n.useState)(!1);Object(n.useEffect)(()=>{(async()=>{try{const e=(await Be.get("/tags/kanban")).data.lista||[];r(e),await v(y)}catch(e){console.log(e)}})()},[]);const[m,d]=Object(n.useState)({lanes:[]}),[u,p]=Object(n.useState)([]),{user:g}=Object(n.useContext)(Xe),{profile:h,queues:f}=g,y=g.queues.map(e=>e.UserQueue.queueId),v=async e=>{try{const{data:a}=await Be.get("/ticket/kanban",{params:{queueIds:JSON.stringify(e),teste:!0}});p(a.tickets)}catch(a){console.log(a),p([])}},O=e=>{a.push("/tickets/"+e)};Object(n.useEffect)(()=>{(a=>{const n=u.filter(e=>0===e.tags.length),r=[{id:"lane0",title:Me.a.t("tagsKanban.laneDefault"),label:"0",cards:n.map(a=>({id:a.id.toString(),label:"Ticket n\xba "+a.id.toString(),description:l.a.createElement("div",null,l.a.createElement("p",null,a.contact.number,l.a.createElement("br",null),a.lastMessage),l.a.createElement("button",{className:e.button,onClick:()=>{O(a.uuid)}},"Ver Ticket")),title:a.contact.name,draggable:!0,href:"/tickets/"+a.uuid}))},...t.map(a=>{const t=u.filter(e=>e.tags.map(e=>e.id).includes(a.id));return{id:a.id.toString(),title:a.name,label:a.id.toString(),cards:t.map(a=>({id:a.id.toString(),label:"Ticket n\xba "+a.id.toString(),description:l.a.createElement("div",null,l.a.createElement("p",null,a.contact.number,l.a.createElement("br",null),a.lastMessage),l.a.createElement("button",{className:e.button,onClick:()=>{console.log(a.uuid),O(a.uuid)}},"Ver Ticket")),title:a.contact.name,draggable:!0,href:"/tickets/"+a.uuid})),style:{backgroundColor:a.color,color:"white"}}})];d({lanes:r})})()},[t,u,o]);return l.a.createElement("div",{className:e.root},l.a.createElement(td.a,{data:m,onCardMoveAcrossLanes:async(e,a,t)=>{try{await Be.delete("/ticket-tags/".concat(t)),b.b.success("Ticket Tag Removido!"),await Be.put("/ticket-tags/".concat(t,"/").concat(a)),b.b.success("Ticket Tag Adicionado com Sucesso!")}catch(n){console.log(n)}},style:{backgroundColor:"rgba(252, 252, 252, 0.03)"}}))};const rd=(e,a)=>{if("LOAD_TAGS"===a.type){const t=a.payload,n=[];return t.forEach(a=>{const t=e.findIndex(e=>e.id===a.id);-1!==t?e[t]=a:n.push(a)}),[...e,...n]}if("UPDATE_TAGS"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t.id);return-1!==n?(e[n]=t,[...e]):[t,...e]}if("DELETE_TAG"===a.type){const t=a.payload,n=e.findIndex(e=>e.id===t);return-1!==n&&e.splice(n,1),[...e]}if("RESET"===a.type)return[]},od=Object(y.a)(e=>({mainPaper:Object(h.a)({flex:1,padding:e.spacing(1),overflowY:"scroll"},e.scrollbarStyles)}));var cd=()=>{const e=od(),{user:a}=Object(n.useContext)(Xe),[t,r]=Object(n.useState)(!1),[o,c]=Object(n.useState)(1),[i,s]=Object(n.useState)(!1),[m,d]=Object(n.useState)(null),[u,p]=Object(n.useState)(null),[g,E]=Object(n.useState)(!1),[h,f]=Object(n.useState)(""),[y,v]=Object(n.useReducer)(rd,[]),[O,x]=Object(n.useState)(!1),S=Object(n.useCallback)(async()=>{try{const{data:e}=await Be.get("/tags/",{params:{searchParam:h,pageNumber:o,kanban:1}});v({type:"LOAD_TAGS",payload:e.tags}),s(e.hasMore),r(!1)}catch(e){Pe(e)}},[h,o]);Object(n.useEffect)(()=>{v({type:"RESET"}),c(1)},[h]),Object(n.useEffect)(()=>{r(!0);const e=setTimeout(()=>{S()},500);return()=>clearTimeout(e)},[h,o,S]),Object(n.useEffect)(()=>{const e=He({companyId:a.companyId});return e.on("company".concat(a.companyId,"-tag"),e=>{"update"!==e.action&&"create"!==e.action||v({type:"UPDATE_TAGS",payload:e.tag}),"delete"===e.action&&v({type:"DELETE_TAG",payload:+e.tagId})}),()=>{e.disconnect()}},[a]);return l.a.createElement(Ho,null,l.a.createElement(ol,{title:u&&"".concat(Me.a.t("tagsKanban.confirmationModal.deleteTitle")),open:g,onClose:E,onConfirm:()=>(async e=>{try{await Be.delete("/tags/".concat(e)),b.b.success(Me.a.t("tags.toasts.deleted"))}catch(a){Pe(a)}p(null),f(""),c(1),v({type:"RESET"}),c(1),await S()})(u.id)},Me.a.t("tagsKanban.confirmationModal.deleteMessage")),l.a.createElement(Cs,{open:O,onClose:()=>{d(null),x(!1)},reload:S,"aria-labelledby":"form-dialog-title",tagId:m&&m.id,kanban:1}),l.a.createElement(Go,null,l.a.createElement(Ko,null,Me.a.t("tagsKanban.title")," (",y.length,")"),l.a.createElement(Qo,null,l.a.createElement(Wa.a,{placeholder:Me.a.t("contacts.searchPlaceholder"),type:"search",value:h,onChange:e=>{f(e.target.value.toLowerCase())},InputProps:{startAdornment:l.a.createElement(So.a,{position:"start"},l.a.createElement(xn.a,{style:{color:"gray"}}))}}),l.a.createElement(ba.a,{variant:"contained",color:"primary",onClick:()=>{d(null),x(!0)}},Me.a.t("tagsKanban.buttons.add")))),l.a.createElement(lt.a,{className:e.mainPaper,variant:"outlined",onScroll:e=>{if(!i||t)return;const{scrollTop:a,scrollHeight:n,clientHeight:l}=e.currentTarget;n-(a+100)<l&&c(e=>e+1)}},l.a.createElement(nn.a,{size:"small"},l.a.createElement(cn.a,null,l.a.createElement(sn.a,null,l.a.createElement(rn.a,{align:"center"},Me.a.t("tagsKanban.table.name")),l.a.createElement(rn.a,{align:"center"},Me.a.t("tagsKanban.table.tickets")),l.a.createElement(rn.a,{align:"center"},Me.a.t("tagsKanban.table.actions")))),l.a.createElement(ln.a,null,l.a.createElement(l.a.Fragment,null,y.map(e=>l.a.createElement(sn.a,{key:e.id},l.a.createElement(rn.a,{align:"center"},l.a.createElement(Ya.a,{variant:"outlined",style:{backgroundColor:e.color,textShadow:"1px 1px 1px #000",color:"white"},label:e.name,size:"small"})),l.a.createElement(rn.a,{align:"center"},(null===e||void 0===e?void 0:e.ticketsCount)?l.a.createElement("span",null,null===e||void 0===e?void 0:e.ticketsCount):l.a.createElement("span",null,"0")),l.a.createElement(rn.a,{align:"center"},l.a.createElement(C.a,{size:"small",onClick:()=>(e=>{d(e),x(!0)})(e)},l.a.createElement(Qi.a,null)),l.a.createElement(C.a,{size:"small",onClick:a=>{E(!0),p(e)}},l.a.createElement(Pn.a,null))))),t&&l.a.createElement(Jo,{columns:4}))))))};var id=()=>{const[e,a]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{void 0!==localStorage.getItem("cshow")&&a(!0)},[]),l.a.createElement(g.a,null,l.a.createElement($e,null,l.a.createElement(Yn,null,l.a.createElement(E.d,null,l.a.createElement(sm,{exact:!0,path:"/login",component:To}),l.a.createElement(sm,{exact:!0,path:"/signup",component:xo}),l.a.createElement(Qe,null,l.a.createElement(St,null,l.a.createElement(sm,{exact:!0,path:"/",component:vn,isPrivate:!0}),l.a.createElement(sm,{exact:!0,path:"/tickets/:ticketId?",component:Eo,isPrivate:!0}),l.a.createElement(sm,{exact:!0,path:"/connections",component:oc,isPrivate:!0}),l.a.createElement(sm,{exact:!0,path:"/quick-messages",component:cm,isPrivate:!0}),l.a.createElement(sm,{exact:!0,path:"/todolist",component:ed,isPrivate:!0}),l.a.createElement(sm,{exact:!0,path:"/schedules",component:um,isPrivate:!0}),l.a.createElement(sm,{exact:!0,path:"/tags",component:js,isPrivate:!0}),l.a.createElement(sm,{exact:!0,path:"/contacts",component:as,isPrivate:!0}),l.a.createElement(sm,{exact:!0,path:"/helps",component:Ms,isPrivate:!0}),l.a.createElement(sm,{exact:!0,path:"/users",component:Ji,isPrivate:!0}),l.a.createElement(sm,{exact:!0,path:"/messages-api",component:ws,isPrivate:!0}),l.a.createElement(sm,{exact:!0,path:"/settings",component:Bc,isPrivate:!0}),l.a.createElement(sm,{exact:!0,path:"/financeiro",component:Gi,isPrivate:!0}),l.a.createElement(sm,{exact:!0,path:"/queues",component:fs,isPrivate:!0}),l.a.createElement(sm,{exact:!0,path:"/announcements",component:Bm,isPrivate:!0}),l.a.createElement(sm,{exact:!0,path:"/subscription",component:Xm,isPrivate:!0}),l.a.createElement(sm,{exact:!0,path:"/chats/:id?",component:Km,isPrivate:!0}),e&&l.a.createElement(l.a.Fragment,null,l.a.createElement(sm,{exact:!0,path:"/contact-lists",component:Us,isPrivate:!0}),l.a.createElement(sm,{exact:!0,path:"/contact-lists/:contactListId/contacts",component:Js,isPrivate:!0}),l.a.createElement(sm,{exact:!0,path:"/campaigns",component:Sm,isPrivate:!0}),l.a.createElement(sm,{exact:!0,path:"/campaign/:campaignId/report",component:Lm,isPrivate:!0}),l.a.createElement(sm,{exact:!0,path:"/campaigns-config",component:wm,isPrivate:!0}),l.a.createElement(sm,{exact:!0,path:"/Kanban",component:ld,isPrivate:!0}),l.a.createElement(sm,{exact:!0,path:"/TagsKanban",component:cd,isPrivate:!0}))))),l.a.createElement(b.a,{autoClose:3e3}))))};const sd=new i.QueryClient;var md=()=>{const[e,a]=Object(n.useState)(),t=Object(u.a)("(prefers-color-scheme: dark)"),r=window.localStorage.getItem("preferredTheme"),[o,c]=Object(n.useState)(r||(t?"dark":"light")),g=l.a.useMemo(()=>({toggleColorMode:()=>{c(e=>"light"===e?"dark":"light")}}),[]),E=Object(m.a)({scrollbarStyles:{"&::-webkit-scrollbar":{width:"8px",height:"8px"},"&::-webkit-scrollbar-thumb":{boxShadow:"inset 0 0 6px rgba(0, 0, 0, 0.3)",backgroundColor:"#e8e8e8"}},scrollbarStylesSoft:{"&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"light"===o?"#F3F3F3":"#333333"}},palette:{type:o,primary:{main:"#007aff"},textPrimary:"light"===o?"#007aff":"#FFFFFF",borderPrimary:"light"===o?"#007aff":"#FFFFFF",dark:{main:"light"===o?"#333333":"#F3F3F3"},light:{main:"light"===o?"#F3F3F3":"#333333"},tabHeaderBackground:"light"===o?"#EEE":"#666",optionsBackground:"light"===o?"#fafafa":"#333",fancyBackground:"light"===o?"#fafafa":"#333",total:"light"===o?"#fff":"#222",messageIcons:"light"===o?"grey":"#F3F3F3",inputBackground:"light"===o?"#FFFFFF":"#333",barraSuperior:"#007aff"},mode:o},e);return Object(n.useEffect)(()=>{const e=localStorage.getItem("i18nextLng");"ptBR"===e.substring(0,2)+e.substring(3,5)&&a(s.ptBR)},[]),Object(n.useEffect)(()=>{window.localStorage.setItem("preferredTheme",o)},[o]),l.a.createElement(p.Provider,{value:{colorMode:g}},l.a.createElement(d.a,{theme:E},l.a.createElement(i.QueryClientProvider,{client:sd},l.a.createElement(id,null))))};o.a.render(l.a.createElement(c.a,null,l.a.createElement(md,null)),document.getElementById("root"))},265:function(e,a){e.exports="data:image/png;base64,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"},352:function(e,a,t){e.exports=t.p+"static/media/planilha.549edeba.xlsx"},444:function(e){e.exports=JSON.parse('{"a":{"name":"AppBot","url":"https://tickets.appbot.cloud","color":{"lightTheme":{"palette":{"primary":"#F04405","secondary":"#0D0D0D"}}}}}')},632:function(e,a,t){e.exports=t.p+"static/media/sound.9fd5812c.mp3"},638:function(e,a){e.exports="data:image/png;base64,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"},639:function(e,a,t){e.exports=t.p+"static/media/chat_notify.2529c259.mp3"},661:function(e,a,t){e.exports=t.p+"static/media/wa-background.2675a051.png"},745:function(e,a,t){e.exports=t(1097)}},[[745,1,2]]]);